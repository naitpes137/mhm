import{a as Wc}from"./chunk-S2ZEJODY.js";import{a as So,b as jc,c as Tr}from"./chunk-ZKMWVOKP.js";import"./chunk-HYBSAPSS.js";import{a as zc}from"./chunk-5DBHZAKT.js";import{a as Ut}from"./chunk-WNILEG6S.js";import{a as Ec,b as Ic,c as Rc,g as Ac}from"./chunk-X2T26I4W.js";import{i as Dc,k as Vc,l as Uc,n as Nc,o as Bc,p as Lc}from"./chunk-KCSJC7J5.js";import"./chunk-KJPTR26Z.js";import{a as kr}from"./chunk-BFZFITVO.js";import{a as Fc}from"./chunk-67KBQVMJ.js";import{a as io,b as no,c as Ua}from"./chunk-RLNFJA3A.js";import{$a as _c,A as Ya,Aa as rc,Ab as kc,B as Qa,Bb as Tc,C as Ja,Ca as sc,Fb as nn,Ga as ac,Gb as xo,H as _o,Ia as jt,La as bo,Ma as cc,Oa as lc,Pa as dc,Qa as pc,Ra as mc,Sa as uc,V as Xa,Va as gc,Wa as fc,_ as Za,_a as hc,a as Qn,c as Oa,db as Cc,e as Jn,fa as et,g as Ta,ga as zt,h as Ia,hb as vc,i as Ra,ia as ec,ib as bc,j as Aa,ka as tc,kb as Or,lb as xc,ma as Co,mb as Sc,nb as yc,ob as wc,qb as Pc,rb as Mc,ub as Oc,va as ic,wa as vo,x as tn,xa as nc,za as oc}from"./chunk-GXZQKE6V.js";import{m as ho}from"./chunk-WYPJZQF5.js";import{$a as d,$b as Ys,$c as In,$d as br,$f as We,$i as uo,Ab as Ks,Ag as ba,B as vr,Bd as Rn,Be as sa,Bh as Na,Ca as Be,Cb as Y,Cd as fi,Ce as xr,Cg as xa,Ch as Ba,Da as Le,Db as me,Dg as qn,Eb as Dt,Ed as Ce,Ee as jn,Eh as La,Fd as An,Ff as Me,Gd as hi,Ha as lt,Hd as Vt,Hg as Kn,Hi as Ha,Ia as h,Id as Dn,Ig as T,Ii as $a,Ja as _,Jd as Vn,Ke as aa,Kf as Wn,Kg as Sa,La as Et,Le as Sr,Lh as so,Ma as q,Mb as On,Mg as H,Mi as yi,N as js,Na as K,Nd as Un,Oa as g,Od as Nn,Oe as yr,Of as Xe,Og as mt,Pa as s,Pd as Bn,Pg as Mr,Qa as c,Qd as je,Qf as ma,Qh as Fa,Qi as mo,R as he,Ra as x,Rd as Ln,Rf as Oe,Rh as za,S as di,Sd as Z,Se as wr,Td as Fn,Tg as ya,U as X,Ud as ea,Uh as vi,Vd as Zi,Ve as ca,Vg as wa,Vi as Ga,W as v,Wd as de,Wf as j,Wg as Pa,Wi as en,X as b,Xi as qa,Y as Ws,Ya as w,Yb as kn,Yd as _i,Yf as Hn,Yg as Ma,Yi as Ka,Z as Hs,_a as C,_d as ta,_g as Yn,_h as Ft,a as L,ag as ua,b as ct,bc as Tn,bg as ga,bh as Xn,bj as go,c as zs,ce as ia,cg as He,ch as Zn,cj as fo,db as It,de as na,dg as fa,dh as eo,e as Vp,eb as Rt,eg as ha,eh as to,fb as At,fg as _a,fh as ka,g as li,ga as $s,gb as Fe,gg as Ca,gh as Nt,gi as bi,hb as _e,hh as Ea,hi as ja,ib as I,id as Qs,if as Pr,ig as $n,ih as Da,j as Yi,jb as ze,jf as la,jg as va,jh as Va,kb as p,ke as oa,kh as Zt,ki as ao,l as yn,la as De,lb as z,lc as mi,ld as Js,li as co,ma as Tt,mb as k,md as Xs,mh as oo,na as Gs,nb as dt,ni as xi,o as Qi,oa as Xi,oh as Ze,pa as wn,pi as ut,qa as l,qb as ae,rb as ce,rc as En,re as ra,rf as da,rh as Bt,ri as lo,s as Ji,sb as le,sh as oe,si as Ge,tb as Pn,th as ke,ti as Wa,ua as u,ub as pt,uf as pe,uh as Te,ui as Si,vf as Up,vg as Gn,vh as W,vi as po,wb as Mn,we as zn,wf as pa,wh as ro,x as Je,xa as O,xd as ui,xh as Ci,ya as pi,yb as qs,yd as gi,yf as ie,yh as Lt,z as Cr,zd as Zs,zg as $e,zh as V}from"./chunk-4LPE7HNY.js";function Bp(e,i){if(e&1){let n=w();s(0,"div",2),C("click",function(){v(n);let o=d();return b(o.toggleEncouragements())}),x(1,"ss-icon",3),s(2,"div",4),p(3),c()()}if(e&2){let n=d();l(),g("iconVariant",28)("size",28),l(2),k(" ",n.encouragementCount," ")}}function Lp(e,i){if(e&1){let n=w();s(0,"div",1)(1,"div",5),x(2,"ss-icon",3),s(3,"div",4),p(4),c()(),s(5,"ss-button",6),C("buttonClick",function(){v(n);let o=d();return b(o.checkEncourageAllBack())}),p(6," Encourage all "),c(),s(7,"div",7)(8,"ss-html-tooltip")(9,"ss-button",8),C("buttonClick",function(){v(n);let o=d();return b(o.dismissAllEncouragements())}),c(),s(10,"div",9),p(11,"Dismiss all"),c()(),s(12,"ss-button",10),C("buttonClick",function(){v(n);let o=d();return b(o.toggleEncouragements())}),c()()()}if(e&2){let n=d();l(2),g("iconVariant",28)("size",28),l(2),k(" ",n.encouragementCount),l(),g("isLoading",n.loading)("disabled",n.loading),l(4),g("iconOnly",!0)("iconSize",28),l(3),g("iconOnly",!0)("iconSize",28)}}var Hc=(()=>{let i=class i{get encouragementCount(){return this.encouragementService.encouragementsReceived.length}constructor(t,o,r,a,m){this.encouragementService=t,this.analyticsService=o,this.toastService=r,this.snackBarService=a,this.dialog=m,this.hideEncouragementsClick=new Le,this.loading=!1}toggleEncouragements(){this.hideEncouragementsClick.emit(!this.hideEncouragements)}checkEncourageAllBack(){this.dialog.open(pa,{panelClass:"fullscreen-dialog",data:{modalTitle:"Are you sure?",description:"EncourageAllBack",confirmButtonLabel:"Yes"}}).afterClosed().subscribe(o=>{o&&this.encourageAllBack()})}dismissAllEncouragements(){this.encouragementService.dismissAllEncouragements(Zt.Closed).subscribe({next:()=>this.loading=!1,error:t=>this.handleErrors(t)})}encourageAllBack(){let t=this.encouragementService.encouragementsReceived.map(o=>({userId:o.sender.id,encouragementTypeId:o.encouragementTypeId}));this.loading=!0,this.encouragementService.encourageAllBack(t).subscribe({next:o=>li(this,null,function*(){let r=o.sentToUserIds.length;o.encouragementsPerDayLeft!==null?yield this.snackBarService.info({message:`Encouraged back ${r} user${r===1?"":"s"}. You have ${o.encouragementsPerDayLeft} encouragements left for today.`}):yield this.snackBarService.info({message:"Encouraged back all users who are still in the room."}),this.analyticsService.markActivity(W.LivekitEncourageAllBack,{sentToUserIds:o.sentToUserIds}),this.closeAllEncouragementToasts(Zt.EncouragedBack)}),error:o=>this.handleErrors(o)})}closeAllEncouragementToasts(t){this.encouragementService.dismissAllEncouragements(t).subscribe({error:o=>this.handleErrors(o)})}handleErrors(t){this.loading=!1,t[0].errorCode==="MaxEncouragementsPerDayReached"?this.toastService.info({title:"Maximum encouragements reached",exceptionDetail:t[0],paidFeatureText:"Upgrade to encourage more",triggeredUpgradeFromSource:Ze.MaxEncouragementsReached,autoClose:!1}):t[0].errorCode==="MaxEncouragementsPerDayReachedPremium"?this.toastService.info({title:"Maximum encouragements reached",exceptionDetail:t[0]}):this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(ro),u(oe),u(V),u(Na),u(Ce))},i.\u0275cmp=O({type:i,selectors:[["ss-encouragement-menu"]],inputs:{hideEncouragements:"hideEncouragements"},outputs:{hideEncouragementsClick:"hideEncouragementsClick"},standalone:!1,decls:2,vars:2,consts:[[1,"toggle-encouragements"],[1,"encouragements-menu"],[1,"toggle-encouragements",3,"click"],["iconName","thumb_like","color","contrast",3,"iconVariant","size"],[1,"counter"],[1,"counter-wrapper"],["color","secondary",1,"encourage-all-back",3,"buttonClick","isLoading","disabled"],[1,"button-wrapper"],["color","website-transparent","iconName","delete",1,"dismiss-all",3,"buttonClick","iconOnly","iconSize"],["tooltip",""],["color","website-transparent","iconName","arrow_square_down",3,"buttonClick","iconOnly","iconSize"]],template:function(o,r){o&1&&(h(0,Bp,4,3,"div",0),h(1,Lp,13,9,"div",1)),o&2&&(_(r.hideEncouragements?0:-1),l(),_(r.hideEncouragements?-1:1))},dependencies:[H,j,Ba],styles:[".toggle-encouragements[_ngcontent-%COMP%]{position:absolute;bottom:25px;left:70px;z-index:5;display:flex;align-items:center;padding:8px 12px 8px 8px;border-radius:16px;background:var(--video-overlay);cursor:pointer}@media only screen and (max-width: 1024px){.toggle-encouragements[_ngcontent-%COMP%]{bottom:60px;left:30px}}@media only screen and (max-width: 479px){.toggle-encouragements[_ngcontent-%COMP%]{left:10px}}@media only screen and (max-height: 480px){.toggle-encouragements[_ngcontent-%COMP%]{bottom:20px}}.counter[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:20px;height:20px;margin-left:4px;border-radius:50%;color:var(--contrast);background:var(--accent-blue)}.encouragements-menu[_ngcontent-%COMP%]{position:absolute;bottom:25px;left:70px;z-index:5;display:flex;justify-content:space-between;align-items:center;max-width:400px;width:calc(100% - 36px);padding:8px 12px 8px 8px;border-radius:16px;color:var(--contrast);background:var(--video-overlay)}@media only screen and (max-width: 1024px){.encouragements-menu[_ngcontent-%COMP%]{bottom:60px;left:30px}}@media only screen and (max-width: 479px){.encouragements-menu[_ngcontent-%COMP%]{right:0;left:0;max-width:inherit;width:calc(100% - 20px);margin:0 10px}}@media only screen and (max-height: 480px){.encouragements-menu[_ngcontent-%COMP%]{bottom:20px}}.encouragements-menu[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{margin-right:7px}.encouragements-menu[_ngcontent-%COMP%]   .counter-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.encouragements-menu[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex}.encouragements-menu[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]  button{padding:0 8px}"]});let e=i;return e})();function Wp(e,i){if(e&1){let n=w();s(0,"ss-autocomplete",4),le("ngModelChange",function(o){v(n);let r=d();return ce(r.model.countryId,o)||(r.model.countryId=o),b(o)}),c()}if(e&2){let n=d();ae("ngModel",n.model.countryId),g("initialValue",n.model.countryId)("options",n.countries)("canClearSelection",!0)}}var Er=(()=>{let i=class i{constructor(t,o,r){this.accountService=t,this.toastService=o,this.countryService=r,this.model={},this.stepLoading=!1}ngOnInit(){this.currentUser=this.accountService.currentUser,this.model.countryId=this.currentUser.countryId,this.countryService.getAll().subscribe({next:t=>this.countries=t})}completeStep(){this.stepLoading=!0,this.accountService.completeProfileSetupStep1(this.model).subscribe({next:()=>{this.stepLoading=!1,this.model.overrideCanDeactivate=!0,this.accountService.activeProfileStep++},error:t=>this.handleErrors(t)})}skipStep(){this.model.countryId=null,this.completeStep()}anyInformationFilled(){return this.model.countryId}handleErrors(t){this.stepLoading=!1,this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(T),u(V),u(bo))},i.\u0275cmp=O({type:i,selectors:[["ss-profile-step-1"]],standalone:!1,decls:9,vars:3,consts:[[1,"step-progress"],[1,"fill"],["id","country-id","name","countryId","placeholder","Type to search...","label","Which country / region are you from?","valueProperty","id","labelProperty","name","flagIconProperty","twoLetterCountryCode",3,"ngModel","initialValue","options","canClearSelection"],[3,"buttonClick","isLoading"],["id","country-id","name","countryId","placeholder","Type to search...","label","Which country / region are you from?","valueProperty","id","labelProperty","name","flagIconProperty","twoLetterCountryCode",3,"ngModelChange","ngModel","initialValue","options","canClearSelection"]],template:function(o,r){o&1&&(s(0,"h3"),p(1,"Complete your profile"),c(),s(2,"small"),p(3,"All fields are optional! You can edit your profile at any time."),c(),s(4,"div",0),x(5,"div",1),c(),h(6,Wp,1,4,"ss-autocomplete",2),s(7,"ss-button",3),C("buttonClick",function(){return r.anyInformationFilled()?r.completeStep():r.skipStep()}),p(8),c()),o&2&&(l(6),_(r.countries?6:-1),l(),g("isLoading",r.stepLoading),l(),k(" ",r.anyInformationFilled()?"Next":"Skip",`
`))},dependencies:[vo,H,We,He],styles:["[_nghost-%COMP%]{display:block;padding:24px;margin-bottom:24px;border:1px solid var(--alt);border-radius:16px}ss-autocomplete[_ngcontent-%COMP%]{margin-bottom:20px}.step-progress[_ngcontent-%COMP%]{width:100%;height:4px;margin:16px 0;background:var(--accent-blue-90)}.step-progress[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{width:25%;height:4px;background:var(--accent-gradient)}ss-button[_ngcontent-%COMP%]     button{width:auto;margin-left:auto}"]});let e=i;return e})();function Gp(e,i){if(e&1){let n=w();s(0,"ss-autocomplete",7),le("ngModelChange",function(o){v(n);let r=d();return ce(r.model.areaOfStudyId,o)||(r.model.areaOfStudyId=o),b(o)}),c()}if(e&2){let n=d();ae("ngModel",n.model.areaOfStudyId),g("initialValue",n.model.areaOfStudyId)("options",n.areasOfStudy)("canClearSelection",!0)("label",n.settingsService.isB2BApp()||n.settingsService.isCoWork()?"What's your industry / field of work?":"What's your industry / area of study?")}}var Ir=(()=>{let i=class i{constructor(t,o,r,a){this.settingsService=t,this.accountService=o,this.areaOfStudyService=r,this.toastService=a,this.model={},this.stepLoading=!1}ngOnInit(){this.currentUser=this.accountService.currentUser,this.model.bio=this.currentUser.bio,this.model.areaOfStudyId=this.currentUser.areaOfStudyId,this.areaOfStudyService.getAllActive().subscribe({next:t=>this.areasOfStudy=t})}goBack(){this.accountService.activeProfileStep--}completeStep(){this.stepLoading=!0,this.accountService.completeProfileSetupStep2(this.model).subscribe({next:()=>{this.stepLoading=!1,this.model.overrideCanDeactivate=!0,this.accountService.activeProfileStep++},error:t=>this.handleErrors(t)})}skipStep(){this.model.bio=null,this.model.areaOfStudyId=null,this.completeStep()}anyInformationFilled(){return this.model.bio||this.model.areaOfStudyId}handleErrors(t){this.stepLoading=!1,this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(ie),u(T),u(cc),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-profile-step-2"]],standalone:!1,decls:13,vars:7,consts:[[1,"step-progress"],[1,"fill"],["id","area-of-study-id","name","areaOfStudyId","placeholder","Type to search...","valueProperty","id","labelProperty","name",3,"ngModel","initialValue","options","canClearSelection","label"],["id","bio","name","bio","label","Tell us a bit about yourself!",3,"ngModelChange","placeholder","ngModel","rows","maxlength"],[1,"button-wrapper"],["color","tertiary",3,"buttonClick"],[3,"buttonClick","isLoading"],["id","area-of-study-id","name","areaOfStudyId","placeholder","Type to search...","valueProperty","id","labelProperty","name",3,"ngModelChange","ngModel","initialValue","options","canClearSelection","label"]],template:function(o,r){o&1&&(s(0,"h3"),p(1,"Complete your profile"),c(),s(2,"small"),p(3,"All fields are optional! You can edit your profile at any time."),c(),s(4,"div",0),x(5,"div",1),c(),h(6,Gp,1,5,"ss-autocomplete",2),s(7,"ss-textarea",3),le("ngModelChange",function(m){return ce(r.model.bio,m)||(r.model.bio=m),m}),c(),s(8,"div",4)(9,"ss-button",5),C("buttonClick",function(){return r.goBack()}),p(10,"Back"),c(),s(11,"ss-button",6),C("buttonClick",function(){return r.anyInformationFilled()?r.completeStep():r.skipStep()}),p(12),c()()),o&2&&(l(6),_(r.areasOfStudy?6:-1),l(),g("placeholder",r.settingsService.isB2BApp()||r.settingsService.isCoWork()?"Share something your colleagues don't already know about you, a funny fact, or your morning routine, etc.":"Tell us about yourself and what brought you to "+r.settingsService.siteName),ae("ngModel",r.model.bio),g("rows",6)("maxlength",250),l(4),g("isLoading",r.stepLoading),l(),k(" ",r.anyInformationFilled()?"Next":"Skip"," "))},dependencies:[vo,H,po,We,Ca,He],styles:["[_nghost-%COMP%]{display:block;padding:24px;margin-bottom:24px;border:1px solid var(--alt);border-radius:16px}ss-autocomplete[_ngcontent-%COMP%]{margin-bottom:20px}.step-progress[_ngcontent-%COMP%]{width:100%;height:4px;margin:16px 0;background:var(--accent-blue-90)}.step-progress[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{width:50%;height:4px;background:var(--accent-gradient)}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}ss-button[_ngcontent-%COMP%]:first-child{margin-right:10px}ss-button[_ngcontent-%COMP%]     button{width:auto;margin-left:auto}"]});let e=i;return e})();function Kp(e,i){e&1&&x(0,"div")}function Yp(e,i){if(e&1&&x(0,"ss-interests-picker",3),e&2){let n=d();g("fullWidth",!0)("selectedInterests",n.model.interests)("popularInterests",n.popularInterests)}}var Rr=(()=>{let i=class i{constructor(t,o,r){this.accountService=t,this.interestService=o,this.toastService=r,this.model={},this.popularInterests=[],this.stepLoading=!1,this.interestsLoading=!0}ngOnInit(){this.interestService.getPopular().subscribe({next:t=>{this.accountService.getMyInterests().subscribe({next:o=>{this.model.interests=o,this.popularInterests=t},error:o=>this.handleErrors(o)})},error:t=>this.handleErrors(t)})}goBack(){this.accountService.activeProfileStep--}completeStep(){this.stepLoading=!0,this.accountService.completeProfileSetupStep3(this.model).subscribe({next:()=>{this.stepLoading=!1,this.model.overrideCanDeactivate=!0,this.accountService.activeProfileStep++},error:t=>this.handleErrors(t)})}skipStep(){this.model.interests=[],this.completeStep()}anyInformationFilled(){return this.model.interests&&this.model.interests.length>0}handleErrors(t){this.stepLoading=!1,this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(T),u(oc),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-profile-step-3"]],standalone:!1,decls:13,vars:6,consts:[[1,"step-progress"],[1,"fill"],[4,"ssSkeletonLoader","ssSkeletonLoaderHeight","ssSkeletonLoaderWidth"],[3,"fullWidth","selectedInterests","popularInterests"],[1,"button-wrapper"],["color","tertiary",3,"buttonClick"],[3,"buttonClick","isLoading"]],template:function(o,r){o&1&&(s(0,"h3"),p(1,"Complete your profile"),c(),s(2,"small"),p(3,"All fields are optional! You can edit your profile at any time."),c(),s(4,"div",0),x(5,"div",1),c(),Be(6,Kp,1,0,"div",2),h(7,Yp,1,3,"ss-interests-picker",3),s(8,"div",4)(9,"ss-button",5),C("buttonClick",function(){return r.goBack()}),p(10,"Back"),c(),s(11,"ss-button",6),C("buttonClick",function(){return r.anyInformationFilled()?r.completeStep():r.skipStep()}),p(12),c()()),o&2&&(l(6),g("ssSkeletonLoader",r.popularInterests.length===0)("ssSkeletonLoaderHeight","490px")("ssSkeletonLoaderWidth","100%"),l(),_(r.popularInterests?7:-1),l(4),g("isLoading",r.stepLoading),l(),k(" ",r.anyInformationFilled()?"Next":"Skip"," "))},dependencies:[rc,H,en],styles:["[_nghost-%COMP%]{display:block;padding:24px;margin-bottom:24px;border:1px solid var(--alt);border-radius:16px}ss-autocomplete[_ngcontent-%COMP%]{margin-bottom:20px}.step-progress[_ngcontent-%COMP%]{width:100%;height:4px;margin:16px 0;background:var(--accent-blue-90)}.step-progress[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{width:75%;height:4px;background:var(--accent-gradient)}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}ss-interests-picker[_ngcontent-%COMP%]  .my-interests{margin-top:10px}ss-button[_ngcontent-%COMP%]:first-child{margin-right:10px}ss-button[_ngcontent-%COMP%]     button{width:auto;margin-left:auto}"]});let e=i;return e})();var Xp=["socialHandlesBlock"],Ar=(()=>{let i=class i{constructor(t,o,r,a){this.accountService=t,this.toastService=o,this.livekit=r,this.badgeService=a,this.model={socialHandles:[]},this.stepLoading=!1,this.socialHandlesNewFormHasValue=!1,this.subscriptions=[]}ngOnInit(){this.model.avatarFile=null,this.model.avatarThumbUrl=this.accountService.currentUser.avatarThumbUrl,this.model.avatarUrl=this.accountService.currentUser.avatarUrl,this.model.avatarFileOriginalName=this.accountService.currentUser.avatarFileOriginalName,this.accountService.getMySocialHandles().subscribe({next:t=>this.model.socialHandles=t,error:t=>this.handleErrors(t)})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}goBack(){this.accountService.activeProfileStep--}onAvatarFileChange(t){this.model.avatarFile=t}onSocialHandlesNewFormHasValueChange(t){this.socialHandlesNewFormHasValue=t}completeStep(){this.socialHandlesBlock.addHandle(),this.stepLoading=!0,this.accountService.completeProfileSetupStep4(this.model).subscribe({next:()=>{this.stepLoading=!1,this.model.overrideCanDeactivate=!0,this.accountService.activeProfileStep++,this.livekit.room&&(this.livekit.room.milestones.completedProfileSetup||this.subscriptions.push(Je(2e3).subscribe(()=>this.badgeService.checkForNewBadges.next())),this.livekit.room.milestones.completedProfileSetup=!0),this.toastService.success({message:"You have successfully completed your profile setup."})},error:t=>this.handleErrors(t)})}skipStep(){this.model.avatarFile=null,this.model.socialHandles=[],this.completeStep()}anyInformationFilled(){return this.model.avatarFile||this.model.avatarThumbUrl||this.model.socialHandles.filter(t=>t.handle).length>0||this.socialHandlesNewFormHasValue}handleErrors(t){this.stepLoading=!1,this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(T),u(V),u(ut),u(co))},i.\u0275cmp=O({type:i,selectors:[["ss-profile-step-4"]],viewQuery:function(o,r){if(o&1&&It(Xp,5),o&2){let a;Rt(a=At())&&(r.socialHandlesBlock=a.first)}},standalone:!1,decls:20,vars:4,consts:[["socialHandlesBlock",""],[1,"step-progress"],[1,"fill"],[1,"field"],[1,"form-label"],[3,"fileChanged","avatarThumbUrl"],[3,"newFormHasValueChange","userSocialHandles"],[1,"button-wrapper"],["color","tertiary",3,"buttonClick"],[3,"buttonClick","isLoading"]],template:function(o,r){if(o&1){let a=w();s(0,"h3"),p(1,"Complete your profile"),c(),s(2,"small"),p(3,"All fields are optional! You can edit your profile at any time."),c(),s(4,"div",1),x(5,"div",2),c(),s(6,"div",3)(7,"label",4),p(8,"Upload a profile picture"),c(),s(9,"ss-avatar-file-upload",5),C("fileChanged",function(f){return v(a),b(r.onAvatarFileChange(f))}),c()(),s(10,"div",3)(11,"label",4),p(12,"Display your socials"),c(),s(13,"ss-social-handles",6,0),C("newFormHasValueChange",function(f){return v(a),b(r.onSocialHandlesNewFormHasValueChange(f))}),c()(),s(15,"div",7)(16,"ss-button",8),C("buttonClick",function(){return v(a),b(r.goBack())}),p(17,"Back"),c(),s(18,"ss-button",9),C("buttonClick",function(){return v(a),b(r.anyInformationFilled()?r.completeStep():r.skipStep())}),p(19),c()()}o&2&&(l(9),g("avatarThumbUrl",r.model.avatarThumbUrl),l(4),g("userSocialHandles",r.model.socialHandles),l(5),g("isLoading",r.stepLoading),l(),k(" ",r.anyInformationFilled()?"Done":"Skip"," "))},dependencies:[nc,sc,H],styles:["[_nghost-%COMP%]{display:block;padding:24px;margin-bottom:24px;border:1px solid var(--alt);border-radius:16px}ss-autocomplete[_ngcontent-%COMP%]{margin-bottom:20px}.step-progress[_ngcontent-%COMP%]{width:100%;height:4px;margin:16px 0;background:var(--accent-blue-90)}.step-progress[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{width:100%;height:4px;background:var(--accent-gradient)}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}ss-interests-picker[_ngcontent-%COMP%]  .my-interests{margin-top:10px}ss-button[_ngcontent-%COMP%]:first-child{margin-right:10px}ss-button[_ngcontent-%COMP%]     button{width:auto;margin-left:auto}.step-content[_ngcontent-%COMP%]{padding-bottom:59px}.field[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.field-title.socials[_ngcontent-%COMP%]{margin-bottom:24px}.form-label[_ngcontent-%COMP%]{margin:8px 0 18px}ss-avatar-file-upload[_ngcontent-%COMP%] {width:96px;height:96px}ss-avatar-file-upload[_ngcontent-%COMP%]  ss-icon{font-size:30px!important}.social-wrapper[_ngcontent-%COMP%], .social-input[_ngcontent-%COMP%]{display:flex}.social-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-right:31px}i[_ngcontent-%COMP%]{display:block;width:40px;height:40px;margin-right:9px}i.instagram[_ngcontent-%COMP%]{background-image:url(/assets/images/instagram-logo.svg)}i.tiktok[_ngcontent-%COMP%]{background-image:url(/assets/images/tiktok-logo.svg)}.social-input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}ss-input[_ngcontent-%COMP%]  small.additional-info{text-align:right;margin-top:4px}"]});let e=i;return e})();var Gc=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=pi({type:i}),i.\u0275inj=di({imports:[Tn,xo,fo,Zi,mo,$n,Qn,In,Gn,Vn,va,Xn,Jn,Yn,Un.forChild({loader:Nn({prefix:"./assets/i18n/",suffix:".json"})})]});let e=i;return e})();function em(e,i){e&1&&x(0,"ss-account-email-verification")}function tm(e,i){e&1&&x(0,"ss-account-phone-verification")}function im(e,i){e&1&&x(0,"ss-basic-info")}function nm(e,i){e&1&&x(0,"ss-profile-step-1")}function om(e,i){e&1&&x(0,"ss-profile-step-2")}function rm(e,i){e&1&&x(0,"ss-profile-step-3")}function sm(e,i){e&1&&x(0,"ss-profile-step-4")}function am(e,i){if(e&1&&(s(0,"div",0),h(1,nm,1,0,"ss-profile-step-1"),h(2,om,1,0,"ss-profile-step-2"),h(3,rm,1,0,"ss-profile-step-3"),h(4,sm,1,0,"ss-profile-step-4"),c()),e&2){let n=d();l(),_(n.accountService.activeProfileStep===1?1:-1),l(),_(n.accountService.activeProfileStep===2?2:-1),l(),_(n.accountService.activeProfileStep===3?3:-1),l(),_(n.accountService.activeProfileStep===4?4:-1)}}var qc=(()=>{let i=class i{constructor(t){this.accountService=t}};i.\u0275fac=function(o){return new(o||i)(u(T))},i.\u0275cmp=O({type:i,selectors:[["ss-account-profile-steps"]],standalone:!1,decls:4,vars:1,consts:[[1,"steps-holder"]],template:function(o,r){o&1&&h(0,em,1,0,"ss-account-email-verification")(1,tm,1,0,"ss-account-phone-verification")(2,im,1,0,"ss-basic-info")(3,am,5,4,"div",0),o&2&&_(r.accountService.currentUser.emailConfirmed?r.accountService.isCurrentUserPhoneVerified()?r.accountService.currentUser.completedBasicInfo?r.accountService.currentUser.lastCompletedUserProfileStep<4?3:-1:2:1:0)},dependencies:[Er,Ir,Rr,Ar,Ec,Ic,Rc],styles:[".steps-holder[_ngcontent-%COMP%]:empty{height:440px;margin-bottom:24px;border-radius:16px;background:var(--skeleton-background) no-repeat;animation:_ngcontent-%COMP%_pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;animation-delay:.5s}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.5}to{opacity:1}}"]});let e=i;return e})();var Kc=(()=>{let i=class i{constructor(){this.isMobile=!1,this.isSmallAdBreakpoint=!1}ngAfterViewInit(){let t=window.fusetag;t&&t.registerZone&&t.registerZone(this.id)}ngOnDestroy(){let t=window.fusetag;t&&t.destroyZone&&t.destroyZone(this.id)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=O({type:i,selectors:[["ss-ad-wrapper"]],inputs:{id:"id",fuseId:"fuseId"},standalone:!1,decls:1,vars:2,template:function(o,r){o&1&&x(0,"div"),o&2&&lt("id",r.id)("data-fuse",r.fuseId)},styles:["[_nghost-%COMP%]{display:block}.large[_nghost-%COMP%]{width:468px;height:60px}.small[_nghost-%COMP%]{width:320px;height:50px}div[_ngcontent-%COMP%]{width:100%;height:100%}"]});let e=i;return e})();function dm(e,i){e&1&&x(0,"ss-ad-wrapper",0)}function pm(e,i){e&1&&x(0,"ss-ad-wrapper",1)}function mm(e,i){e&1&&x(0,"ss-ad-wrapper",2)}var Yc=(()=>{let i=class i{constructor(t){this.utilityService=t,this.adBlockerActive=!1,this.adBlockerDetected=new Le,this.isMobile=!1,this.isSmallAdBreakpoint=!1,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.utilityService.isMobile.subscribe(t=>this.isMobile=t),this.utilityService.isSmallAdBreakpoint.subscribe(t=>this.isSmallAdBreakpoint=t))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};i.\u0275fac=function(o){return new(o||i)(u(Me))},i.\u0275cmp=O({type:i,selectors:[["ss-ads-wrapper"]],hostVars:2,hostBindings:function(o,r){o&2&&I("ad-blocker-active",r.adBlockerActive)},outputs:{adBlockerDetected:"adBlockerDetected"},standalone:!1,decls:3,vars:3,consts:[["id","studystream_footer_1","fuseId","23041220963",1,"large"],["id","studystream_footer_2","fuseId","23040416613",1,"large"],["id","studystream_footer_3","fuseId","23064012465",1,"small"]],template:function(o,r){o&1&&(h(0,dm,1,0,"ss-ad-wrapper",0),h(1,pm,1,0,"ss-ad-wrapper",1),h(2,mm,1,0,"ss-ad-wrapper",2)),o&2&&(_(r.isSmallAdBreakpoint?-1:0),l(),_(r.isMobile?-1:1),l(),_(r.isSmallAdBreakpoint?2:-1))},dependencies:[Kc],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:90px}@media only screen and (max-width: 767px){[_nghost-%COMP%]{height:60px}}@media only screen and (max-width: 539px){[_nghost-%COMP%]{height:50px}}.ad-blocker-active[_nghost-%COMP%]{width:auto}ss-ad-wrapper[_ngcontent-%COMP%]:first-of-type{margin-right:16px}"]});let e=i;return e})();var gm=(e,i)=>i.id;function fm(e,i){e&1&&x(0,"mat-spinner",6)}function hm(e,i){e&1&&(s(0,"div",9),p(1,"Room is currently empty"),c())}function _m(e,i){if(e&1){let n=w();s(0,"div",11)(1,"div",12),C("click",function(){let o=v(n).$implicit,r=d(3);return b(r.togglePopup(o.id))}),x(2,"ss-user-avatar",13),s(3,"span",14),p(4),c()()()}if(e&2){let n=i.$implicit,t=d(3);l(2),g("size",50)("title",n.displayName)("initials",n.initials)("avatarColor",n.avatarColor)("avatarThumbUrl",n.avatarThumbUrl)("userId",n.id)("showOnlineStatus",!1),l(2),dt("",n.displayName,"",n.id===t.accountService.currentUser.id?" (me)":"")}}function Cm(e,i){if(e&1&&(s(0,"div",10),q(1,_m,5,9,"div",11,gm),c()),e&2){let n=d(2);l(),K(n.participants)}}function vm(e,i){if(e&1&&h(0,hm,2,0,"div",9)(1,Cm,3,0,"div",10),e&2){let n=d();_(n.participants.length===0?0:1)}}function bm(e,i){if(e&1){let n=w();s(0,"ss-user-popup",16),C("closePopup",function(){v(n);let o=d(2);return b(o.togglePopup())}),c()}if(e&2){let n=d(2);g("userId",n.userPopupId)}}function xm(e,i){if(e&1&&h(0,bm,1,1,"ss-user-popup",15),e&2){let n=d();_(n.userPopupId?0:-1)}}var Xc=(()=>{let i=class i{constructor(t,o,r,a,m){this.data=t,this.accountService=o,this.livekitService=r,this.dialogRef=a,this.toastService=m,this.participants=[],this.roomTypeClass=null,this.userPopupId=null,this.popupOpened=!1,this.loading=!1}handleKeyboardEvent(t){t.key==="Escape"&&this.onClose()}ngOnInit(){this.loading=!0,this.setRoomTypeClass(),this.livekitService.getTopParticipants(this.data.roomName,this.data.participantCount).subscribe({next:t=>{this.loading=!1,this.participants=t},error:t=>this.handleErrors(t)}),this.dialogRef.backdropClick().subscribe(()=>this.onClose())}togglePopup(t=null,o=null){o&&o.stopPropagation(),this.userPopupId=t,this.popupOpened=!this.popupOpened}onClose(){this.dialogRef.close()}setRoomTypeClass(){this.data.participantCount===1||this.data.participantCount===null?this.roomTypeClass="solo-office":this.data.participantCount<=4?this.roomTypeClass="office":this.data.participantCount<=12?this.roomTypeClass="team-office":this.roomTypeClass="conference-room"}handleErrors(t){this.loading=!1,this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(fi),u(T),u(ut),u(Rn),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-b2b-participants-modal"]],hostBindings:function(o,r){o&1&&C("keydown",function(m){return r.handleKeyboardEvent(m)})},standalone:!1,decls:15,vars:12,consts:[["trigger","cdkOverlayOrigin"],["cdkOverlayOrigin","",1,"mat-header"],["mat-dialog-title",""],[1,"close-modal",3,"click"],["iconName","dismiss","color","default-20",3,"size","iconVariant"],[1,"room-image"],["diameter","30","strokeWidth","3"],["color","tertiary",3,"click"],["cdkConnectedOverlay","","cdkConnectedOverlayBackdropClass","transparent",3,"backdropClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayDisableClose"],[1,"empty-room-info"],[1,"users"],[1,"user-wrapper"],[1,"user",3,"click"],[3,"size","title","initials","avatarColor","avatarThumbUrl","userId","showOnlineStatus"],[1,"interactable"],["cssClass","margin-horizontal",3,"userId"],["cssClass","margin-horizontal",3,"closePopup","userId"]],template:function(o,r){if(o&1){let a=w();s(0,"div",1,0)(2,"h2",2),p(3),Y(4,"roomName"),c(),s(5,"button",3),C("click",function(){return v(a),b(r.onClose())}),x(6,"ss-icon",4),c()(),s(7,"mat-dialog-content"),x(8,"div",5),h(9,fm,1,0,"mat-spinner",6)(10,vm,2,1),c(),s(11,"mat-dialog-actions")(12,"ss-button",7),C("click",function(){return v(a),b(r.onClose())}),p(13," Close "),c()(),Be(14,xm,1,1,"ng-template",8),C("backdropClick",function(f){return v(a),b(r.togglePopup(null,f))})}if(o&2){let a=Fe(1);l(3),z(me(4,10,r.data.roomName)),l(3),g("size",20)("iconVariant",20),l(),ze(r.roomTypeClass),l(2),_(r.loading?9:10),l(5),g("cdkConnectedOverlayOrigin",a)("cdkConnectedOverlayOpen",r.popupOpened)("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayDisableClose",!0)}},dependencies:[H,j,Si,yi,hi,Dn,Vt,gi,ui,Nt,gc],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex}mat-dialog-content.conference-room[_ngcontent-%COMP%]   .room-image[_ngcontent-%COMP%]{width:228px;height:126px;background-image:url(/assets/images/office-images/conference-small/conference-small-37.png)}mat-dialog-content.conference-room[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]{display:block;justify-content:center;flex-wrap:nowrap;width:100%}mat-dialog-content.conference-room[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{display:block;justify-content:flex-start;align-items:center;width:100%;padding:6px 0;border-bottom:1px solid var(--alt-40)}mat-dialog-content.conference-room[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{flex-direction:row}mat-dialog-content.conference-room[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   ss-user-avatar[_ngcontent-%COMP%]{margin-right:4px}mat-dialog-content.conference-room[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   ss-user-avatar[_ngcontent-%COMP%]     .user-avatar-wrapper{width:32px!important;min-height:32px!important;height:32px!important}mat-dialog-content.conference-room[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .interactable[_ngcontent-%COMP%]{max-width:initial}mat-dialog-content.team-office[_ngcontent-%COMP%]   .room-image[_ngcontent-%COMP%]{width:228px;height:126px;background-image:url(/assets/images/office-images/medium/medium-12.png)}mat-dialog-content.office[_ngcontent-%COMP%]   .room-image[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/small/small-6.png)}mat-dialog-content.solo-office[_ngcontent-%COMP%]   .room-image[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/single.png)}mat-spinner[_ngcontent-%COMP%], .empty-room-info[_ngcontent-%COMP%]{margin:0 auto}.room-image[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:114px;height:114px;border:6px solid #4a4546;background-color:#ecefd7;background-size:contain;background-repeat:no-repeat}.users[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-wrap:wrap;width:98px;margin-left:12px;flex:1;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){.users[_ngcontent-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}.users[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}.users[_ngcontent-%COMP%]::-webkit-scrollbar, .users[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}.users[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.users[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:98px;padding:0 0 6px}.users[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]:last-child{border-bottom:none}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   ss-user-avatar[_ngcontent-%COMP%]{cursor:pointer}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .interactable[_ngcontent-%COMP%]{max-width:98px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});let e=i;return e})();var ym=(e,i)=>i.id;function wm(e,i){if(e&1&&x(0,"ss-icon",7),e&2){let n=d();g("matTooltip",n.room.roomDescription)("size",18)}}function Pm(e,i){if(e&1&&x(0,"ss-icon",9),e&2){d();let n=Fe(11);g("size",18)("matMenuTriggerFor",n)}}function Mm(e,i){if(e&1){let n=w();s(0,"button",11),C("click",function(){v(n);let o=d();return b(o.updateRoom.emit())}),x(1,"ss-icon",14),p(2," Update room "),c(),s(3,"button",11),C("click",function(){v(n);let o=d();return b(o.deactivateRoom.emit())}),x(4,"ss-icon",15),p(5," Deactivate room "),c()}e&2&&(l(),g("size",16),l(3),g("size",16))}function Om(e,i){if(e&1){let n=w();s(0,"ss-user-avatar",20),C("click",function(o){let r=v(n).$implicit,a=d(2);return b(a.openPopup(r,o))}),c()}if(e&2){let n=i.$implicit;g("avatarColor",n.avatarColor)("avatarThumbUrl",n.avatarThumbUrl)("initials",n.initials)("userId",n.id)("showOnlineStatus",!1)("size",32)}}function km(e,i){if(e&1){let n=w();s(0,"div",21),C("click",function(){v(n);let o=d(2);return b(o.openSessionDetails())}),p(1),c()}if(e&2){let n=d(2);l(),k(" +",n.room.currentParticipants-n.numberOfPreviewAvatars," ")}}function Tm(e,i){if(e&1){let n=w();s(0,"ss-user-popup",23),C("closePopup",function(){v(n);let o=d(3);return b(o.closePopup())}),c()}if(e&2){let n=d(3);g("userId",n.userPopupId)}}function Em(e,i){if(e&1&&h(0,Tm,1,1,"ss-user-popup",22),e&2){let n=d(2);_(n.userPopupId?0:-1)}}function Im(e,i){if(e&1){let n=w();s(0,"div",13,1)(2,"div",16),q(3,Om,1,6,"ss-user-avatar",17,ym),c(),h(5,km,2,1,"div",18),Be(6,Em,1,1,"ng-template",19),C("backdropClick",function(){v(n);let o=d();return b(o.closePopup())}),c()}if(e&2){let n=Fe(1),t=d();g("hidden",(t.room.topParticipants==null?null:t.room.topParticipants.length)===0),l(3),K(t.room.topParticipants),l(2),_(t.room.currentParticipants>t.numberOfPreviewAvatars?5:-1),l(),g("cdkConnectedOverlayOrigin",n)("cdkConnectedOverlayOpen",t.userPopupOpened)("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayDisableClose",!0)}}var Zc=(()=>{let i=class i{get isFullRoom(){return this.room.maxNumberOfUsers!==null&&this.room.maxNumberOfUsers>0&&this.room.currentParticipants>=this.room.maxNumberOfUsers}get allowRoomManagement(){return this.settingsService.isB2BApp()&&this.accountService.isFullyVerifiedUser()&&(this.accountService.isInRole(mt.RoomManager)||this.accountService.isInRole(mt.Moderator)||this.accountService.isInRole(mt.Administrator))}constructor(t,o,r,a){this.settingsService=t,this.accountService=o,this.dialog=r,this.router=a,this.isMobile=!1,this.updateRoom=new Le,this.deactivateRoom=new Le,this.roomTypeClass=null,this.numberOfPreviewAvatars=4,this.userPopupId=null,this.UserDescriptionFieldRef=Ga,this.ActivitySourceRef=W,this.AudioStatusRef=za}ngOnInit(){this.currentUser=this.accountService.currentUser,this.configureRoom()}joinFocusRoom(){this.isFullRoom||!this.room.joinable||this.router.navigate([],{queryParams:{roomUrl:this.room.roomUrl},queryParamsHandling:"merge"})}openSessionDetails(){this.dialog.open(Xc,{panelClass:"fullscreen-dialog",width:"600px",data:{participantCount:this.room.maxNumberOfUsers,roomName:this.room.roomName}})}openPopup(t,o){o.stopPropagation(),this.userPopupOpened=!0,this.userPopupId=t.id}closePopup(){this.userPopupOpened=!1,this.userPopupId=null}configureRoom(){let t=4;this.room.maxNumberOfUsers===1||this.room.maxNumberOfUsers===null?this.setRoomClass("solo-office"):this.room.maxNumberOfUsers>1&&this.room.maxNumberOfUsers<=6?this.setRoomClass("office"):this.room.maxNumberOfUsers>6&&this.room.maxNumberOfUsers<=12?(this.setRoomClass("team-office"),t=8):(this.setRoomClass("conference-room"),t=16),this.room.topParticipants&&this.room.topParticipants.slice(0,t)}setRoomClass(t){let o=this.room.maxNumberOfUsers<37?this.room.maxNumberOfUsers:37;this.roomTypeClass=`${t} seats-${o}`}};i.\u0275fac=function(o){return new(o||i)(u(ie),u(T),u(Ce),u(Z))},i.\u0275cmp=O({type:i,selectors:[["ss-b2b-room-box"]],inputs:{room:"room",isMobile:"isMobile"},outputs:{updateRoom:"updateRoom",deactivateRoom:"deactivateRoom"},standalone:!1,decls:17,vars:16,consts:[["menu","matMenu"],["trigger","cdkOverlayOrigin"],[1,"room-container"],[1,"room-cover",3,"click"],[1,"private-room-text"],[1,"room-menu"],[3,"matTooltip"],["iconName","question_circle","color","contrast",1,"desc-icon",3,"matTooltip","size"],["color","contrast",1,"mic-icon",3,"matTooltip","iconName","size"],["role","button","iconName","more_vertical","color","contrast",1,"more-icon",3,"size","matMenuTriggerFor"],[1,"sub-menu"],["mat-menu-item","",3,"click"],["matTooltip","Members","matTooltipPosition","above","role","button","iconName","people","color","contrast",3,"size"],["cdkOverlayOrigin","",1,"participants-list",3,"hidden"],["matTooltip","Edit","matTooltipPosition","above","role","button","iconName","edit","color","contrast",3,"size"],["matTooltip","Deactivate","matTooltipPosition","above","role","button","iconName","delete","color","contrast",3,"size"],[1,"participants-wrapper"],["role","button",3,"avatarColor","avatarThumbUrl","initials","userId","showOnlineStatus","size"],[1,"other-users"],["cdkConnectedOverlay","","cdkConnectedOverlayBackdropClass","transparent",3,"backdropClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayDisableClose"],["role","button",3,"click","avatarColor","avatarThumbUrl","initials","userId","showOnlineStatus","size"],[1,"other-users",3,"click"],["cssClass","margin-horizontal",3,"userId"],["cssClass","margin-horizontal",3,"closePopup","userId"]],template:function(o,r){if(o&1){let a=w();s(0,"div",2)(1,"div",3),C("click",function(){return v(a),b(r.joinFocusRoom())}),c(),s(2,"div",4),p(3,"Private room"),c(),s(4,"div",5)(5,"div",6),p(6),c(),h(7,wm,1,2,"ss-icon",7),x(8,"ss-icon",8),h(9,Pm,1,2,"ss-icon",9),s(10,"mat-menu",10,0)(12,"button",11),C("click",function(){return v(a),b(r.openSessionDetails())}),x(13,"ss-icon",12),p(14," Members list "),c(),h(15,Mm,6,2),c()(),h(16,Im,7,6,"div",13),c()}o&2&&(ze(r.roomTypeClass),I("full",r.isFullRoom)("not-joinable",!r.room.joinable),l(5),g("matTooltip",r.room.roomDisplayName),l(),z(r.room.roomDisplayName),l(),_(r.room.roomDescription?7:-1),l(),g("matTooltip",r.room.audioStatus===r.AudioStatusRef.FullRoomAudio?"Audio on":"Audio off")("iconName",r.room.audioStatus===r.AudioStatusRef.FullRoomAudio?"mic":"mic_off")("size",18),l(),_(r.accountService.isFullyVerifiedUser()?9:-1),l(4),g("size",16),l(2),_(r.allowRoomManagement?15:-1),l(),_(r.room.loadedParticipants&&r.currentUser.id?16:-1))},dependencies:[j,Si,yi,eo,Zn,to,gi,ui,$e],styles:["[_nghost-%COMP%]   ss-user-avatar-and-info[_ngcontent-%COMP%]     .user-info{display:flex;flex-direction:column;align-items:center}.room-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;transition:background-color .5s}.room-cover[_ngcontent-%COMP%]:hover{background-color:#0003;cursor:pointer}.room-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;border-top:10px solid var(--contrast);border-left:10px solid var(--contrast);background-color:#ecefd7}.room-container.full[_ngcontent-%COMP%]{background-color:#efdbd7}.room-container.full[_ngcontent-%COMP%]   .room-cover[_ngcontent-%COMP%]:hover{background-color:unset;cursor:initial}.room-container.solo-office[_ngcontent-%COMP%]{width:169px;height:169px;background-image:url(/assets/images/office-images/single.png);background-size:contain;background-repeat:no-repeat}.room-container.office[_ngcontent-%COMP%]{width:169px;height:169px;background-size:contain;background-repeat:no-repeat}.room-container.office.seats-2[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/small/small-2.png)}.room-container.office.seats-3[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/small/small-3.png)}.room-container.office.seats-4[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/small/small-4.png)}.room-container.office.seats-5[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/small/small-5.png)}.room-container.office.seats-6[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/small/small-6.png)}.room-container.team-office[_ngcontent-%COMP%]{width:338px;height:169px;background-size:contain;background-repeat:no-repeat}.room-container.team-office.seats-7[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/medium/medium-7.png)}.room-container.team-office.seats-8[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/medium/medium-8.png)}.room-container.team-office.seats-9[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/medium/medium-9.png)}.room-container.team-office.seats-10[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/medium/medium-10.png)}.room-container.team-office.seats-11[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/medium/medium-11.png)}.room-container.team-office.seats-12[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/medium/medium-12.png)}.room-container.conference-room[_ngcontent-%COMP%]{width:676px;height:348px;background-size:contain;background-repeat:no-repeat}.room-container.conference-room.seats-13[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-13.png)}.room-container.conference-room.seats-14[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-14.png)}.room-container.conference-room.seats-15[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-15.png)}.room-container.conference-room.seats-16[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-16.png)}.room-container.conference-room.seats-17[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-17.png)}.room-container.conference-room.seats-18[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-18.png)}.room-container.conference-room.seats-19[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-19.png)}.room-container.conference-room.seats-20[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-20.png)}.room-container.conference-room.seats-21[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-21.png)}.room-container.conference-room.seats-22[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-22.png)}.room-container.conference-room.seats-23[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-23.png)}.room-container.conference-room.seats-24[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-24.png)}.room-container.conference-room.seats-25[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-25.png)}.room-container.conference-room.seats-26[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-26.png)}.room-container.conference-room.seats-27[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-27.png)}.room-container.conference-room.seats-28[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-28.png)}.room-container.conference-room.seats-29[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-29.png)}.room-container.conference-room.seats-30[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-30.png)}.room-container.conference-room.seats-31[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-31.png)}.room-container.conference-room.seats-32[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-32.png)}.room-container.conference-room.seats-33[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-33.png)}.room-container.conference-room.seats-34[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-34.png)}.room-container.conference-room.seats-35[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-35.png)}.room-container.conference-room.seats-36[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-36.png)}.room-container.conference-room.seats-37[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-37.png)}.room-container.conference-room.seats-0[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference/conference-37.png)}@media only screen and (max-width: 1024px){.room-container.conference-room[_ngcontent-%COMP%]{width:338px;height:169px}.room-container.conference-room.seats-13[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-13.png)}.room-container.conference-room.seats-14[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-14.png)}.room-container.conference-room.seats-15[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-15.png)}.room-container.conference-room.seats-16[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-16.png)}.room-container.conference-room.seats-17[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-17.png)}.room-container.conference-room.seats-18[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-18.png)}.room-container.conference-room.seats-19[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-19.png)}.room-container.conference-room.seats-20[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-20.png)}.room-container.conference-room.seats-21[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-21.png)}.room-container.conference-room.seats-22[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-22.png)}.room-container.conference-room.seats-23[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-23.png)}.room-container.conference-room.seats-24[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-24.png)}.room-container.conference-room.seats-25[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-25.png)}.room-container.conference-room.seats-26[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-26.png)}.room-container.conference-room.seats-27[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-27.png)}.room-container.conference-room.seats-28[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-28.png)}.room-container.conference-room.seats-29[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-29.png)}.room-container.conference-room.seats-30[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-30.png)}.room-container.conference-room.seats-31[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-31.png)}.room-container.conference-room.seats-32[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-32.png)}.room-container.conference-room.seats-33[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-33.png)}.room-container.conference-room.seats-34[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-34.png)}.room-container.conference-room.seats-35[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-35.png)}.room-container.conference-room.seats-36[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-36.png)}.room-container.conference-room.seats-37[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-37.png)}.room-container.conference-room.seats-0[_ngcontent-%COMP%]{background-image:url(/assets/images/office-images/conference-small/conference-small-37.png)}}.room-container.not-joinable[_ngcontent-%COMP%]{background-image:none;background-color:#4a4546}.room-container.not-joinable[_ngcontent-%COMP%]   .room-cover[_ngcontent-%COMP%]:hover{background-color:unset;cursor:initial}.room-container.not-joinable[_ngcontent-%COMP%]   .private-room-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:block;width:150px;color:var(--contrast);transform:translate(-50%,-50%);text-align:center}.private-room-text[_ngcontent-%COMP%]{display:none}.room-menu[_ngcontent-%COMP%]{position:absolute;top:6px;left:6px;display:flex;justify-content:center;align-items:center;max-width:calc(100% - 12px);height:30px;padding:4px 10px;border-radius:16px;color:var(--contrast);background:var(--default)}.room-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{overflow:hidden;font-size:12px;font-weight:500;text-overflow:ellipsis;white-space:nowrap}.room-menu[_ngcontent-%COMP%]   .desc-icon[_ngcontent-%COMP%]{margin-left:4px}.room-menu[_ngcontent-%COMP%]   .mic-icon[_ngcontent-%COMP%]{margin:0 4px 0 6px}h2[_ngcontent-%COMP%]{margin-bottom:22px}.participants[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:40px;overflow:hidden;margin:0 0 6px 6px}@media only screen and (max-width: 1024px){.participants[_ngcontent-%COMP%]{height:32px}}.participants-list[_ngcontent-%COMP%]{position:absolute;bottom:0;display:flex;margin:0 0 6px 6px}.participants-list[_ngcontent-%COMP%]   .participants-wrapper[_ngcontent-%COMP%]{position:relative;left:8px;display:flex;flex-direction:row-reverse;justify-content:flex-end}.participants-list[_ngcontent-%COMP%]   ss-user-avatar[_ngcontent-%COMP%]{position:relative;z-index:1;margin-left:-8px;cursor:pointer}.participants-list[_ngcontent-%COMP%]   ss-user-avatar[_ngcontent-%COMP%]:hover{z-index:2}.participants-list[_ngcontent-%COMP%]   ss-user-avatar[_ngcontent-%COMP%]     .user-avatar-wrapper{border:1px solid var(--contrast)}.participants-list[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:center;width:32px;height:32px;border:1px solid var(--contrast);border-radius:50%;font-size:12px;color:var(--contrast);background:var(--default);cursor:pointer}.participants-list[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]:hover{z-index:2;background:var(--default-40)}"]});let e=i;return e})();function Am(e,i){e&1&&p(0," Your unused days remaining in this month will remain for you to use in future (as a credit on Stripe). ")}function Dm(e,i){if(e&1){let n=w();s(0,"div"),p(1," Confirm by clicking the button below if you want to join your friend's ("),s(2,"a",2),C("click",function(){v(n);let o=d();return b(o.goToUserProfile())}),p(3),c(),p(4,") plan now and leave your current plan. "),h(5,Am,1,0),c(),s(6,"ss-button",3),C("buttonClick",function(){v(n);let o=d();return b(o.confirm())}),p(7," Confirm "),c()}if(e&2){let n=d();l(3),z(n.invitation.invitedByDisplayName),l(2),_(n.subscriptionSource===n.SubscriptionSourceRef.Stripe?5:-1),l(),g("isLoading",n.confirming)}}var el=(()=>{let i=class i{get hasActiveSubscription(){return this.subscriptionService.hasActiveSubscription}get subscriptionSource(){return this.accountService.currentUser.subscription?.source}constructor(t,o,r,a,m,f){this.loaderService=t,this.activatedRoute=o,this.subscriptionService=r,this.accountService=a,this.router=m,this.toastService=f,this.confirming=!1,this.SubscriptionSourceRef=oo,this.loaderService.stop()}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.subscriptionUserId=t.subscriptionUserId,this.subscriptionService.getSubscriptionInvitation(this.subscriptionUserId).subscribe({next:o=>this.invitation=o,error:o=>this.handleErrors(o)})})}goToUserProfile(){this.invitation.invitedByUserId&&window.open(`${de.appUrl}/profile/${this.invitation.invitedByUserId}`,"_blank")}confirm(){this.confirming=!0,this.subscriptionService.confirmSubscriptionInvitation(this.subscriptionUserId).subscribe({next:()=>{this.confirming=!1,this.toastService.success({message:"You have confirmed the subscription invitation."}),this.router.navigate(["/"])},error:t=>this.handleErrors(t)})}handleErrors(t){this.confirming=!1;let o=t[0];if(o.errorCode==="SubscriptionInvitationInvalid"){this.toastService.info({exceptionDetail:o}),this.router.navigate(["/"]);return}this.toastService.error({exceptionDetail:o})}};i.\u0275fac=function(o){return new(o||i)(u(Oe),u(je),u(Bt),u(T),u(Z),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-confirm-subscription-invitation"]],standalone:!1,decls:4,vars:1,consts:[[1,"confirm-subscription-invitation-wrapper"],[1,"holder"],[3,"click"],[3,"buttonClick","isLoading"]],template:function(o,r){o&1&&(x(0,"ss-main-app-header"),s(1,"div",0)(2,"div",1),h(3,Dm,8,3),c()()),o&2&&(l(3),_(r.invitation!==void 0?3:-1))},dependencies:[jt,H],styles:[".confirm-subscription-invitation-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:calc(var(--vh) - 56px);overflow:auto;padding:20px;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){.confirm-subscription-invitation-wrapper[_ngcontent-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}.confirm-subscription-invitation-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}.confirm-subscription-invitation-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .confirm-subscription-invitation-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}.confirm-subscription-invitation-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}@media only screen and (max-width: 1024px){.confirm-subscription-invitation-wrapper[_ngcontent-%COMP%]{height:calc(var(--vh) - 112px)}}.holder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-width:95%;width:800px}.holder[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}ss-button[_ngcontent-%COMP%]{max-width:100px;margin-top:20px}"]});let e=i;return e})();var ye=function(e){return e.PomodoroTimer="PomodoroTimer",e.Vibes="Vibes",e}(ye||{});var tl=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=O({type:i,selectors:[["ss-important-notice-modal"]],standalone:!1,decls:11,vars:2,consts:[[1,"mat-header"],["mat-dialog-title",""],["mat-dialog-close","",1,"close-modal"],["iconName","dismiss","color","default-20",3,"size","iconVariant"],["mat-dialog-close",""]],template:function(o,r){o&1&&(s(0,"div",0)(1,"h2",1),p(2,"Important Notice"),c(),s(3,"button",2),x(4,"ss-icon",3),c()(),s(5,"mat-dialog-content")(6,"p"),p(7,"Important notice!"),c()(),s(8,"mat-dialog-actions")(9,"ss-button",4),p(10,"Ok"),c()()),o&2&&(l(4),g("size",20)("iconVariant",20))},dependencies:[H,j,An,hi,Dn,Vt],styles:["p[_ngcontent-%COMP%]{margin-bottom:15px}"]});let e=i;return e})();var Mi=(()=>{let i=class i{constructor(t,o){this.http=t,this.accountService=o,this.vibesWidgetUpdated=new yn(1),this.localWidgetsUpdated=new Yi,this.widgetsMinimized=new Yi,this.API_ENDPOINT=`${de.apiUrl}/user-widgets`}getAllWidgets(t){return(this.accountService.authenticated()?this.http.get(`${this.API_ENDPOINT}?isVimeoBanned=${t}`):Qi(this.getAllLocallyStoredWidgets())).pipe(Ji(r=>this.setInitialWidgetValues(r)))}updateWidgetsVisibility(t){return this.http.put(`${this.API_ENDPOINT}/visibility`,t)}updateWidgetPosition(t,o,r){let a;switch(o){case ye.PomodoroTimer:a=this.updatePomodoroTimerWidgetPosition(t);break;case ye.Vibes:a=this.updateVibesWidgetPosition(t);break;default:throw new Error(`Unknow type ${o}`)}a.subscribe({error:m=>r(m)})}getPomodoroTimerWidget(){return this.http.get(`${this.API_ENDPOINT}/pomodoro-timer`)}updatePomodoroTimerWidget(t){let o={pomodoroTimer:t.pomodoroTimer,shortBreak:t.shortBreak,longBreak:t.longBreak,activeStep:t.activeStep,value:t.value,preset:t.preset,focusSessions:t.focusSessions,loopPomodoro:t.loopPomodoro};return this.http.put(`${this.API_ENDPOINT}/pomodoro-timer`,o)}updatePomodoroTimerWidgetAndKeepAlive(t){let o={pomodoroTimer:t.pomodoroTimer,shortBreak:t.shortBreak,longBreak:t.longBreak,activeStep:t.activeStep,value:t.value,preset:t.preset,focusSessions:t.focusSessions,loopPomodoro:t.loopPomodoro};fetch(`${this.API_ENDPOINT}/pomodoro-timer`,{keepalive:!0,method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(zn)}`},body:JSON.stringify(o)})}getVibesWidget(){return this.http.get(`${this.API_ENDPOINT}/vibes`).pipe(js(t=>this.vibesWidgetUpdated.next(t)))}updateVibesWidget(t){let o={selectedVibeId:t.selectedVibe?.id,favouriteVibeIds:t.favourites.map(r=>r.id)};return this.http.put(`${this.API_ENDPOINT}/vibes`,o)}updateLocal(t){localStorage.setItem(jn,JSON.stringify(t))}updatePomodoroTimerWidgetPosition(t){return this.http.put(`${this.API_ENDPOINT}/pomodoro-timer/position`,this.getWidgetPositionOnly(t))}updateVibesWidgetPosition(t){return this.http.put(`${this.API_ENDPOINT}/vibes/position`,this.getWidgetPositionOnly(t))}getAllLocallyStoredWidgets(){let t=localStorage.getItem(jn);return t?.startsWith("[")&&(localStorage.removeItem(jn),t=""),JSON.parse(t||"{}")}setInitialWidgetValues(t){let o=this.getAllLocallyStoredWidgets();return t.pomodoroTimerWidget||(t=o),t.vibesWidget||(t.vibesWidget={offsetTop:-1,offsetLeft:-1,minimized:!1,visible:!0,selectedVibe:void 0,favourites:[]}),this.vibesWidgetUpdated.next(t.vibesWidget),t.pomodoroTimerWidget||(t.pomodoroTimerWidget={offsetTop:-1,offsetLeft:-1,minimized:!1,visible:!1,pomodoroTimer:1200,shortBreak:300,longBreak:600,activeStep:0,value:1200,preset:1,focusSessions:2,loopPomodoro:!1}),t}getWidgetPositionOnly(t){return{offsetTop:t.offsetTop,offsetLeft:t.offsetLeft,minimized:t.minimized,visible:t.visible}}};i.\u0275fac=function(o){return new(o||i)(X(mi),X(T))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var Q={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},qe=console,Wt={};Object.keys(Q).forEach(e=>{Wt[e]=qe[e]});var sn="Datadog Browser SDK:",N={debug:Wt.debug.bind(qe,sn),log:Wt.log.bind(qe,sn),info:Wt.info.bind(qe,sn),warn:Wt.warn.bind(qe,sn),error:Wt.error.bind(qe,sn)},an="https://docs.datadoghq.com",nl=`${an}/real_user_monitoring/browser/troubleshooting`,Oi="More details:";function wo(e,i){return(...n)=>{try{return e(...n)}catch(t){N.error(i,t)}}}function ki(e){return e!==0&&Math.random()*100<=e}function ol(e){return Vm(e)&&e>=0&&e<=100}function Vm(e){return typeof e=="number"}var nt=1e3,Ve=60*nt,Fr=60*Ve,Um=24*Fr,rl=365*Um;function ei(){return new Date().getTime()}function ve(){return ei()}function Ti(){return performance.now()}function re(){return{relative:Ti(),timeStamp:ve()}}function sl(){return{relative:0,timeStamp:ll()}}function Po(e,i){return i-e}function al(e,i){return e+i}function cl(e){return e-ll()}var Lr;function ll(){return Lr===void 0&&(Lr=performance.timing.navigationStart),Lr}var Nm=/[^\u0000-\u007F]/;function Mo(e){return Nm.test(e)?window.TextEncoder!==void 0?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function dl(e){return L({},e)}function Oo(e,i){return Object.keys(e).some(n=>e[n]===i)}function Ht(e){return Object.keys(e).length===0}function we(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let e=_dd_temp_;return delete Object.prototype._dd_temp_,typeof e!="object"&&(typeof self=="object"?e=self:typeof window=="object"?e=window:e={}),e}function $t(e,i){let n=we(),t;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(t=e[n.Zone.__symbol__(i)]),t||(t=e[i]),t}var ko,pl=!1;function ml(e){ko=e}function zr(e){pl=e}function jr(e,i,n){let t=n.value;n.value=function(...o){return(ko?F(t):t).apply(this,o)}}function F(e){return function(){return yt(e,this,arguments)}}function yt(e,i,n){try{return e.apply(i,n)}catch(t){Eo(t)}}function Eo(e){if(To(e),ko)try{ko(e)}catch(i){To(i)}}function To(...e){pl&&N.error("[MONITOR]",...e)}function ft(e,i){return $t(we(),"setTimeout")(F(e),i)}function Io(e){$t(we(),"clearTimeout")(e)}function Ei(e,i){return $t(we(),"setInterval")(F(e),i)}function Ii(e){$t(we(),"clearInterval")(e)}function Wr(e){let i=window.queueMicrotask;typeof i=="function"?i(F(e)):Promise.resolve().then(F(e))}var B=class{constructor(i){this.onFirstSubscribe=i,this.observers=[]}subscribe(i){return this.addObserver(i),{unsubscribe:()=>this.removeObserver(i)}}notify(i){this.observers.forEach(n=>n(i))}addObserver(i){this.observers.push(i),this.observers.length===1&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0)}removeObserver(i){this.observers=this.observers.filter(n=>i!==n),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}};function Ro(...e){return new B(i=>{let n=e.map(t=>t.subscribe(o=>i.notify(o)));return()=>n.forEach(t=>t.unsubscribe())})}var ti=class extends B{constructor(i){super(),this.maxBufferSize=i,this.buffer=[]}notify(i){this.buffer.push(i),this.buffer.length>this.maxBufferSize&&this.buffer.shift(),super.notify(i)}subscribe(i){let n=!1,t={unsubscribe:()=>{n=!0,this.removeObserver(i)}};return Wr(()=>{for(let o of this.buffer){if(n)return;i(o)}n||this.addObserver(i)}),t}unbuffer(){Wr(()=>{this.maxBufferSize=this.buffer.length=0})}};function ul(e,i,n){let t=n&&n.leading!==void 0?n.leading:!0,o=n&&n.trailing!==void 0?n.trailing:!0,r=!1,a,m;return{throttled:(...f)=>{if(r){a=f;return}t?e(...f):a=f,r=!0,m=ft(()=>{o&&a&&e(...a),r=!1,a=void 0},i)},cancel:()=>{Io(m),r=!1,a=void 0}}}function Ie(){}function Re(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):`10000000-1000-4000-8000-${1e11}`.replace(/[018]/g,Re)}var Ao=/([\w-]+)\s*=\s*([^;]+)/g;function gl(e,i){for(Ao.lastIndex=0;;){let n=Ao.exec(e);if(n){if(n[1]===i)return n[2]}else break}}function fl(e){let i=new Map;for(Ao.lastIndex=0;;){let n=Ao.exec(e);if(n)i.set(n[1],n[2]);else break}return i}function hl(e,i,n=""){let t=e.charCodeAt(i-1),r=t>=55296&&t<=56319?i+1:i;return e.length<=r?e:`${e.slice(0,r)}${n}`}function _l(){return Bm()===0}var Do;function Bm(){return Do??(Do=Lm())}function Lm(e=window){var i;let n=e.navigator.userAgent;return e.chrome||/HeadlessChrome/.test(n)?0:((i=e.navigator.vendor)===null||i===void 0?void 0:i.indexOf("Apple"))===0||/safari/i.test(n)&&!/chrome|android/i.test(n)?1:2}function cn(e,i,n=0,t){let o=new Date;o.setTime(o.getTime()+n);let r=`expires=${o.toUTCString()}`,a=t&&t.crossSite?"none":"strict",m=t&&t.domain?`;domain=${t.domain}`:"",f=t&&t.secure?";secure":"",S=t&&t.partitioned?";partitioned":"";document.cookie=`${e}=${i};${r};path=/;samesite=${a}${m}${f}${S}`}function Vo(e){return gl(document.cookie,e)}var Hr;function wt(e){return Hr||(Hr=fl(document.cookie)),Hr.get(e)}function Cl(e,i){cn(e,"",0,i)}function vl(e){if(document.cookie===void 0||document.cookie===null)return!1;try{let i=`dd_cookie_test_${Re()}`,n="test";cn(i,n,Ve,e);let t=Vo(i)===n;return Cl(i,e),t}catch(i){return N.error(i),!1}}var $r;function Uo(){if($r===void 0){let e=`dd_site_test_${Re()}`,i="test",n=window.location.hostname.split("."),t=n.pop();for(;n.length&&!Vo(e);)t=`${n.pop()}.${t}`,cn(e,i,nt,{domain:t});Cl(e,{domain:t}),$r=t}return $r}var Gt="_dd_s";function ii(e){return Object.values(e)}function bl(e){return Object.entries(e)}var Ri=4*Fr,No=15*Ve,xl=rl,Bo="0",qt={COOKIE:"cookie",LOCAL_STORAGE:"local-storage"};var Gr=/^([a-zA-Z]+)=([a-z0-9-]+)$/,Lo="&";function Sl(e){return!!e&&(e.indexOf(Lo)!==-1||Gr.test(e))}var Fm="1";function ht(e,i){let n={isExpired:Fm};return i.trackAnonymousUser&&(e?.anonymousId?n.anonymousId=e?.anonymousId:n.anonymousId=Re()),n}function ln(e){return Ht(e)}function Fo(e){return!ln(e)}function ni(e){return e.isExpired!==void 0||!zm(e)}function zm(e){return(e.created===void 0||ei()-Number(e.created)<Ri)&&(e.expire===void 0||ei()<Number(e.expire))}function zo(e){e.expire=String(ei()+No)}function jo(e){return bl(e).map(([i,n])=>i==="anonymousId"?`aid=${n}`:`${i}=${n}`).join(Lo)}function Wo(e){let i={};return Sl(e)&&e.split(Lo).forEach(n=>{let t=Gr.exec(n);if(t!==null){let[,o,r]=t;o==="aid"?i.anonymousId=r:i[o]=r}}),i}var jm="_dd",Wm="_dd_r",Hm="_dd_l",$m="rum",Gm="logs";function yl(e){if(!wt(Gt)){let n=wt(jm),t=wt(Wm),o=wt(Hm),r={};n&&(r.id=n),o&&/^[01]$/.test(o)&&(r[Gm]=o),t&&/^[012]$/.test(t)&&(r[$m]=t),Fo(r)&&(zo(r),e.persistSession(r))}}function qr(e){let i=qm(e);return vl(i)?{type:qt.COOKIE,cookieOptions:i}:void 0}function Pl(e,i){let n={isLockEnabled:_l(),persistSession:t=>wl(i,e,t,No),retrieveSession:Kr,expireSession:t=>wl(i,e,ht(t,e),Ri)};return yl(n),n}function wl(e,i,n,t){cn(Gt,jo(n),i.trackAnonymousUser?xl:t,e)}function Kr(){let e=Vo(Gt);return Wo(e)}function qm(e){let i={};return i.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie,i.crossSite=!!e.usePartitionedCrossSiteSessionCookie,i.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(i.domain=Uo()),i}var Km="_dd_test_";function Yr(){try{let e=Re(),i=`${Km}${e}`;localStorage.setItem(i,e);let n=localStorage.getItem(i);return localStorage.removeItem(i),e===n?{type:qt.LOCAL_STORAGE}:void 0}catch{return}}function Ml(e){return{isLockEnabled:!1,persistSession:Ol,retrieveSession:Ym,expireSession:i=>Qm(i,e)}}function Ol(e){localStorage.setItem(Gt,jo(e))}function Ym(){let e=localStorage.getItem(Gt);return Wo(e)}function Qm(e,i){Ol(ht(e,i))}function ot(e,i,n){if(typeof e!="object"||e===null)return JSON.stringify(e);let t=oi(Object.prototype),o=oi(Array.prototype),r=oi(Object.getPrototypeOf(e)),a=oi(e);try{return JSON.stringify(e,i,n)}catch{return"<error: unable to serialize object>"}finally{t(),o(),r(),a()}}function oi(e){let i=e,n=i.toJSON;return n?(delete i.toJSON,()=>{i.toJSON=n}):Ie}var Jm=220*1024,Xm="$",Zm=3;function Ae(e,i=Jm){let n=oi(Object.prototype),t=oi(Array.prototype),o=[],r=new WeakMap,a=Qr(e,Xm,void 0,o,r),m=JSON.stringify(a),f=m?m.length:0;if(f>i){Jr(i,"discarded",e);return}for(;o.length>0&&f<i;){let S=o.shift(),y=0;if(Array.isArray(S.source))for(let P=0;P<S.source.length;P++){let M=Qr(S.source[P],S.path,P,o,r);if(M!==void 0?f+=JSON.stringify(M).length:f+=4,f+=y,y=1,f>i){Jr(i,"truncated",e);break}S.target[P]=M}else for(let P in S.source)if(Object.prototype.hasOwnProperty.call(S.source,P)){let M=Qr(S.source[P],S.path,P,o,r);if(M!==void 0&&(f+=JSON.stringify(M).length+y+P.length+Zm,y=1),f>i){Jr(i,"truncated",e);break}S.target[P]=M}}return n(),t(),a}function Qr(e,i,n,t,o){let r=iu(e);if(!r||typeof r!="object")return eu(r);let a=Xr(r);if(a!=="[Object]"&&a!=="[Array]"&&a!=="[Error]")return a;let m=e;if(o.has(m))return`[Reference seen at ${o.get(m)}]`;let f=n!==void 0?`${i}.${n}`:i,S=Array.isArray(r)?[]:{};return o.set(m,f),t.push({source:r,target:S,path:f}),S}function eu(e){return typeof e=="bigint"?`[BigInt] ${e.toString()}`:typeof e=="function"?`[Function] ${e.name||"unknown"}`:typeof e=="symbol"?`[Symbol] ${e.description||e.toString()}`:e}function Xr(e){try{if(e instanceof Event)return tu(e);if(e instanceof RegExp)return`[RegExp] ${e.toString()}`;let n=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch{}return"[Unserializable]"}function tu(e){return{type:e.type,isTrusted:e.isTrusted,currentTarget:e.currentTarget?Xr(e.currentTarget):null,target:e.target?Xr(e.target):null}}function iu(e){let i=e;if(i&&typeof i.toJSON=="function")try{return i.toJSON()}catch{}return e}function Jr(e,i,n){N.warn(`The data provided has been ${i} as it is over the limit of ${e} characters:`,n)}var Ai="?";function Ke(e){var i,n;let t=[],o=Zr(e,"stack"),r=String(e);if(o&&o.startsWith(r)&&(o=o.slice(r.length)),o&&o.split(`
`).forEach(a=>{let m=ru(a)||au(a)||lu(a)||mu(a);m&&(!m.func&&m.line&&(m.func=Ai),t.push(m))}),t.length>0&&fu()&&e instanceof Error){let a=[],m=e;for(;(m=Object.getPrototypeOf(m))&&El(m);){let f=((i=m.constructor)===null||i===void 0?void 0:i.name)||Ai;a.push(f)}for(let f=a.length-1;f>=0&&((n=t[0])===null||n===void 0?void 0:n.func)===a[f];f--)t.shift()}return{message:Zr(e,"message"),name:Zr(e,"name"),stack:t}}var kl="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Di="(?::(\\d+))",nu=new RegExp(`^\\s*at (.*?) ?\\(${kl}${Di}?${Di}?\\)?\\s*$`,"i"),ou=new RegExp(`\\((\\S*)${Di}${Di}\\)`);function ru(e){let i=nu.exec(e);if(!i)return;let n=i[2]&&i[2].indexOf("native")===0,t=i[2]&&i[2].indexOf("eval")===0,o=ou.exec(i[2]);return t&&o&&(i[2]=o[1],i[3]=o[2],i[4]=o[3]),{args:n?[i[2]]:[],column:i[4]?+i[4]:void 0,func:i[1]||Ai,line:i[3]?+i[3]:void 0,url:n?void 0:i[2]}}var su=new RegExp(`^\\s*at ?${kl}${Di}?${Di}??\\s*$`,"i");function au(e){let i=su.exec(e);if(i)return{args:[],column:i[3]?+i[3]:void 0,func:Ai,line:i[2]?+i[2]:void 0,url:i[1]}}var cu=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function lu(e){let i=cu.exec(e);if(i)return{args:[],column:i[4]?+i[4]:void 0,func:i[1]||Ai,line:+i[3],url:i[2]}}var du=/^\s*(.*?)(?:\((.*?)\))?(?:(?:(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle|\[wasm code\])(?::(\d+))?(?::(\d+))?)|@)\s*$/i,pu=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function mu(e){let i=du.exec(e);if(!i)return;let n=i[3]&&i[3].indexOf(" > eval")>-1,t=pu.exec(i[3]);return n&&t&&(i[3]=t[1],i[4]=t[2],i[5]=void 0),{args:i[2]?i[2].split(","):[],column:i[5]?+i[5]:void 0,func:i[1]||Ai,line:i[4]?+i[4]:void 0,url:i[3]}}function Zr(e,i){if(typeof e!="object"||!e||!(i in e))return;let n=e[i];return typeof n=="string"?n:void 0}function Tl(e,i,n,t){if(i===void 0)return;let{name:o,message:r}=gu(e);return{name:o,message:r,stack:[{url:i,column:t,line:n}]}}var uu=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function gu(e){let i,n;return{}.toString.call(e)==="[object String]"&&([,i,n]=uu.exec(e)),{name:i,message:n}}function El(e){return String(e.constructor).startsWith("class ")}var Ho;function fu(){if(Ho!==void 0)return Ho;class e extends Error{constructor(){super(),this.name="Error"}}let[i,n]=[e,Error].map(t=>new t);return Ho=El(Object.getPrototypeOf(i))&&n.stack!==i.stack,Ho}function ri(e){let n=new Error(e);n.name="HandlingStack";let t;return yt(()=>{let o=Ke(n);o.stack=o.stack.slice(2),t=_t(o)}),t}function _t(e){let i=es(e);return e.stack.forEach(n=>{let t=n.func==="?"?"<anonymous>":n.func,o=n.args&&n.args.length>0?`(${n.args.join(", ")})`:"",r=n.line?`:${n.line}`:"",a=n.line&&n.column?`:${n.column}`:"";i+=`
  at ${t}${o} @ ${n.url}${r}${a}`}),i}function es(e){return`${e.name||"Error"}: ${e.message}`}var $o="No stack, consider using an instance of Error";function si({stackTrace:e,originalError:i,handlingStack:n,componentStack:t,startClocks:o,nonErrorPrefix:r,useFallbackStack:a=!0,source:m,handling:f}){let S=rt(i);return!e&&S&&(e=Ke(i)),{startClocks:o,source:m,handling:f,handlingStack:n,componentStack:t,originalError:i,type:e?e.name:void 0,message:hu(e,S,r,i),stack:e?_t(e):a?$o:void 0,causes:S?vu(i,m):void 0,fingerprint:_u(i),context:Cu(i)}}function hu(e,i,n,t){return e?.message&&e?.name?e.message:i?"Empty message":`${n} ${ot(Ae(t))}`}function _u(e){return rt(e)&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function Cu(e){if(e!==null&&typeof e=="object"&&"dd_context"in e)return e.dd_context}function ts(e){var i;return(i=/@ (.+)/.exec(e))===null||i===void 0?void 0:i[1]}function rt(e){return e instanceof Error||Object.prototype.toString.call(e)==="[object Error]"}function vu(e,i){let n=e,t=[];for(;rt(n?.cause)&&t.length<10;){let o=Ke(n.cause);t.push({message:n.cause.message,source:i,type:o?.name,stack:o&&_t(o)}),n=n.cause}return t.length?t:void 0}var is=function(e){return e.TRACK_INTAKE_REQUESTS="track_intake_requests",e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",e}(is||{}),Il=new Set;function ns(e){Array.isArray(e)&&Rl(e.filter(i=>Oo(is,i)))}function Rl(e){e.forEach(i=>{Il.add(i)})}function os(){return Il}var Al="datad0g.com",Dl="dd0g-gov.com",Kt="datadoghq.com";var Vl="ddog-gov.com",Ul="pci.browser-intake-datadoghq.com",Nl=["ddsource","dd-api-key","dd-request-id"];function pn(e,i){let n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:i})}function Go(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function qo(e,i,n=bu()){if(i===void 0)return e;if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof RegExp){let o=i.flags||[i.global?"g":"",i.ignoreCase?"i":"",i.multiline?"m":"",i.sticky?"y":"",i.unicode?"u":""].join("");return new RegExp(i.source,o)}if(n.hasAlreadyBeenSeen(i))return;if(Array.isArray(i)){let o=Array.isArray(e)?e:[];for(let r=0;r<i.length;++r)o[r]=qo(o[r],i[r],n);return o}let t=Go(e)==="object"?e:{};for(let o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=qo(t[o],i[o],n));return t}function Ko(e){return qo(void 0,e)}function Ue(...e){let i;for(let n of e)n!=null&&(i=qo(i,n));return i}function bu(){if(typeof WeakSet<"u"){let i=new WeakSet;return{hasAlreadyBeenSeen(n){let t=i.has(n);return t||i.add(n),t}}}let e=[];return{hasAlreadyBeenSeen(i){let n=e.indexOf(i)>=0;return n||e.push(i),n}}}function Bl(){var e;let i=window.navigator;return{status:i.onLine?"connected":"not_connected",interfaces:i.connection&&i.connection.type?[i.connection.type]:void 0,effective_type:(e=i.connection)===null||e===void 0?void 0:e.effectiveType}}function Yo(e){return e>=500}function Ll(e){try{return e.clone()}catch{return}}var $={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};var Su=80*1024,yu=32,Fl=3*1048576,wu=Ve,zl=nt;function rs(e,i,n,t,o,r){i.transportStatus===0&&i.queuedPayloads.size()===0&&i.bandwidthMonitor.canHandle(e)?Wl(e,i,n,r,{onSuccess:()=>Hl(0,i,n,t,o,r),onFailure:()=>{i.queuedPayloads.enqueue(e)||r.notify({type:"queue-full",bandwidth:i.bandwidthMonitor.stats(),payload:e}),jl(i,n,t,o,r)}}):i.queuedPayloads.enqueue(e)||r.notify({type:"queue-full",bandwidth:i.bandwidthMonitor.stats(),payload:e})}function jl(e,i,n,t,o){e.transportStatus===2&&ft(()=>{let r=e.queuedPayloads.first();Wl(r,e,i,o,{onSuccess:()=>{e.queuedPayloads.dequeue(),e.currentBackoffTime=zl,Hl(1,e,i,n,t,o)},onFailure:()=>{e.currentBackoffTime=Math.min(wu,e.currentBackoffTime*2),jl(e,i,n,t,o)}})},e.currentBackoffTime)}function Wl(e,i,n,t,{onSuccess:o,onFailure:r}){i.bandwidthMonitor.add(e),n(e,a=>{i.bandwidthMonitor.remove(e),Pu(a)?(i.transportStatus=i.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:a.status},t.notify({type:"failure",bandwidth:i.bandwidthMonitor.stats(),payload:e}),r()):(i.transportStatus=0,t.notify({type:"success",bandwidth:i.bandwidthMonitor.stats(),payload:e}),o())})}function Hl(e,i,n,t,o,r){e===0&&i.queuedPayloads.isFull()&&!i.queueFullReported&&(o({message:`Reached max ${t} events size queued for upload: ${Fl/1048576}MiB`,source:$.AGENT,startClocks:re()}),i.queueFullReported=!0);let a=i.queuedPayloads;for(i.queuedPayloads=Gl();a.size()>0;)rs(a.dequeue(),i,n,t,o,r)}function Pu(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||Yo(e.status))}function $l(){return{transportStatus:0,currentBackoffTime:zl,bandwidthMonitor:Mu(),queuedPayloads:Gl(),queueFullReported:!1}}function Gl(){let e=[];return{bytesCount:0,enqueue(i){return this.isFull()?!1:(e.push(i),this.bytesCount+=i.bytesCount,!0)},first(){return e[0]},dequeue(){let i=e.shift();return i&&(this.bytesCount-=i.bytesCount),i},size(){return e.length},isFull(){return this.bytesCount>=Fl}}}function Mu(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=Su&&this.ongoingRequestCount<yu},add(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount},stats(){return{ongoingByteCount:this.ongoingByteCount,ongoingRequestCount:this.ongoingRequestCount}}}}function as(e,i,n){let t=new B,o=$l(),r=(a,m)=>Tu(e,i,a,m);return{observable:t,send:a=>{rs(a,o,r,e.trackType,n,t)},sendOnExit:a=>{Ou(e,i,a)}}}function Ou(e,i,n){if(!!navigator.sendBeacon&&n.bytesCount<i)try{let o=e.build("beacon",n);if(navigator.sendBeacon(o,n.data))return}catch(o){ku(o)}ss(e,n)}var ql=!1;function ku(e){ql||(ql=!0,Eo(e))}function Tu(e,i,n,t){if(Eu()&&n.bytesCount<i){let r=e.build("fetch-keepalive",n);fetch(r,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(F(a=>t?.({status:a.status,type:a.type}))).catch(F(()=>ss(e,n,t)))}else ss(e,n,t)}function ss(e,i,n){let t=e.build("fetch",i);fetch(t,{method:"POST",body:i.data,mode:"cors"}).then(F(o=>n?.({status:o.status,type:o.type}))).catch(F(()=>n?.({status:0})))}function Eu(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function ai(){let e=Iu();if(e)return{getCapabilities(){var i;return JSON.parse(((i=e.getCapabilities)===null||i===void 0?void 0:i.call(e))||"[]")},getPrivacyLevel(){var i;return(i=e.getPrivacyLevel)===null||i===void 0?void 0:i.call(e)},getAllowedWebViewHosts(){return JSON.parse(e.getAllowedWebViewHosts())},send(i,n,t){let o=t?{id:t}:void 0;e.send(JSON.stringify({eventType:i,event:n,view:o}))}}}function Pt(e){var i;e===void 0&&(e=(i=we().location)===null||i===void 0?void 0:i.hostname);let n=ai();return!!n&&n.getAllowedWebViewHosts().some(t=>e===t||e.endsWith(`.${t}`))}function Iu(){return we().DatadogEventBridge}function st(e,i,n,t,o){return mn(e,i,[n],t,o)}function mn(e,i,n,t,{once:o,capture:r,passive:a}={}){let m=F(M=>{!M.isTrusted&&!M.__ddIsTrusted&&!e.allowUntrustedEvents||(o&&P(),t(M))}),f=a?{capture:r,passive:a}:r,S=window.EventTarget&&i instanceof EventTarget?window.EventTarget.prototype:i,y=$t(S,"addEventListener");n.forEach(M=>y.call(i,M,m,f));function P(){let M=$t(S,"removeEventListener");n.forEach(R=>M.call(i,R,m,f))}return{stop:P}}var un={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function cs(e){return new B(i=>{let{stop:n}=mn(e,window,["visibilitychange","freeze"],o=>{o.type==="visibilitychange"&&document.visibilityState==="hidden"?i.notify({reason:un.HIDDEN}):o.type==="freeze"&&i.notify({reason:un.FROZEN})},{capture:!0}),t=st(e,window,"beforeunload",()=>{i.notify({reason:un.UNLOADING})}).stop;return()=>{n(),t()}})}function ls(e){return ii(un).includes(e)}function Yl({encoder:e,request:i,flushController:n,messageBytesLimit:t}){let o={},r=n.flushObservable.subscribe(P=>y(P));function a(P,M,R){n.notifyBeforeAddMessage(M),R!==void 0?(o[R]=P,n.notifyAfterAddMessage()):e.write(e.isEmpty?P:`
${P}`,A=>{n.notifyAfterAddMessage(A-M)})}function m(P){return P!==void 0&&o[P]!==void 0}function f(P){let M=o[P];delete o[P];let R=e.estimateEncodedBytesCount(M);n.notifyAfterRemoveMessage(R)}function S(P,M){let R=ot(P),A=e.estimateEncodedBytesCount(R);if(A>=t){N.warn(`Discarded a message whose size was bigger than the maximum allowed size ${t}KB. ${Oi} ${nl}/#technical-limitations`);return}m(M)&&f(M),a(R,A,M)}function y(P){let M=ii(o).join(`
`);o={};let R=ls(P.reason),A=R?i.sendOnExit:i.send;if(R&&e.isAsync){let G=e.finishSync();G.outputBytesCount&&A(Kl(G));let se=[G.pendingData,M].filter(Boolean).join(`
`);se&&A({data:se,bytesCount:Mo(se)})}else M&&e.write(e.isEmpty?M:`
${M}`),e.finish(G=>{A(Kl(G))})}return{flushController:n,add:S,upsert:S,stop:r.unsubscribe}}function Kl(e){let i;return typeof e.output=="string"?i=e.output:i=new Blob([e.output],{type:"text/plain"}),{data:i,bytesCount:e.outputBytesCount,encoding:e.encoding}}function ds({messagesLimit:e,bytesLimit:i,durationLimit:n,pageMayExitObservable:t,sessionExpireObservable:o}){let r=t.subscribe(A=>y(A.reason)),a=o.subscribe(()=>y("session_expire")),m=new B(()=>()=>{r.unsubscribe(),a.unsubscribe()}),f=0,S=0;function y(A){if(S===0)return;let G=S,se=f;S=0,f=0,R(),m.notify({reason:A,messagesCount:G,bytesCount:se})}let P;function M(){P===void 0&&(P=ft(()=>{y("duration_limit")},n))}function R(){Io(P),P=void 0}return{flushObservable:m,get messagesCount(){return S},notifyBeforeAddMessage(A){f+A>=i&&y("bytes_limit"),S+=1,f+=A,M()},notifyAfterAddMessage(A=0){f+=A,S>=e?y("messages_limit"):f>=i&&y("bytes_limit")},notifyAfterRemoveMessage(A){f-=A,S-=1,S===0&&R()}}}function Vi(e,i,n,t,o,r,a=Yl){let m=S(e,i),f=n&&S(e,n);function S(y,{endpoint:P,encoder:M}){return a({encoder:M,request:as(P,y.batchBytesLimit,t),flushController:ds({messagesLimit:y.batchMessagesLimit,bytesLimit:y.batchBytesLimit,durationLimit:y.flushTimeout,pageMayExitObservable:o,sessionExpireObservable:r}),messageBytesLimit:y.messageBytesLimit})}return{flushObservable:m.flushController.flushObservable,add(y,P=!0){m.add(y),f&&P&&f.add(n.transformMessage?n.transformMessage(y):y)},upsert:(y,P)=>{m.upsert(y,P),f&&f.upsert(n.transformMessage?n.transformMessage(y):y,P)},stop:()=>{m.stop(),f&&f.stop()}}}var Ct="DISCARDED",Ye="SKIPPED";function Ql(){let e={};return{register(i,n){return e[i]||(e[i]=[]),e[i].push(n),{unregister:()=>{e[i]=e[i].filter(t=>t!==n)}}},triggerHook(i,n){let t=e[i]||[],o=[];for(let r of t){let a=r(n);if(a===Ct)return Ct;a!==Ye&&o.push(a)}return Ue(...o)}}}var vt={LOG:"log",CONFIGURATION:"configuration",USAGE:"usage"};var Au=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],Du=[Vl],ps;function Ui(){return ps||(ps=new ti(100)),ps}function Qo(e,i,n,t,o,r){let a=new B,{stop:m}=Uu(i,t,o,r,a),{enabled:f}=Vu(e,i,n,a);return{stop:m,enabled:f}}function Vu(e,i,n,t){let o={},r=!Du.includes(i.site)&&ki(i.telemetrySampleRate),a={[vt.LOG]:r,[vt.CONFIGURATION]:r&&ki(i.telemetryConfigurationSampleRate),[vt.USAGE]:r&&ki(i.telemetryUsageSampleRate)},m=Nu(),f=Ui();return f.subscribe(({rawEvent:y,kind:P})=>{if(!a[y.type])return;let M=o[P];if(M||(M=o[P]=new Set),M.size>=i.maxTelemetryEventsPerPage)return;let R=ot(y);if(M.has(R))return;let A=n.triggerHook(1,{startTime:re().relative});if(A===Ct)return;let G=S(A,e,y,m);t.notify(G),pn("telemetry",G),M.add(R)}),f.unbuffer(),ml(us),{enabled:r};function S(y,P,M,R){let G={type:"telemetry",date:re().timeStamp,service:P,version:"6.18.0",source:"browser",_dd:{format_version:2},telemetry:Ue(M,{runtime_env:R,connectivity:Bl(),sdk_setup:"npm"}),experimental_features:Array.from(os())};return Ue(G,y)}}function Uu(e,i,n,t,o){let r=[];if(Pt()){let a=ai(),m=o.subscribe(f=>a.send("internal_telemetry",f));r.push(()=>m.unsubscribe())}else{let a=Vi(e,{endpoint:e.rumEndpointBuilder,encoder:t(4)},e.replica&&{endpoint:e.replica.rumEndpointBuilder,encoder:t(5)},i,n,new B);r.push(()=>a.stop());let m=o.subscribe(f=>{a.add(f,ms(e))});r.push(()=>m.unsubscribe())}return{stop:()=>r.forEach(a=>a())}}function Nu(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function ms(e){return e.site===Al}function Qe(e,i){To(Q.debug,e,i),Ui().notify({rawEvent:L({type:vt.LOG,message:e,status:"debug"},i),kind:"debug"})}function us(e,i){Ui().notify({rawEvent:L(L({type:vt.LOG,status:"error"},Bu(e)),i),kind:"error"})}function Jo(e){Ui().notify({rawEvent:{type:vt.CONFIGURATION,configuration:e},kind:vt.CONFIGURATION})}function Ni(e){Ui().notify({rawEvent:{type:vt.USAGE,usage:e},kind:vt.USAGE})}function Bu(e){if(rt(e)){let i=Ke(e);return{error:{kind:i.name,stack:_t(Lu(i))},message:i.message}}return{error:{stack:$o},message:`Uncaught ${ot(e)}`}}function Lu(e){return e.stack=e.stack.filter(i=>!i.url||Au.some(n=>i.url.startsWith(n))),e}var ju=10,Wu=100,Hu=nt,Xl="--",Zl=[],Zo;function Yt(e,i,n=0){var t;let{isLockEnabled:o,persistSession:r,expireSession:a}=i,m=M=>r(ct(L({},M),{lock:S})),f=()=>{let A=i.retrieveSession(),{lock:M}=A;return{session:zs(A,["lock"]),lock:M&&!Gu(M)?M:void 0}};if(Zo||(Zo=e),e!==Zo){Zl.push(e);return}if(o&&n>=Wu){Qe("Aborted session operation after max lock retries",{currentStore:f()}),Jl(i);return}let S,y=f();if(o){if(y.lock){Xo(e,i,n);return}if(S=$u(),m(y.session),y=f(),y.lock!==S){Xo(e,i,n);return}}let P=e.process(y.session);if(o&&(y=f(),y.lock!==S)){Xo(e,i,n);return}if(P&&(ni(P)?a(P):(zo(P),o?m(P):r(P))),o&&!(P&&ni(P))){if(y=f(),y.lock!==S){Xo(e,i,n);return}r(y.session),P=y.session}(t=e.after)===null||t===void 0||t.call(e,P||y.session),Jl(i)}function Xo(e,i,n){ft(()=>{Yt(e,i,n+1)},ju)}function Jl(e){Zo=void 0;let i=Zl.shift();i&&Yt(i,e)}function $u(){return Re()+Xl+ve()}function Gu(e){let[,i]=e.split(Xl);return!i||Po(Number(i),ve())>Hu}var ed=nt;function td(e){switch(e.sessionPersistence){case qt.COOKIE:return qr(e);case qt.LOCAL_STORAGE:return Yr();case void 0:{let i=qr(e);return!i&&e.allowFallbackToLocalStorage&&(i=Yr()),i}default:N.error(`Invalid session persistence '${String(e.sessionPersistence)}'`)}}function qu(e,i){return e.type===qt.COOKIE?Pl(i,e.cookieOptions):Ml(i)}function id(e,i,n,t,o=qu(e,i)){let r=new B,a=new B,m=new B,f=Ei(R,ed),S;G();let{throttled:y,cancel:P}=ul(()=>{Yt({process:D=>{if(ln(D))return;let Ne=A(D);return se(Ne),Ne},after:D=>{Fo(D)&&!Se()&&qi(D),S=D}},o)},ed);function M(){Yt({process:D=>Se()?A(D):void 0},o)}function R(){let D=o.retrieveSession();ni(D)?Yt({process:Ne=>ni(Ne)?ht(Ne,i):void 0,after:A},o):A(D)}function A(D){return ni(D)&&(D=ht(D,i)),Se()&&(at(D)?Gi():(m.notify({previousState:S,newState:D}),S=D)),D}function G(){Yt({process:D=>{if(ln(D))return ht(D,i)},after:D=>{S=D}},o)}function se(D){if(ln(D))return!1;let Ne=t(D[n]);D[n]=Ne,delete D.isExpired,Ne!==Bo&&!D.id&&(D.id=Re(),D.created=String(ei()))}function Se(){return S?.[n]!==void 0}function at(D){return S.id!==D.id||S[n]!==D[n]}function Gi(){S=ht(S,i),a.notify()}function qi(D){S=D,r.notify()}function _r(D){Yt({process:Ne=>L(L({},Ne),D),after:A},o)}return{expandOrRenewSession:y,expandSession:M,getSession:()=>S,renewObservable:r,expireObservable:a,sessionStateUpdateObservable:m,restartSession:G,expire:()=>{P(),o.expireSession(S),A(ht(S,i))},stop:()=>{Ii(f)},updateSessionState:_r}}var gn={GRANTED:"granted",NOT_GRANTED:"not-granted"};function gs(e){let i=new B;return{tryToInit(n){e||(e=n)},update(n){e=n,i.notify()},isGranted(){return e===gn.GRANTED},observable:i}}function nd(e,i,n=!1){return e.some(t=>{try{if(typeof t=="function")return t(i);if(t instanceof RegExp)return t.test(i);if(typeof t=="string")return n?i.startsWith(t):t===i}catch(o){N.error(o)}return!1})}var rd=["chrome-extension://","moz-extension://"];function od(e){return rd.some(i=>e.includes(i))}function sd(e,i=""){return!od(e)&&od(i)}function ad(e=""){for(let i of rd){let n=e.match(new RegExp(`${i}[^/]+`));if(n)return n[0]}}var cd="Running the Browser SDK in a Web extension content script is discouraged and will be forbidden in a future major release unless the `allowedTrackingOrigins` option is provided.",Ku="SDK initialized on a non-allowed domain.";function ld(e,i=typeof location<"u"?location.origin:"",n=new Error().stack){let t=e.allowedTrackingOrigins;if(!t){if(sd(i,n)){N.warn(cd);let r=ad(n);Qe(cd,{extensionUrl:r||"unknown"})}return!0}let o=nd(t,i);return o||N.error(Ku),o}function Bi(e){return Yu(e,location.href).href}function Yu(e,i){let{URL:n}=Qu();try{return i!==void 0?new n(e,i):new n(e)}catch(t){throw new Error(`Failed to construct URL: ${String(t)} ${ot({url:e,base:i})}`)}}var fs;function Qu(){if(!fs){let e,i;try{e=document.createElement("iframe"),e.style.display="none",document.body.appendChild(e),i=e.contentWindow}catch{i=window}fs={URL:i.URL},e?.remove()}return fs}function Qt(e,i){let n=Ju(e,i);return{build(t,o){let r=Xu(e,i,t,o);return n(r)},trackType:i}}function Ju(e,i){let n=`/api/v2/${i}`,t=e.proxy;if(typeof t=="string"){let r=Bi(t);return a=>`${r}?ddforward=${encodeURIComponent(`${n}?${a}`)}`}if(typeof t=="function")return r=>t({path:n,parameters:r});let o=dd(i,e);return r=>`https://${o}${n}?${r}`}function dd(e,i){let{site:n=Kt,internalAnalyticsSubdomain:t}=i;if(e==="logs"&&i.usePciIntake&&n===Kt)return Ul;if(t&&n===Kt)return`${t}.${Kt}`;if(n===Dl)return`http-intake.logs.${n}`;let o=n.split("."),r=o.pop();return`browser-intake-${o.join("-")}.${r}`}function Xu({clientToken:e,internalAnalyticsSubdomain:i},n,t,{retry:o,encoding:r}){let a=["ddsource=browser",`dd-api-key=${e}`,`dd-evp-origin-version=${encodeURIComponent("6.18.0")}`,"dd-evp-origin=browser",`dd-request-id=${Re()}`];return r&&a.push(`dd-evp-encoding=${r}`),n==="rum"&&(a.push(`batch_time=${ve()}`,`_dd.api=${t}`),o&&a.push(`_dd.retry_count=${o.count}`,`_dd.retry_after=${o.lastFailureStatus}`)),i&&a.reverse(),a.join("&")}function hs(e){let i=e.site||Kt,n=Zu(e),t=eg(e);return L({replica:t,site:i},n)}function Zu(e){return{logsEndpointBuilder:Qt(e,"logs"),rumEndpointBuilder:Qt(e,"rum"),profilingEndpointBuilder:Qt(e,"profile"),sessionReplayEndpointBuilder:Qt(e,"replay"),exposuresEndpointBuilder:Qt(e,"exposures")}}function eg(e){if(!e.replica)return;let i=ct(L({},e),{site:Kt,clientToken:e.replica.clientToken}),n={logsEndpointBuilder:Qt(i,"logs"),rumEndpointBuilder:Qt(i,"rum")};return L({applicationId:e.replica.applicationId},n)}function er(e){return Nl.every(i=>e.includes(i))}function _s(e,i){return e!=null&&typeof e!="string"?(N.error(`${i} must be defined as a string`),!1):!0}function tg(e){return e&&typeof e=="string"&&!/(datadog|ddog|datad0g|dd0g)/.test(e)?(N.error(`Site should be a valid Datadog site. ${Oi} ${an}/getting_started/site/.`),!1):!0}function Li(e,i){return e!==void 0&&!ol(e)?(N.error(`${i} Sample Rate should be a number between 0 and 100`),!1):!0}function tr(e){var i,n,t,o,r,a,m,f,S,y;if(!e||!e.clientToken){N.error("Client Token is not configured, we will not send any data.");return}if(e.allowedTrackingOrigins!==void 0&&!Array.isArray(e.allowedTrackingOrigins)){N.error("Allowed Tracking Origins must be an array");return}if(!(!tg(e.site)||!Li(e.sessionSampleRate,"Session")||!Li(e.telemetrySampleRate,"Telemetry")||!Li(e.telemetryConfigurationSampleRate,"Telemetry Configuration")||!Li(e.telemetryUsageSampleRate,"Telemetry Usage")||!_s(e.version,"Version")||!_s(e.env,"Env")||!_s(e.service,"Service")||!ld(e))){if(e.trackingConsent!==void 0&&!Oo(gn,e.trackingConsent)){N.error('Tracking Consent should be either "granted" or "not-granted"');return}return L({beforeSend:e.beforeSend&&wo(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:td(e),sessionSampleRate:(i=e.sessionSampleRate)!==null&&i!==void 0?i:100,telemetrySampleRate:(n=e.telemetrySampleRate)!==null&&n!==void 0?n:20,telemetryConfigurationSampleRate:(t=e.telemetryConfigurationSampleRate)!==null&&t!==void 0?t:5,telemetryUsageSampleRate:(o=e.telemetryUsageSampleRate)!==null&&o!==void 0?o:5,service:(r=e.service)!==null&&r!==void 0?r:void 0,env:(a=e.env)!==null&&a!==void 0?a:void 0,version:(m=e.version)!==null&&m!==void 0?m:void 0,datacenter:(f=e.datacenter)!==null&&f!==void 0?f:void 0,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:(S=e.trackingConsent)!==null&&S!==void 0?S:gn.GRANTED,trackAnonymousUser:(y=e.trackAnonymousUser)!==null&&y!==void 0?y:!0,storeContextsAcrossPages:!!e.storeContextsAcrossPages,batchBytesLimit:16*1024,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*nt,batchMessagesLimit:50,messageBytesLimit:256*1024},hs(e))}}function ir(e){return{session_sample_rate:e.sessionSampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:e.telemetryUsageSampleRate,use_before_send:!!e.beforeSend,use_partitioned_cross_site_session_cookie:e.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:!!e.proxy,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_anonymous_user:e.trackAnonymousUser,session_persistence:e.sessionPersistence,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages,allow_untrusted_events:!!e.allowUntrustedEvents,tracking_consent:e.trackingConsent,use_allowed_tracking_origins:Array.isArray(e.allowedTrackingOrigins)}}var ig=200;function nr(e){let{env:i,service:n,version:t,datacenter:o}=e,r=[Mt("sdk_version","6.18.0")];return i&&r.push(Mt("env",i)),n&&r.push(Mt("service",n)),t&&r.push(Mt("version",t)),o&&r.push(Mt("datacenter",o)),r}function Mt(e,i){let n=i?`${e}:${i}`:e;return(n.length>ig||ng(n))&&N.warn(`Tag ${n} doesn't meet tag requirements and will be sanitized. ${Oi} ${an}/getting_started/tagging/#defining-tags`),fn(n)}function fn(e){return e.replace(/,/g,"_")}function ng(e){return og()?new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(e):!1}function og(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch{return!1}}function bt(e,i,n,{computeHandlingStack:t}={}){let o=e[i];if(typeof o!="function")if(i in e&&i.startsWith("on"))o=Ie;else return{stop:Ie};let r=!1,a=function(){if(r)return o.apply(this,arguments);let m=Array.from(arguments),f;yt(n,null,[{target:this,parameters:m,onPostCall:y=>{f=y},handlingStack:t?ri("instrumented method"):void 0}]);let S=o.apply(this,m);return f&&yt(f,null,[S]),S};return e[i]=a,{stop:()=>{r=!0,e[i]===a&&(e[i]=o)}}}function pd(){return new B(e=>{let i=(o,r)=>{let a=si({stackTrace:r,originalError:o,startClocks:re(),nonErrorPrefix:"Uncaught",source:$.SOURCE,handling:"unhandled"});e.notify(a)},{stop:n}=ag(i),{stop:t}=cg(i);return()=>{n(),t()}})}function ag(e){return bt(we(),"onerror",({parameters:[i,n,t,o,r]})=>{let a;rt(r)||(a=Tl(i,n,t,o)),e(r??i,a)})}function cg(e){return bt(we(),"onunhandledrejection",({parameters:[i]})=>{e(i.reason||"Empty reason")})}function Cs(e){let i=L({version:"6.18.0",onReady(n){n()}},e);return Object.defineProperty(i,"_setDebug",{get(){return zr},enumerable:!1}),i}function vs(e,i,n){let t=e[i];t&&!t.q&&t.version&&N.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),e[i]=n,t&&t.q&&t.q.forEach(o=>wo(o,"onReady callback threw an error:")())}function hn(e,i){i.silentMultipleInit||N.error(`${e} is already initialized.`)}var Fi={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function bs(e,i){let n=[];i.includes(Fi.cspViolation)&&n.push(dg(e));let t=i.filter(o=>o!==Fi.cspViolation);return t.length&&n.push(lg(t)),Ro(...n)}function lg(e){return new B(i=>{if(!window.ReportingObserver)return;let n=F((o,r)=>o.forEach(a=>i.notify(pg(a)))),t=new window.ReportingObserver(n,{types:e,buffered:!0});return t.observe(),()=>{t.disconnect()}})}function dg(e){return new B(i=>{let{stop:n}=st(e,document,"securitypolicyviolation",t=>{i.notify(mg(t))});return n})}function pg(e){let{type:i,body:n}=e;return md({type:n.id,message:`${i}: ${n.message}`,originalError:e,stack:ud(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}function mg(e){let i=`'${e.blockedURI}' blocked by '${e.effectiveDirective}' directive`;return md({type:e.effectiveDirective,message:`${Fi.cspViolation}: ${i}`,originalError:e,csp:{disposition:e.disposition},stack:ud(e.effectiveDirective,e.originalPolicy?`${i} of the policy "${hl(e.originalPolicy,100,"...")}"`:"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}function md(e){return L({startClocks:re(),source:$.REPORT,handling:"unhandled"},e)}function ud(e,i,n,t,o){return n?_t({name:e,message:i,stack:[{func:"?",url:n,line:t??void 0,column:o??void 0}]}):void 0}function gd(e){let i=new Set;return e.forEach(n=>i.add(n)),Array.from(i)}function or(e,i){let n=e.indexOf(i);n>=0&&e.splice(n,1)}var rr=1/0,ug=Ve,_n=null,sr=new Set;function gg(){sr.forEach(e=>e())}function fd({expireDelay:e,maxEntries:i}){let n=[];_n||(_n=Ei(()=>gg(),ug));let t=()=>{let y=Ti()-e;for(;n.length>0&&n[n.length-1].endTime<y;)n.pop()};sr.add(t);function o(y,P){let M={value:y,startTime:P,endTime:rr,remove:()=>{or(n,M)},close:R=>{M.endTime=R}};return i&&n.length>=i&&n.pop(),n.unshift(M),M}function r(y=rr,P={returnInactive:!1}){for(let M of n)if(M.startTime<=y){if(P.returnInactive||y<=M.endTime)return M.value;break}}function a(y){let P=n[0];P&&P.endTime===rr&&P.close(y)}function m(y=rr,P=0){let M=al(y,P);return n.filter(R=>R.startTime<=M&&y<=R.endTime).map(R=>R.value)}function f(){n=[]}function S(){sr.delete(t),sr.size===0&&_n&&(Ii(_n),_n=null)}return{add:o,find:r,closeActive:a,findAll:m,reset:f,stop:S}}var fg="datadog-synthetics-public-id",hg="datadog-synthetics-result-id",_g="datadog-synthetics-injects-rum";function Cn(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||wt(_g))}function ar(){let e=window._DATADOG_SYNTHETICS_PUBLIC_ID||wt(fg);return typeof e=="string"?e:void 0}function cr(){let e=window._DATADOG_SYNTHETICS_RESULT_ID||wt(hg);return typeof e=="string"?e:void 0}function xs(){return!!(ar()&&cr())}var Cg=Ve,vg=Ri,zi=[];function Ss(e,i,n,t){let o=new B,r=new B,a=id(e.sessionStoreStrategyType,e,i,n);zi.push(()=>a.stop());let m=fd({expireDelay:vg});zi.push(()=>m.stop()),a.renewObservable.subscribe(()=>{m.add(f(),Ti()),o.notify()}),a.expireObservable.subscribe(()=>{r.notify(),m.closeActive(Ti())}),a.expandOrRenewSession(),m.add(f(),sl().relative),t.observable.subscribe(()=>{t.isGranted()?a.expandOrRenewSession():a.expire()}),bg(e,()=>{t.isGranted()&&a.expandOrRenewSession()}),xg(e,()=>a.expandSession()),Sg(e,()=>a.restartSession());function f(){let S=a.getSession();return S?{id:S.id,trackingType:S[i],isReplayForced:!!S.forcedReplay,anonymousId:S.anonymousId}:(yg().catch(()=>{}),{id:"invalid",trackingType:Bo,isReplayForced:!1,anonymousId:void 0})}return{findSession:(S,y)=>m.find(S,y),renewObservable:o,expireObservable:r,sessionStateUpdateObservable:a.sessionStateUpdateObservable,expire:a.expire,updateSessionState:a.updateSessionState}}function bg(e,i){let{stop:n}=mn(e,window,["click","touchstart","keydown","scroll"],i,{capture:!0,passive:!0});zi.push(n)}function xg(e,i){let n=()=>{document.visibilityState==="visible"&&i()},{stop:t}=st(e,document,"visibilitychange",n);zi.push(t);let o=Ei(n,Cg);zi.push(()=>{Ii(o)})}function Sg(e,i){let{stop:n}=st(e,window,"resume",i,{capture:!0});zi.push(n)}function yg(){return li(this,null,function*(){let e=Kr(),i=[];"cookieStore"in window?i=yield window.cookieStore.getAll("_dd_s"):i=document.cookie.split(/\s*;\s*/).filter(n=>n.startsWith("_dd_s")),Qe("Unexpected session state",{session:e,isSyntheticsTest:xs(),createdTimestamp:e?.created,expireTimestamp:e?.expire,cookie:L({count:i.length,domain:Uo()},i),currentDomain:`${window.location.protocol}//${window.location.hostname}`})})}function ji(){let e="",i=0;return{isAsync:!1,get isEmpty(){return!e},write(n,t){let o=Mo(n);i+=o,e+=n,t&&t(o)},finish(n){n(this.finishSync())},finishSync(){let n={output:e,outputBytesCount:i,rawBytesCount:i,pendingData:""};return e="",i=0,n},estimateEncodedBytesCount(n){return n.length}}}var vn=class{constructor(){this.callbacks={}}notify(i,n){let t=this.callbacks[i];t&&t.forEach(o=>o(n))}subscribe(i,n){return this.callbacks[i]||(this.callbacks[i]=[]),this.callbacks[i].push(n),{unsubscribe:()=>{this.callbacks[i]=this.callbacks[i].filter(t=>n!==t)}}}};function hd(e,i,n){let t=0,o=!1;return{isLimitReached(){if(t===0&&ft(()=>{t=0},Ve),t+=1,t<=i||o)return o=!1,!1;if(t===i+1){o=!0;try{n({message:`Reached max number of ${e}s by minute: ${i}`,source:$.AGENT,startClocks:re()})}finally{o=!1}}return!0}}}var ys,ws=new WeakMap;function Ps(e){return ys||(ys=wg(e)),ys}function wg(e){return new B(i=>{let{stop:n}=bt(XMLHttpRequest.prototype,"open",Pg),{stop:t}=bt(XMLHttpRequest.prototype,"send",r=>{Mg(r,e,i)},{computeHandlingStack:!0}),{stop:o}=bt(XMLHttpRequest.prototype,"abort",Og);return()=>{n(),t(),o()}})}function Pg({target:e,parameters:[i,n]}){ws.set(e,{state:"open",method:String(i).toUpperCase(),url:Bi(String(n))})}function Mg({target:e,handlingStack:i},n,t){let o=ws.get(e);if(!o)return;let r=o;r.state="start",r.startClocks=re(),r.isAborted=!1,r.xhr=e,r.handlingStack=i;let a=!1,{stop:m}=bt(e,"onreadystatechange",()=>{e.readyState===XMLHttpRequest.DONE&&f()}),f=()=>{if(S(),m(),a)return;a=!0;let y=o;y.state="complete",y.duration=Po(r.startClocks.timeStamp,ve()),y.status=e.status,t.notify(dl(y))},{stop:S}=st(n,e,"loadend",f);t.notify(r)}function Og({target:e}){let i=ws.get(e);i&&(i.isAborted=!0)}var Ms;function bn(){return Ms||(Ms=kg()),Ms}function kg(){return new B(e=>{if(!window.fetch)return;let{stop:i}=bt(window,"fetch",n=>Tg(n,e),{computeHandlingStack:!0});return i})}function Tg({parameters:e,onPostCall:i,handlingStack:n},t){let[o,r]=e,a=r&&r.method;a===void 0&&o instanceof Request&&(a=o.method);let m=a!==void 0?String(a).toUpperCase():"GET",f=o instanceof Request?o.url:Bi(String(o)),S=re(),y={state:"start",init:r,input:o,method:m,startClocks:S,url:f,handlingStack:n};t.notify(y),e[0]=y.input,e[1]=y.init,i(P=>Eg(t,P,y))}function Eg(e,i,n){let t=n;function o(r){t.state="resolve",Object.assign(t,r),e.notify(t)}i.then(F(r=>{o({response:r,responseType:r.type,status:r.status,isAborted:!1})}),F(r=>{var a,m;o({status:0,isAborted:((m=(a=t.init)===null||a===void 0?void 0:a.signal)===null||m===void 0?void 0:m.aborted)||r instanceof DOMException&&r.code===DOMException.ABORT_ERR,error:r})}))}var Os={};function ks(e){let i=e.map(n=>(Os[n]||(Os[n]=Ig(n)),Os[n]));return Ro(...i)}function Ig(e){return new B(i=>{let n=qe[e];return qe[e]=(...t)=>{n.apply(console,t);let o=ri("console error");yt(()=>{i.notify(Rg(t,e,o))})},()=>{qe[e]=n}})}function Rg(e,i,n){let t=e.map(o=>Ag(o)).join(" ");if(i===Q.error){let o=e.find(rt),r=si({originalError:o,handlingStack:n,startClocks:re(),source:$.CONSOLE,handling:"handled",nonErrorPrefix:"Provided",useFallbackStack:!1});return r.message=t,{api:i,message:t,handlingStack:n,error:r}}return{api:i,message:t,error:void 0,handlingStack:n}}function Ag(e){return typeof e=="string"?Ae(e):rt(e)?es(Ke(e)):ot(Ae(e),void 0,2)}var Dg=500;function Ts(){let e=[];return{add:o=>{e.push(o)>Dg&&e.splice(0,1)},remove:o=>{or(e,o)},drain:o=>{e.forEach(r=>r(o)),e.length=0}}}function _d(e){let i=Go(e)==="object";return i||N.error("Unsupported context:",e),i}function Es(e,i,n){let t=L({},e);for(let[o,{required:r,type:a}]of Object.entries(i))a==="string"&&!Cd(t[o])&&(t[o]=String(t[o])),r&&Cd(t[o])&&N.warn(`The property ${o} of ${n} is required; context will not be sent to the intake.`);return t}function Cd(e){return e==null||e===""}function Ot(e="",{propertiesConfig:i={}}={}){let n={},t=new B,o={getContext:()=>Ko(n),setContext:r=>{_d(r)?n=Ae(Es(r,i,e)):o.clearContext(),t.notify()},setContextProperty:(r,a)=>{n=Ae(Es(ct(L({},n),{[r]:a}),i,e)),t.notify()},removeContextProperty:r=>{delete n[r],Es(n,i,e),t.notify()},clearContext:()=>{n={},t.notify()},changeObservable:t};return o}function ge(e,i,n,t){return F((...o)=>(t&&Ni({feature:t}),e()[i][n](...o)))}function xn(e,i,n){e.changeObservable.subscribe(()=>{let t=e.getContext();n.add(o=>o[i].setContext(t))})}var Vg="_dd_c",Ug=[];function Wi(e,i,n,t){let o=Ng(n,t);Ug.push(st(e,window,"storage",({key:S})=>{o===S&&a()})),i.changeObservable.subscribe(m);let r=Ue(f(),i.getContext());Ht(r)||i.setContext(r);function a(){i.setContext(f())}function m(){localStorage.setItem(o,JSON.stringify(i.getContext()))}function f(){let S=localStorage.getItem(o);return S?JSON.parse(S):{}}}function Ng(e,i){return`${Vg}_${e}_${i}`}function Is(e,i,n){let t=lr();return i.storeContextsAcrossPages&&Wi(i,t,n,4),e.register(0,()=>{let o=t.getContext();return Ht(o)||!o.id?Ye:{account:o}}),t}function lr(){return Ot("account",{propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}})}function Rs(e,i,n,t){let o=dr();return i.storeContextsAcrossPages&&Wi(i,o,n,2),e.register(0,()=>{let r=o.getContext();return t?{context:r}:r}),o}function dr(){return Ot("global context")}function As(e,i,n,t){let o=pr();return i.storeContextsAcrossPages&&Wi(i,o,t,1),e.register(0,({eventType:r,startTime:a})=>{let m=o.getContext(),f=n.findTrackedSession(a);return f&&f.anonymousId&&!m.anonymous_id&&i.trackAnonymousUser&&(m.anonymous_id=f.anonymousId),Ht(m)?Ye:{type:r,usr:m}}),e.register(1,({startTime:r})=>{var a;return{anonymous_id:(a=n.findTrackedSession(r))===null||a===void 0?void 0:a.anonymousId}}),o}function pr(){return Ot("user",{propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}})}var te={userContext:"userContext",globalContext:"globalContext",accountContext:"accountContext"},fe={getContext:"getContext",setContext:"setContext",setContextProperty:"setContextProperty",removeContextProperty:"removeContextProperty",clearContext:"clearContext"};function Ds(e,i,n){let t=e.getReader(),o=[],r=0;a();function a(){t.read().then(F(f=>{if(f.done){m();return}n.collectStreamBody&&o.push(f.value),r+=f.value.length,r>n.bytesLimit?m():a()}),F(f=>i(f)))}function m(){t.cancel().catch(Ie);let f,S;if(n.collectStreamBody){let y;if(o.length===1)y=o[0];else{y=new Uint8Array(r);let P=0;o.forEach(M=>{y.set(M,P),P+=M.length})}f=y.slice(0,n.bytesLimit),S=y.length>n.bytesLimit}i(void 0,f,S)}}var vd={DOCUMENT:"document",XHR:"xhr",BEACON:"beacon",FETCH:"fetch",CSS:"css",JS:"js",IMAGE:"image",FONT:"font",MEDIA:"media",OTHER:"other"},mr={FETCH:vd.FETCH,XHR:vd.XHR};var Bg=500;function bd(e=pd){let i=new ti(Bg),n=e().subscribe(t=>{i.notify({type:0,error:t})});return{observable:i,stop:()=>{n.unsubscribe()}}}function Hi(e,i,n){let t=n.getHandler(),o=Array.isArray(t)?t:[t];return xd[e]>=xd[n.getLevel()]&&o.includes(i)}var E={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},xd={[E.ok]:0,[E.debug]:1,[E.info]:2,[E.notice]:4,[E.warn]:5,[E.error]:6,[E.critical]:7,[E.alert]:8,[E.emerg]:9};function Jt(e,{includeMessage:i=!1}={}){return{stack:e.stack,kind:e.type,message:i?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}var Lg=function(e,i,n,t){var o=arguments.length,r=o<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,n):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,i,n,t);else for(var m=e.length-1;m>=0;m--)(a=e[m])&&(r=(o<3?a(r):o>3?a(i,n,r):a(i,n))||r);return o>3&&r&&Object.defineProperty(i,n,r),r},ci={console:"console",http:"http",silent:"silent"},Sd=Object.keys(E),be=class{constructor(i,n,t=ci.http,o=E.debug,r={}){this.handleLogStrategy=i,this.handlerType=t,this.level=o,this.contextManager=Ot("logger"),this.tags=[],this.contextManager.setContext(r),n&&this.contextManager.setContextProperty("logger",{name:n})}logImplementation(i,n,t=E.info,o,r){let a=Ae(n),m;if(o!=null){let f=si({originalError:o,nonErrorPrefix:"Provided",source:$.LOGGER,handling:"handled",startClocks:re()});m=Ue({error:Jt(f,{includeMessage:!0})},f.context,a)}else m=a;this.handleLogStrategy({message:Ae(i),context:m,status:t},this,r)}log(i,n,t=E.info,o){let r;Hi(t,ci.http,this)&&(r=ri("log")),this.logImplementation(i,n,t,o,r)}setContext(i){this.contextManager.setContext(i)}getContext(){return this.contextManager.getContext()}setContextProperty(i,n){this.contextManager.setContextProperty(i,n)}removeContextProperty(i){this.contextManager.removeContextProperty(i)}clearContext(){this.contextManager.clearContext()}addTag(i,n){this.tags.push(Mt(i,n))}removeTagsWithKey(i){let n=fn(i);this.tags=this.tags.filter(t=>t!==n&&!t.startsWith(`${n}:`))}getTags(){return this.tags.slice()}setHandler(i){this.handlerType=i}getHandler(){return this.handlerType}setLevel(i){this.level=i}getLevel(){return this.level}};Lg([jr],be.prototype,"logImplementation",null);be.prototype.ok=kt(E.ok);be.prototype.debug=kt(E.debug);be.prototype.info=kt(E.info);be.prototype.notice=kt(E.notice);be.prototype.warn=kt(E.warn);be.prototype.error=kt(E.error);be.prototype.critical=kt(E.critical);be.prototype.alert=kt(E.alert);be.prototype.emerg=kt(E.emerg);function kt(e){return function(i,n,t){let o;Hi(e,ci.http,this)&&(o=ri("log")),this.logImplementation(i,n,e,t,o)}}function Vs(){return{view:{referrer:document.referrer,url:window.location.href}}}var Fg=32*1024;function wd(e){e.usePciIntake===!0&&e.site&&e.site!=="datadoghq.com"&&N.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");let i=tr(e),n=yd(e.forwardConsoleLogs,ii(Q),"Forward Console Logs"),t=yd(e.forwardReports,ii(Fi),"Forward Reports");if(!(!i||!n||!t))return e.forwardErrorsToLogs&&!n.includes(Q.error)&&n.push(Q.error),L({forwardErrorsToLogs:e.forwardErrorsToLogs!==!1,forwardConsoleLogs:n,forwardReports:t,requestErrorResponseLengthLimit:Fg},i)}function yd(e,i,n){if(e===void 0)return[];if(!(e==="all"||Array.isArray(e)&&e.every(t=>i.includes(t)))){N.error(`${n} should be "all" or an array with allowed values "${i.join('", "')}"`);return}return e==="all"?i:gd(e)}function Pd(e){let i=ir(e);return L({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake},i)}function Md(e,i,n){let t=Ts(),o=dr();xn(o,te.globalContext,t);let r=lr();xn(r,te.accountContext,t);let a=pr();xn(a,te.userContext,t);let m,f,S=i.observable.subscribe(y);function y(){if(!f||!m||!i.isGranted())return;S.unsubscribe();let P=n(m,f);t.drain(P)}return{init(P){if(!P){N.error("Missing configuration");return}if(ns(P.enableExperimentalFeatures),Pt()&&(P=zg(P)),m=P,Jo(Pd(P)),f){hn("DD_LOGS",P);return}let M=wd(P);M&&(f=M,bn().subscribe(Ie),i.tryToInit(M.trackingConsent),y())},get initConfiguration(){return m},globalContext:o,accountContext:r,userContext:a,getInternalContext:Ie,handleLog(P,M,R,A=e(),G=ve()){t.add(se=>se.handleLog(P,M,R,A,G))}}}function zg(e){return ct(L({},e),{clientToken:"empty"})}function Od(e){let i=gs(),n=bd().observable,t=Md(Vs,i,(m,f)=>{let S=e(f,Vs,i,n);return t=jg(m,S),S}),o=()=>t,r={},a=new be((...m)=>t.handleLog(...m));return Cs({logger:a,init:F(m=>t.init(m)),setTrackingConsent:F(m=>{i.update(m),Ni({feature:"set-tracking-consent",tracking_consent:m})}),getGlobalContext:ge(o,te.globalContext,fe.getContext),setGlobalContext:ge(o,te.globalContext,fe.setContext),setGlobalContextProperty:ge(o,te.globalContext,fe.setContextProperty),removeGlobalContextProperty:ge(o,te.globalContext,fe.removeContextProperty),clearGlobalContext:ge(o,te.globalContext,fe.clearContext),createLogger:F((m,f={})=>(r[m]=new be((...S)=>t.handleLog(...S),Ae(m),f.handler,f.level,Ae(f.context)),r[m])),getLogger:F(m=>r[m]),getInitConfiguration:F(()=>Ko(t.initConfiguration)),getInternalContext:F(m=>t.getInternalContext(m)),setUser:ge(o,te.userContext,fe.setContext),getUser:ge(o,te.userContext,fe.getContext),setUserProperty:ge(o,te.userContext,fe.setContextProperty),removeUserProperty:ge(o,te.userContext,fe.removeContextProperty),clearUser:ge(o,te.userContext,fe.clearContext),setAccount:ge(o,te.accountContext,fe.setContext),getAccount:ge(o,te.accountContext,fe.getContext),setAccountProperty:ge(o,te.accountContext,fe.setContextProperty),removeAccountProperty:ge(o,te.accountContext,fe.removeContextProperty),clearAccount:ge(o,te.accountContext,fe.clearContext)})}function jg(e,i){return L({init:n=>{hn("DD_LOGS",n)},initConfiguration:e},i)}var Wg="logs";function kd(e,i){let n=Ss(e,Wg,t=>Ed(e,t),i);return{findTrackedSession:(t,o={returnInactive:!1})=>{let r=n.findSession(t,o);return r&&r.trackingType==="1"?{id:r.id,anonymousId:r.anonymousId}:void 0},expireObservable:n.expireObservable}}function Td(e){let n=Ed(e)==="1"?{}:void 0;return{findTrackedSession:()=>n,expireObservable:new B}}function Ed(e,i){return Hg(i)?i:ki(e.sessionSampleRate)?"1":"0"}function Hg(e){return e==="0"||e==="1"}function Id(e,i,n,t,o){let r=Sd.concat(["custom"]),a={};r.forEach(m=>{a[m]=hd(m,e.eventRateLimiterThreshold,o)}),i.subscribe(0,({rawLogsEvent:m,messageContext:f=void 0,savedCommonContext:S=void 0,domainContext:y,ddtags:P=[]})=>{var M,R;let A=cl(m.date),G=S||t(),se=n.triggerHook(0,{startTime:A});if(se===Ct)return;let Se=nr(e),at=Ue({view:G.view},se,m,f,{ddtags:Se.concat(P).join(",")});((M=e.beforeSend)===null||M===void 0?void 0:M.call(e,at,y))===!1||at.origin!==$.AGENT&&((R=a[at.status])!==null&&R!==void 0?R:a.custom).isLimitReached()||i.notify(1,at)})}var $g={[Q.log]:E.info,[Q.debug]:E.debug,[Q.info]:E.info,[Q.warn]:E.warn,[Q.error]:E.error};function Rd(e,i){let n=ks(e.forwardConsoleLogs).subscribe(t=>{var o;let r={rawLogsEvent:{date:ve(),message:t.message,origin:$.CONSOLE,error:t.error&&Jt(t.error),status:$g[t.api]},messageContext:(o=t.error)===null||o===void 0?void 0:o.context,domainContext:{handlingStack:t.handlingStack}};i.notify(0,r)});return{stop:()=>{n.unsubscribe()}}}function Ad(e,i){let n=bs(e,e.forwardReports).subscribe(t=>{let o=t.message,r,a=t.originalError.type==="deprecation"?E.warn:E.error;a===E.error?r=Jt(t):t.stack&&(o+=` Found in ${ts(t.stack)}`),i.notify(0,{rawLogsEvent:{date:ve(),message:o,origin:$.REPORT,error:r,status:a}})});return{stop:()=>{n.unsubscribe()}}}function Dd(e,i){if(!e.forwardErrorsToLogs)return{stop:Ie};let n=Ps(e).subscribe(r=>{r.state==="complete"&&o(mr.XHR,r)}),t=bn().subscribe(r=>{r.state==="resolve"&&o(mr.FETCH,r)});function o(r,a){!er(a.url)&&(Yg(a)||Yo(a.status))&&("xhr"in a?Gg(a.xhr,e,m):a.response?Kg(a.response,e,m):a.error&&qg(a.error,e,m));function m(f){let S={isAborted:a.isAborted,handlingStack:a.handlingStack};i.notify(0,{rawLogsEvent:{message:`${Qg(r)} error ${a.method} ${a.url}`,date:a.startClocks.timeStamp,error:{stack:f||"Failed to load",handling:void 0},http:{method:a.method,status_code:a.status,url:a.url},status:E.error,origin:$.NETWORK},domainContext:S})}}return{stop:()=>{n.unsubscribe(),t.unsubscribe()}}}function Gg(e,i,n){typeof e.response=="string"?n(Us(e.response,i)):n(e.response)}function qg(e,i,n){n(Us(_t(Ke(e)),i))}function Kg(e,i,n){let t=Ll(e);!t||!t.body?n():window.TextDecoder?Jg(t.body,i.requestErrorResponseLengthLimit,(o,r)=>{n(o?`Unable to retrieve response: ${o}`:r)}):t.text().then(F(o=>n(Us(o,i))),F(o=>n(`Unable to retrieve response: ${o}`)))}function Yg(e){return e.status===0&&e.responseType!=="opaque"}function Us(e,i){return e.length>i.requestErrorResponseLengthLimit?`${e.substring(0,i.requestErrorResponseLengthLimit)}...`:e}function Qg(e){return mr.XHR===e?"XHR":"Fetch"}function Jg(e,i,n){Ds(e,(t,o,r)=>{if(t)n(t);else{let a=new TextDecoder().decode(o);r&&(a+="..."),n(void 0,a)}},{bytesLimit:i,collectStreamBody:!0})}function Vd(e,i,n){if(!e.forwardErrorsToLogs)return{stop:Ie};let t=n.subscribe(o=>{if(o.type===0){let r=o.error;i.notify(0,{rawLogsEvent:{message:r.message,date:r.startClocks.timeStamp,error:Jt(r),origin:$.SOURCE,status:E.error},messageContext:r.context})}});return{stop:()=>{t.unsubscribe()}}}var Ud=vn;function Nd(e){function i(n,t,o,r,a){let m=Ue(t.getContext(),n.context);if(Hi(n.status,ci.console,t)&&Zg(n,m),Hi(n.status,ci.http,t)){let f={rawLogsEvent:{date:a||ve(),message:n.message,status:n.status,origin:$.LOGGER},messageContext:m,savedCommonContext:r,ddtags:t.getTags()};o&&(f.domainContext={handlingStack:o}),e.notify(0,f)}}return{handleLog:i}}var Xg={[E.ok]:Q.debug,[E.debug]:Q.debug,[E.info]:Q.info,[E.notice]:Q.info,[E.warn]:Q.warn,[E.error]:Q.error,[E.critical]:Q.error,[E.alert]:Q.error,[E.emerg]:Q.error};function Zg({status:e,message:i},n){Wt[Xg[e]].call(qe,i,n)}function Bd(e,i,n,t,o){let r=Vi(e,{endpoint:e.logsEndpointBuilder,encoder:ji()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:ji()},n,t,o.expireObservable);return i.subscribe(1,a=>{r.add(a)}),r}function Ld(e){let i=ai();e.subscribe(1,n=>{i.send("log",n)})}function Fd(e){return{get:i=>{let n=e.findTrackedSession(i);if(n)return{session_id:n.id}}}}function zd(e){return i=>{e.notify(0,{rawLogsEvent:{message:i.message,date:i.startClocks.timeStamp,origin:$.AGENT,status:E.error}}),Qe("Error reported to customer",{"error.message":i.message})}}var jd=Ql;function Wd(e){let i=window,n=!1;e.register(0,({startTime:r})=>{let a=t(r);return a||Ye}),e.register(1,({startTime:r})=>{var a,m;let f=t(r);return f?{application:{id:f.application_id},view:{id:(a=f.view)===null||a===void 0?void 0:a.id},action:{id:(m=f.user_action)===null||m===void 0?void 0:m.id}}:Ye});function t(r){let a=Cn(),m=a?i.DD_RUM_SYNTHETICS:i.DD_RUM,f=o(r,m);if(f)return f;a&&!n&&(n=!0,Qe("Logs sent before RUM is injected by the synthetics worker",{testId:ar(),resultId:cr()}))}function o(r,a){if(a&&a.getInternalContext)return a.getInternalContext(r)}return{stop:()=>{n=!1}}}function Hd(e,i,n){e.register(0,({startTime:t})=>{let o=n.findTrackedSession(t);return n.findTrackedSession(t,{returnInactive:!0})?{service:i.service,session_id:o?o.id:void 0,session:o?{id:o.id}:void 0}:Ct}),e.register(1,({startTime:t})=>{let o=n.findTrackedSession(t);return!o||!o.id?Ye:{session:{id:o.id}}})}function $d(e,i){function n(){return i.isGranted()?Ye:Ct}e.register(0,n),e.register(1,n)}var Ns="logs";function Gd(e,i,n,t){let o=new Ud,r=jd(),a=[];o.subscribe(1,Se=>pn("logs",Se));let m=zd(o),f=cs(e),S=Qo("browser-logs-sdk",e,r,m,f,ji);a.push(S.stop);let y=e.sessionStoreStrategyType&&!Pt()&&!Cn()?kd(e,n):Td(e);$d(r,n),Hd(r,e,y);let P=Is(r,e,Ns),M=As(r,e,y,Ns),R=Rs(r,e,Ns,!1),{stop:A}=Wd(r);Dd(e,o),Vd(e,o,t),t.unbuffer(),Rd(e,o),Ad(e,o);let{handleLog:G}=Nd(o);if(Id(e,o,r,i,m),Pt())Ld(o);else{let{stop:Se}=Bd(e,o,m,f,y);a.push(()=>Se())}let se=Fd(y);return{handleLog:G,getInternalContext:se.get,accountContext:P,globalContext:R,userContext:M,stop:()=>{a.forEach(Se=>Se()),A()}}}var xt=Od(Gd);vs(we(),"DD_LOGS",xt);var qd=(()=>{let i=class i{constructor(t,o,r){this.accountService=t,this.settingsService=o,this.signalRService=r,this.sendingToDatadog=!1,this.initialized=!1,this.accountService.logoutEvent.subscribe(()=>{xt.clearUser()}),this.signalRService.settingsUpdated.subscribe(a=>{a.collectClientLogs?this.initialize():this.destroyLogger()})}initialize(){if(!(!this.settingsService.settings.collectClientLogs||de.name!=="production-app")){if(this.initialized){xt.logger.setHandler("http"),this.sendingToDatadog=!0;return}xt.init({clientToken:"pubcbecc0c078a71ba406809b29ab865e6a",site:"datadoghq.eu",forwardErrorsToLogs:!0,sessionSampleRate:100}),xt.onReady(()=>{let t=this.accountService.currentUser.id,o=this.accountService.currentUser.displayName??void 0;xt.setUser({id:t,name:o}),la((r,a,m)=>{switch(r){case Pr.warn:xt.logger.warn(a,m);break;case Pr.error:xt.logger.error(a,m);break;default:break}}),this.sendingToDatadog=!0,this.initialized=!0})}}destroyLogger(){!this.sendingToDatadog||de.name!=="production-app"||(xt.logger.setHandler("silent"),this.sendingToDatadog=!1)}};i.\u0275fac=function(o){return new(o||i)(X(T),X(ie),X(Ge))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function nf(e,i){if(e&1&&x(0,"img",1),e&2){let n=d();g("src",pt("/assets/images/logo",n.settingsService.isB2BApp()||n.settingsService.isCoWork()?"-cw":"",".svg"),Tt)("alt",Pn(n.settingsService.siteName))}}function of(e,i){if(e&1&&x(0,"img",22)(1,"img",23),e&2){let n=d();g("src",pt("/assets/images/logo-full",n.settingsService.isB2BApp()||n.settingsService.isCoWork()?"-cw":"",".svg"),Tt)("alt",Pn(n.settingsService.siteName)),l(),g("src",pt("/assets/images/logo-full-dark",n.settingsService.isB2BApp()||n.settingsService.isCoWork()?"-cw":"",".svg"),Tt)("alt",Pn(n.settingsService.siteName))}}function rf(e,i){if(e&1){let n=w();s(0,"a",11),C("click",function(){v(n);let o=d();return b(o.ensureFullyVerifiedUser())}),x(1,"ss-icon",24),s(2,"div",6),p(3,"FocusBuddies"),c(),s(4,"div",7),p(5,"FocusBuddies"),c()()}if(e&2){let n=d();I("not-available",!n.accountService.authenticated()),g("routerLink",n.accountService.authenticated()?"/focus-buddies":"")("routerLinkActive",n.accountService.authenticated()?"active-link":"")("matTooltip",n.getPageLinkTooltip(n.sidebarTooltips.focusBuddies)),l(),g("size",26)("iconVariant",28)}}function sf(e,i){if(e&1&&(s(0,"span"),p(1),c()),e&2){let n=d(4);l(),k(" ",n.notificationService.totalUnreadMessages>99?"99+":n.notificationService.totalUnreadMessages," ")}}function af(e,i){if(e&1&&(s(0,"div",29),h(1,sf,2,1,"span"),c()),e&2){let n=d(3);I("empty",n.notificationService.totalUnreadMessages===0),l(),_(n.notificationService.totalUnreadMessages>0?1:-1)}}function cf(e,i){if(e&1&&(x(0,"ss-icon",27),h(1,af,2,3,"div",28),s(2,"div",6),p(3,"Conversations"),c(),s(4,"div",7),p(5,"Conversations"),c()),e&2){let n=d(2);g("size",26),l(),_(n.notificationService.totalUnreadMessages>0?1:-1)}}function lf(e,i){e&1&&x(0,"mat-spinner",26)}function df(e,i){if(e&1){let n=w();s(0,"a",25),C("click",function(){v(n);let o=d();return b(o.setLoadingState())}),h(1,cf,6,2),h(2,lf,1,0,"mat-spinner",26),c()}if(e&2){let n=d();I("not-available",!n.accountService.authenticated()),g("matTooltip",n.getPageLinkTooltip(n.sidebarTooltips.conversations))("routerLink",n.accountService.authenticated()?"/conversations":"")("routerLinkActive",n.accountService.authenticated()?"active-link":""),l(),_(!(n.loadingConversationsPage&&n.accountService.isFullyVerifiedUser())||n.hundredMsInitialized?1:-1),l(),_(n.loadingConversationsPage&&n.accountService.isFullyVerifiedUser()&&!n.hundredMsInitialized?2:-1)}}function pf(e,i){if(e&1){let n=w();s(0,"a",30),C("click",function(){v(n);let o=d();return b(o.ensureFullyVerifiedUser())}),x(1,"ss-icon",31),s(2,"div",6),p(3,"Groups"),c(),s(4,"div",7),p(5,"Groups"),c()()}if(e&2){let n=d();I("not-available",!n.accountService.authenticated()),g("routerLink",n.accountService.authenticated()?"/groups":"")("routerLinkActive",n.accountService.authenticated()?"active-link":"")("matTooltip",n.getPageLinkTooltip(n.sidebarTooltips.groups)),l(),g("size",26)}}function mf(e,i){if(e&1){let n=w();s(0,"a",11),C("click",function(){v(n);let o=d();return b(o.ensureFullyVerifiedUser())}),x(1,"ss-icon",32),s(2,"div",6),p(3,"Feedback"),c(),s(4,"div",7),p(5,"Feedback"),c()()}if(e&2){let n=d();I("not-available",!n.accountService.authenticated()),g("routerLink",n.accountService.authenticated()?"/feedback":"")("routerLinkActive",n.accountService.authenticated()?"active-link":"")("matTooltip",n.getPageLinkTooltip(n.sidebarTooltips.feedback)),l(),g("size",26)}}function uf(e,i){e&1&&(s(0,"span"),p(1,"day streak"),c())}function gf(e,i){e&1&&(s(0,"small",17),p(1," Join a focus room for 30m to build your streak! "),c())}var Yd=(()=>{let i=class i{get streakInfo(){return this.focusRoomService.streakInfo}get isFullyVerifiedUser(){return this.accountService.isFullyVerifiedUser()}constructor(t,o,r,a,m,f,S,y,P){this.settingsService=t,this.accountService=o,this.notificationService=r,this.focusRoomService=a,this.accountModalsService=m,this.router=f,this.utilityService=S,this.analyticsService=y,this.themeService=P,this.isOnSoloRoomPage=!1,this.expandedSidebar=!1,this.conversationsModuleLoaded=!1,this.loadingConversationsPage=!1,this.sidebarTooltips={tasks:{unverified:"Sign up to see your task list",emailUnconfirmed:"Confirm email to see your task list",phoneUnconfirmed:"Verify your phone number to see your task list",uncompletedBasicInfo:"Complete basic info to see your task list",completed:"Your Tasks"},focusBuddies:{unverified:"Sign up to access FocusBuddies",emailUnconfirmed:"Confirm email to access FocusBuddies",phoneUnconfirmed:"Verify your phone number to access FocusBuddies",uncompletedBasicInfo:"Complete basic info to access FocusBuddies",completed:"FocusBuddies"},conversations:{unverified:"Sign up to see your conversations",emailUnconfirmed:"Confirm email to see your conversations",phoneUnconfirmed:"Verify your phone number to see your conversations",uncompletedBasicInfo:"Complete basic info to see your conversations",completed:"Conversations"},groups:{unverified:"Sign up to see the StudyStream groups",emailUnconfirmed:"Confirm email to see groups",phoneUnconfirmed:"Verify your phone number to see groups",uncompletedBasicInfo:"Complete basic info to see groups",completed:"Groups"},leaderboards:{unverified:"Sign up to see the StudyStream leaderboards",emailUnconfirmed:"Confirm email to see leaderboards",phoneUnconfirmed:"Verify your phone number to see leaderboards",uncompletedBasicInfo:"Complete basic info to see leaderboards",completed:"Leaderboards"},focusSessions:{unverified:"Sign up to see focus sessions",emailUnconfirmed:"Confirm email to see focus sessions",phoneUnconfirmed:"Verify your phone number to see focus sessions",uncompletedBasicInfo:"Complete basic info to see focus sessions",completed:"Focus sessions"},feedback:{unverified:"Sign up to leave your feedback",emailUnconfirmed:"Confirm email to leave your feedback",phoneUnconfirmed:"Verify your phone number to leave your feedback",uncompletedBasicInfo:"Complete basic info to leave your feedback",completed:"Feedback"}},this.subscriptions=[],this.isOnSoloRoomPage=f.url==="/solo-room",this.isOnHomePage=f.url==="/",this.subscriptions.push(this.router.events.subscribe(M=>{M instanceof Bn&&(this.isOnSoloRoomPage=M.urlAfterRedirects==="/solo-room",this.isOnHomePage=M.urlAfterRedirects==="/")}))}ngOnInit(){this.subscriptions.push(this.themeService.themeChange.subscribe(t=>this.currentTheme=t),this.utilityService.conversationsModuleLoaded.subscribe(t=>{t&&(this.conversationsModuleLoaded=!0,this.loadingConversationsPage=!1)}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}toggleTheme(){let t=this.currentTheme===_i.Dark?_i.Light:_i.Dark;this.themeService.setTheme(t)}setLoadingState(){this.ensureFullyVerifiedUser(),this.accountService.isFullyVerifiedUser()&&(this.loadingConversationsPage=!this.conversationsModuleLoaded)}getPageLinkTooltip(t){return this.accountService.currentUser.id?this.accountService.currentUser.emailConfirmed?this.accountService.isCurrentUserPhoneVerified()?this.accountService.currentUser.completedBasicInfo?this.expandedSidebar?"":t.completed:t.uncompletedBasicInfo:t.phoneUnconfirmed:t.emailUnconfirmed:t.unverified}getInfoMessage(){return this.accountService.currentUser.id?"Join a focus room for 30m to build your streak!":"Sign up for full access!"}handleStreakClick(){this.accountModalsService.ensureUserCompletedBasicInfo()&&(this.analyticsService.markActivity(W.SidebarStreak),this.router.navigate(["/profile"],{queryParams:{activeTab:"Statistics"}}))}ensureFullyVerifiedUser(){this.accountModalsService.ensureUserCompletedBasicInfo()}};i.\u0275fac=function(o){return new(o||i)(u(ie),u(T),u(zt),u(xi),u(Ft),u(Z),u(Me),u(oe),u(Kn))},i.\u0275cmp=O({type:i,selectors:[["ss-sidebar"]],hostVars:4,hostBindings:function(o,r){o&2&&I("solo-room-page",r.isOnSoloRoomPage)("expanded",r.expandedSidebar)},inputs:{hundredMsInitialized:"hundredMsInitialized",expandedSidebar:"expandedSidebar"},standalone:!1,decls:41,vars:27,consts:[["routerLink","/",1,"logo"],["draggable","false",3,"src","alt"],[1,"navigation-wrapper"],[1,"top"],["routerLink","/","matTooltipPosition","right",3,"matTooltip"],["iconName","home","color","grayscale-g3",3,"size","iconVariant"],[1,"interactable"],[1,"page-name","notification"],["matTooltipPosition","right",3,"not-available","routerLink","routerLinkActive","matTooltip"],["matTooltipPosition","right",3,"not-available","matTooltip","routerLink","routerLinkActive"],["matTooltipPosition","right",1,"groups",3,"not-available","routerLink","routerLinkActive","matTooltip"],["matTooltipPosition","right",3,"click","routerLink","routerLinkActive","matTooltip"],["iconName","data_histogram","color","grayscale-g3",3,"size"],["iconName","calendar_star","color","grayscale-g3",3,"size"],[1,"statistics"],[1,"streak-wrapper",3,"click"],[1,"comet"],[1,"info-message"],[1,"switch-wrapper"],[1,"theme-switch",3,"click"],[1,"switch-box"],[1,"shape"],["draggable","false",1,"light-theme-logo",3,"src","alt"],["draggable","false",1,"dark-theme-logo",3,"src","alt"],["iconName","person","color","grayscale-g3",3,"size","iconVariant"],["matTooltipPosition","right",3,"click","matTooltip","routerLink","routerLinkActive"],["diameter","24","strokeWidth","2"],["iconName","chat","color","grayscale-g3",3,"size"],[1,"unread-messages","notification",3,"empty"],[1,"unread-messages","notification"],["matTooltipPosition","right",1,"groups",3,"click","routerLink","routerLinkActive","matTooltip"],["iconName","people_audience","color","grayscale-g3",3,"size"],["iconName","person_feedback","color","grayscale-g3",3,"size"]],template:function(o,r){o&1&&(s(0,"a",0),h(1,nf,1,4,"img",1),h(2,of,2,8),c(),s(3,"div",2)(4,"div",3)(5,"a",4),x(6,"ss-icon",5),s(7,"div",6),p(8,"Home"),c(),s(9,"div",7),p(10,"Home"),c()(),h(11,rf,6,7,"a",8),h(12,df,3,7,"a",9),h(13,pf,6,6,"a",10),s(14,"a",11),C("click",function(){return r.ensureFullyVerifiedUser()}),x(15,"ss-icon",12),s(16,"div",6),p(17,"Leaderboards"),c(),s(18,"div",7),p(19,"Leaderboards"),c()(),s(20,"a",11),C("click",function(){return r.ensureFullyVerifiedUser()}),x(21,"ss-icon",13),s(22,"div",6),p(23,"Focus sessions"),c(),s(24,"div",7),p(25,"Focus sessions"),c()(),h(26,mf,6,6,"a",8),c()(),s(27,"div",14)(28,"div",15),C("click",function(){return r.handleStreakClick()}),x(29,"div",16),s(30,"div")(31,"h2"),p(32),c(),h(33,uf,2,0,"span"),c()(),h(34,gf,2,0,"small",17),c(),s(35,"div",18)(36,"span",6),p(37),c(),s(38,"div",19),C("click",function(){return r.toggleTheme()}),s(39,"div",20),x(40,"div",21),c()()()),o&2&&(l(),_(r.expandedSidebar?-1:1),l(),_(r.expandedSidebar?2:-1),l(3),I("active-link",r.isOnHomePage),g("matTooltip",r.expandedSidebar?"":"Home"),l(),g("size",26)("iconVariant",28),l(5),_(r.settingsService.isB2BApp()?-1:11),l(),_(r.settingsService.isB2BApp()?-1:12),l(),_(r.settingsService.isB2BApp()?-1:13),l(),I("not-available",!r.accountService.authenticated()),g("routerLink",r.accountService.authenticated()?"/leaderboards":"")("routerLinkActive",r.accountService.authenticated()?"active-link":"")("matTooltip",r.getPageLinkTooltip(r.sidebarTooltips.leaderboards)),l(),g("size",26),l(5),I("not-available",!r.accountService.authenticated()),g("routerLink",r.accountService.authenticated()?"/focus-sessions":"")("routerLinkActive",r.accountService.authenticated()?"active-link":"")("matTooltip",r.getPageLinkTooltip(r.sidebarTooltips.focusSessions)),l(),g("size",26),l(5),_(r.settingsService.isB2BApp()?-1:26),l(6),z(r.streakInfo.hasBeenSetOnce||!r.isFullyVerifiedUser?r.streakInfo.currentStreak:"-"),l(),_(r.expandedSidebar?33:-1),l(),_(r.expandedSidebar&&(r.streakInfo.currentStreak===0||r.streakInfo.currentStreak===1)?34:-1),l(3),k("",r.currentTheme," mode"))},dependencies:[Fn,ea,j,Nt,$e],styles:['[_nghost-%COMP%]{position:relative;z-index:4;display:flex;flex-direction:column;width:56px;height:100vh;padding-top:32px;border-right:1px solid var(--alt-40);background:var(--contrast)}.expanded[_nghost-%COMP%]{width:200px}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:31px}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]     ss-icon i{background:var(--accent-gradient-60);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a.active-link[_ngcontent-%COMP%]{background:var(--alt-60)}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a.active-link[_ngcontent-%COMP%]     ss-icon i{background:var(--accent-gradient);-webkit-background-clip:text;background-clip:text}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a.active-link[_ngcontent-%COMP%]:after{content:none}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a.active-link[_ngcontent-%COMP%]   .interactable[_ngcontent-%COMP%]{color:var(--default)}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{position:static;transform:none}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .page-name[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .interactable[_ngcontent-%COMP%]{display:block;margin-left:15px;color:var(--default-60)}.expanded[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .unread-messages.notification[_ngcontent-%COMP%]{right:auto;left:43px}.expanded[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:31px}.expanded[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:148px}.expanded[_nghost-%COMP%]   .dark-theme-logo[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .switch-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.expanded[_nghost-%COMP%]   .switch-wrapper[_ngcontent-%COMP%]   .interactable[_ngcontent-%COMP%]{display:block;margin-right:12px}.expanded[_nghost-%COMP%]   .statistics[_ngcontent-%COMP%]{padding:7px 0}.expanded[_nghost-%COMP%]   .statistics[_ngcontent-%COMP%]   .streak-wrapper[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-start;padding-left:11px;margin:0 16px}.expanded[_nghost-%COMP%]   .statistics[_ngcontent-%COMP%]   .comet[_ngcontent-%COMP%]{margin-right:8px}@media only screen and (max-width: 1024px){[_nghost-%COMP%]{position:fixed;bottom:0;z-index:4;width:100vw;height:56px;padding:0;box-shadow:var(--nav-bar-upwards)}}.collapse-arrow[_ngcontent-%COMP%]{top:62px}.logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;margin-bottom:20px;text-decoration:none}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}@media only screen and (max-width: 1024px){.logo[_ngcontent-%COMP%]{display:none}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}}.navigation-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}@media only screen and (max-width: 1024px){.navigation-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;margin:0}}.top[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;margin-bottom:20px}@media only screen and (max-width: 1024px){.top[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around;align-items:center;width:330px;height:100%}}@media only screen and (max-width: 767px){.top[_ngcontent-%COMP%]{width:100%}}.top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;height:46px;text-decoration:none}@media only screen and (max-width: 1024px){.top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:56px;height:56px}.top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]     ss-icon i{color:var(--default-80)}}.top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.top[_ngcontent-%COMP%]   a.flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@media only screen and (max-width: 1024px){.top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{position:static;top:auto;left:auto;transform:none}}.top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover     ss-icon i{background:var(--accent-gradient-20);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.top[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]{position:relative}.top[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]     ss-icon i{background:var(--accent-gradient);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}@media only screen and (max-width: 1024px){.top[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]     ss-icon i{color:var(--accent-gradient-20)}}.top[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:0;width:3px;height:48px;border-radius:0 2px 2px 0;background:var(--accent-blue);transform:translateY(-50%)}@media only screen and (max-width: 1024px){.top[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]:after{content:none}}.top[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]   .page-name[_ngcontent-%COMP%]{height:16px;margin-top:2px;opacity:1;text-align:center}.top[_ngcontent-%COMP%]   a.not-available[_ngcontent-%COMP%]{cursor:not-allowed}.top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .interactable[_ngcontent-%COMP%]{display:none}@media only screen and (max-width: 1024px){.top[_ngcontent-%COMP%]   a.groups[_ngcontent-%COMP%]{display:none}}.statistics[_ngcontent-%COMP%]{width:100%;padding:8px;border-top:1px solid var(--alt-40)}@media only screen and (max-width: 1024px){.statistics[_ngcontent-%COMP%]{display:none}}.statistics[_ngcontent-%COMP%]   .streak-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;border-radius:8px;cursor:pointer}.statistics[_ngcontent-%COMP%]   .streak-wrapper[_ngcontent-%COMP%]:hover{background:var(--alt-60)}.statistics[_ngcontent-%COMP%]   .streak-wrapper[_ngcontent-%COMP%]   .comet[_ngcontent-%COMP%]{width:56px;height:56px;margin-right:10px;background-image:url(/assets/icons/comet-light.svg)}.statistics[_ngcontent-%COMP%]   .streak-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:baseline;color:var(--default-20)}.statistics[_ngcontent-%COMP%]   .streak-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;top:1px;margin-right:4px;color:var(--accent-blurple)}.statistics[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]{margin-bottom:12px}.statistics[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{display:block;margin:8px 36px 17px;line-height:16px;color:var(--default-40);text-align:center}.page-name[_ngcontent-%COMP%]{display:none;height:0;margin-top:0;background:var(--accent-gradient-20);-webkit-background-clip:text;opacity:0;transition:height .2s linear,margin .2s linear,opacity .2s linear .1s;-webkit-text-fill-color:transparent}@media only screen and (max-width: 1024px){.page-name[_ngcontent-%COMP%]{display:block}}mat-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.unread-messages[_ngcontent-%COMP%]{position:absolute;top:27px;right:3px;display:flex;justify-content:center;align-items:center;min-width:20px;height:20px;padding:0 4px;border:2px solid var(--contrast);border-radius:9px;font-size:10px;color:var(--contrast);background:var(--accent-blue)}@media only screen and (max-width: 1024px){.unread-messages[_ngcontent-%COMP%]{top:25px;right:auto;left:29px}}.unread-messages.empty[_ngcontent-%COMP%]{min-width:16px;height:16px}.switch-wrapper[_ngcontent-%COMP%]{padding:16px 0;border-top:1px solid var(--alt-40);background:var(--alt-80)}.switch-wrapper[_ngcontent-%COMP%]   .switch-box[_ngcontent-%COMP%]{margin:0 auto}.switch-wrapper[_ngcontent-%COMP%]   .interactable[_ngcontent-%COMP%]{display:none;color:var(--default-20)}@media only screen and (max-width: 1024px){.switch-wrapper[_ngcontent-%COMP%]{display:none}}.small-title[_ngcontent-%COMP%]{position:relative;left:1px;display:block;font-family:Poppins,sans-serif;color:var(--default-20);text-transform:uppercase;letter-spacing:2px;text-align:center}@media only screen and (max-width: 1024px){.small-title[_ngcontent-%COMP%]{left:0;font-weight:400;letter-spacing:0}}.dark-theme   [_nghost-%COMP%]{border-right:1px solid var(--alt-40);background:var(--nav-bar)}@media only screen and (max-width: 1024px){.dark-theme   [_nghost-%COMP%]{background-repeat:0}}.dark-theme[_nghost-%COMP%]   .dark-theme-logo[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .dark-theme-logo[_ngcontent-%COMP%]{display:block}.dark-theme[_nghost-%COMP%]   .light-theme-logo[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .light-theme-logo[_ngcontent-%COMP%]{display:none}.dark-theme[_nghost-%COMP%]   .navigation-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .navigation-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--contrast)}.dark-theme[_nghost-%COMP%]   .unread-messages[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .unread-messages[_ngcontent-%COMP%]{border:2px solid var(--nav-bar)}.dark-theme[_nghost-%COMP%]   .statistics[_ngcontent-%COMP%]   .streak-wrapper[_ngcontent-%COMP%]   .comet[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .statistics[_ngcontent-%COMP%]   .streak-wrapper[_ngcontent-%COMP%]   .comet[_ngcontent-%COMP%]{background-image:url(/assets/icons/comet-dark.svg)}.dark-theme[_nghost-%COMP%]   .small-title[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .small-title[_ngcontent-%COMP%]{color:var(--contrast)}']});let e=i;return e})();var xe=function(e){return e.Completed="Completed",e.Paused="Paused",e.PreviousStepSelected="PreviousStepSelected",e.NextStepSelected="NextStepSelected",e.StepSelectedManually="StepSelectedManually",e.PresetChanged="PresetChanged",e.CustomPresetUpdated="CustomPresetUpdated",e.NavigatedAway="NavigatedAway",e.EndedUnexpectedly="EndedUnexpectedly",e.EndedFromAnotherTab="EndedFromAnotherTab",e}(xe||{});var ur=function(e){return e[e.Start=1]="Start",e[e.End=2]="End",e}(ur||{});var gr=class{get activeStage(){return this.stages[this.widget.activeStep]}constructor(i,n,t,o,r,a){this.audio=i,this.widget=n,this.timerDisplayPipe=t,this.notificationService=o,this.sessionHelper=r,this.updateWidget=a,this.style={radius:80,strokeDashoffset:0,strokeDasharray:"",transformRotate:""},this.startMessage={action:ur.Start,duration:1e3},this.endMessage={action:ur.End},this.expectedEnd=pe.now(),this.stages=[],this.ticking=!1,this.timerIntervalRef=null,typeof Worker<"u"&&(this.worker=new Worker(new URL("worker-QLZPRMUE.js",import.meta.url),{type:"module"}))}start(){this.ticking||(this.ticking=!0,this.worker?(this.worker.onmessage=()=>this.tick(),this.worker.postMessage(this.startMessage)):this.timerIntervalRef=window.setInterval(()=>this.tick(),1e3),this.expectedEnd=pe.now().plus({seconds:this.widget.value}),this.isFocusSession()&&this.sessionHelper.start(this.widget.value))}stopIfRunning(i,n=!1){if(this.ticking){if(this.ticking=!1,this.worker)this.worker.postMessage(this.endMessage),this.worker.onmessage=null;else{if(!this.timerIntervalRef)return;window.clearInterval(this.timerIntervalRef),this.timerIntervalRef=null}this.notificationService.setTimerTitleText(),this.isFocusSession()&&!n&&this.sessionHelper.end(i)}}reset(){this.setValueAndUpdateVisualProgress(this.getActiveStageValue())}setValueAndUpdateVisualProgress(i){this.widget.value=i;let n=+(this.widget.value/this.getActiveStageValue()*100).toFixed(1),t=this.style.radius*2*Math.PI;this.style.strokeDashoffset=t-n/100*t,this.style.strokeDasharray=`${t} ${t}`,this.style.transformRotate=`rotate(${3.6*n}deg)`}resetPomodoroStages(){this.stages=[];for(let i=1;i<this.widget.focusSessions;i++)this.stages.push({stage:ee.PomodoroTimer},{stage:ee.ShortBreak});this.stages.push({stage:ee.PomodoroTimer},{stage:ee.LongBreak})}getActiveStageValue(){switch(this.activeStage.stage){case ee.PomodoroTimer:return this.widget.pomodoroTimer;case ee.LongBreak:return this.widget.longBreak;case ee.ShortBreak:return this.widget.shortBreak;default:return 0}}getActiveStageLabel(){switch(this.activeStage.stage){case ee.PomodoroTimer:return"Focus";case ee.LongBreak:return"Long Break";case ee.ShortBreak:return"Break";default:return""}}isFocusSession(){return this.activeStage.stage===ee.PomodoroTimer}tick(){if(this.widget.value>0){let i=Math.ceil(this.expectedEnd.diff(pe.now(),"seconds").seconds);this.setValueAndUpdateVisualProgress(Math.abs(i));let n=`${this.timerDisplayPipe.transform(this.widget.value,!0)} | `;this.notificationService.setTimerTitleText(n)}else this.complete(),this.notificationService.setTimerTitleText()}complete(){this.stopIfRunning(xe.Completed),this.audio.play();let i=this.widget.activeStep===this.stages.length-1;this.widget.activeStep=i?0:this.widget.activeStep+1,this.setValueAndUpdateVisualProgress(this.getActiveStageValue()),(!i||this.widget.loopPomodoro)&&this.start(),this.updateWidget()}};var fr=class{constructor(i,n,t){this.pomodoroSessionService=i,this.accountService=n,this.toastService=t,this.runningSessionId=null,this.errorCompletingSession=new Yi,this.queue=[]}start(i){if(!this.accountService.authenticated())return;let n=this.pomodoroSessionService.create(i).pipe(Ji(t=>{this.runningSessionId=t.id,this.next()}));this.push(n)}end(i){if(!this.accountService.authenticated())return;if(this.runningSessionId===null){console.log("[PomodoroSessionHelper]: runningSessionId is null");return}let n=this.pomodoroSessionService.complete(this.runningSessionId,i).pipe(Ji(()=>{this.runningSessionId=null,this.next()}));this.push(n)}push(i){this.queue.push(i),this.queue.length===1&&this.execute()}execute(){this.queue.length!==0&&this.queue[0].subscribe({error:i=>{i[0].errorCode==="EntityDoesNotExist"?(this.errorCompletingSession.next(i[0]),this.toastService.info({message:"This pomodoro session was somehow ended from another tab. Please screenshot this message and paste it into #bugs channel."})):this.toastService.error({exceptionDetail:i[0]}),this.next()}})}next(){this.queue.shift(),this.execute()}};function Cf(e,i){if(e&1){let n=w();s(0,"mat-dialog-content")(1,"div",0)(2,"h3"),p(3,"Pomodoro Settings"),c(),s(4,"ss-icon",1),C("click",function(){v(n);let o=d();return b(o.toggleHelp())}),c(),s(5,"ss-icon",2),C("click",function(){v(n);let o=d();return b(o.saveSettings())}),c(),s(6,"ss-icon",3),C("click",function(){v(n);let o=d();return b(o.onCancel())}),c()(),s(7,"div",4)(8,"div"),p(9,"Pomodoro Timer"),c(),s(10,"div")(11,"em"),p(12),Y(13,"number"),c(),p(14," mins"),c()(),s(15,"mat-slider",5)(16,"input",6),C("ngModelChange",function(o){v(n);let r=d();return b(r.onTimerSettingChange(o,r.PomodoroStageRef.PomodoroTimer))}),c()(),s(17,"div",4)(18,"div"),p(19,"Break duration"),c(),s(20,"div")(21,"em"),p(22),Y(23,"number"),c(),p(24," mins"),c()(),s(25,"mat-slider",5)(26,"input",6),C("ngModelChange",function(o){v(n);let r=d();return b(r.onTimerSettingChange(o,r.PomodoroStageRef.ShortBreak))}),c()(),s(27,"div",4)(28,"div"),p(29,"Focus sessions"),c(),s(30,"em"),p(31),c()(),s(32,"mat-slider",7)(33,"input",6),le("ngModelChange",function(o){v(n);let r=d();return ce(r.settings.focusSessions,o)||(r.settings.focusSessions=o),b(o)}),c()(),s(34,"mat-slide-toggle",8),le("ngModelChange",function(o){v(n);let r=d();return ce(r.settings.loopPomodoro,o)||(r.settings.loopPomodoro=o),b(o)}),p(35,"Loop pomodoros"),c(),s(36,"div",4)(37,"div"),p(38,"Long break duration"),c(),s(39,"div")(40,"em"),p(41),Y(42,"number"),c(),p(43," mins"),c()(),s(44,"mat-slider",5)(45,"input",6),C("ngModelChange",function(o){v(n);let r=d();return b(r.onTimerSettingChange(o,r.PomodoroStageRef.LongBreak))}),c()()()}if(e&2){let n=d();l(4),g("size",20),l(),g("size",20),l(),g("size",20),l(6),z(Dt(13,12,n.settings.pomodoroTimer/60,"1.0-0")),l(4),g("ngModel",n.settings.pomodoroTimer/60),l(6),z(Dt(23,15,n.settings.shortBreak/60,"1.0-0")),l(4),g("ngModel",n.settings.shortBreak/60),l(5),z(n.settings.focusSessions),l(2),ae("ngModel",n.settings.focusSessions),l(),ae("ngModel",n.settings.loopPomodoro),l(7),z(Dt(42,18,n.settings.longBreak/60,"1.0-0")),l(4),g("ngModel",n.settings.longBreak/60)}}function vf(e,i){if(e&1){let n=w();s(0,"mat-dialog-content")(1,"div",9)(2,"ss-icon",10),C("click",function(){v(n);let o=d();return b(o.toggleHelp())}),c(),s(3,"h3"),p(4,"Pomodoro Settings"),c()(),x(5,"div",11),s(6,"em"),p(7,"Focus time"),c(),s(8,"div",12),p(9,"The duration of the focus sessions."),c(),s(10,"em"),p(11,"Focus sessions"),c(),s(12,"div",12),p(13,"The number of focus sessions per each pomodoro cycle."),c(),s(14,"em"),p(15,"Loop pomodoros"),c(),s(16,"div",12),p(17,"Automatically repeat the entire pomodoro cycle, transitioning back to the first focus session after a long break."),c(),s(18,"em"),p(19,"Long break duration"),c(),s(20,"div",12),p(21,"The duration of the break after all sessions are complete."),c()()}e&2&&(l(2),g("size",20))}var Qd=(()=>{let i=class i{constructor(t,o){this.data=t,this.dialogRef=o,this.PomodoroStageRef=ee,this.showHelp=!1,this.settings=t}onCancel(){this.dialogRef.close(!1)}toggleHelp(){this.showHelp=!this.showHelp}onTimerSettingChange(t,o){this.setStageValue(o,t*60)}saveSettings(){this.dialogRef.close(this.settings)}setStageValue(t,o){switch(t){case ee.PomodoroTimer:this.settings.pomodoroTimer=o;break;case ee.LongBreak:this.settings.longBreak=o;break;case ee.ShortBreak:this.settings.shortBreak=o;break;default:break}}};i.\u0275fac=function(o){return new(o||i)(u(fi),u(Rn))},i.\u0275cmp=O({type:i,selectors:[["ss-pomodoro-settings-modal"]],standalone:!1,decls:2,vars:2,consts:[[1,"heading"],["role","button","iconName","question_circle","color","default-20",3,"click","size"],["role","button","iconName","checkmark","color","default-20",3,"click","size"],["role","button","iconName","dismiss","color","default-20",3,"click","size"],[1,"stage"],["step","1","tickInterval","60","min","1","max","60","aria-label","units"],["matSliderThumb","",3,"ngModelChange","ngModel"],["step","1","tickInterval","6","min","2","max","6","aria-label","units"],["labelPosition","before",3,"ngModelChange","ngModel"],[1,"heading","align-left"],["role","button","iconName","arrow_left","color","default-20",3,"click","size"],[1,"sessions-image"],[1,"explanation"]],template:function(o,r){o&1&&(h(0,Cf,46,21,"mat-dialog-content"),h(1,vf,22,1,"mat-dialog-content")),o&2&&(_(r.showHelp?-1:0),l(),_(r.showHelp?1:-1))},dependencies:[j,Hn,We,He,Vt,Da,io,no,Ys],styles:[".heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.heading.align-left[_ngcontent-%COMP%]{justify-content:flex-start}ss-icon[iconName=arrow_left][_ngcontent-%COMP%]{margin-right:16px}mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:20px}.stage[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}mat-slider[_ngcontent-%COMP%]{width:100%;height:21px;margin-bottom:16px!important}mat-slider[_ngcontent-%COMP%]:last-of-type{margin:0!important}.sessions-image[_ngcontent-%COMP%]{display:block;width:198px;height:80px;margin:0 auto 16px;background-image:url(/assets/images/pomodoro-sessions-light.png);background-position:center;background-repeat:no-repeat}em[_ngcontent-%COMP%], .explanation[_ngcontent-%COMP%]{color:var(--default)}.explanation[_ngcontent-%COMP%]{margin-bottom:12px}.dark-theme[_nghost-%COMP%]   .sessions-image[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .sessions-image[_ngcontent-%COMP%]{background-image:url(/assets/images/pomodoro-sessions-dark.png)}"]});let e=i;return e})();var Jd=(()=>{let i=class i{constructor(t){this.http=t,this.API_ENDPOINT=`${de.apiUrl}/user-pomodoro-sessions`}create(t){return this.http.post(this.API_ENDPOINT,{expectedDuration:t})}complete(t,o){return this.http.put(`${this.API_ENDPOINT}/${t}`,{endReason:o})}completeAndKeepAlive(t){fetch(`${this.API_ENDPOINT}/${t}`,{keepalive:!0,method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(zn)}`},body:JSON.stringify({endReason:xe.NavigatedAway})})}};i.\u0275fac=function(o){return new(o||i)(X(mi))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function yf(e,i){e&1&&(s(0,"h3"),p(1,"Pomodoro"),c())}function wf(e,i){if(e&1){let n=w();s(0,"div",1)(1,"h3"),p(2),c(),x(3,"div",33),Y(4,"timerDisplay"),Y(5,"trustHtml"),s(6,"ss-icon",4),C("click",function(){v(n);let o=d();return b(o.clock.ticking?o.pause():o.play())}),c()()}if(e&2){let n=d();l(),ze(pt("active-step ",n.getActiveStageClass())),l(),k(" ",n.clock.ticking?n.clock.getActiveStageLabel():"Paused"," "),l(),g("innerHTML",me(5,9,me(4,7,n.widget.value)),De),l(3),g("iconName",n.clock.ticking?"pause":"play")("size",16)}}function Pf(e,i){if(e&1){let n=w();s(0,"div",6)(1,"ss-icon",34),C("click",function(){v(n);let o=d();return b(o.toggleMute())}),c(),s(2,"mat-slider",35),C("mousedown",function(o){return v(n),b(o.stopPropagation())}),s(3,"input",36),C("ngModelChange",function(o){v(n);let r=d();return b(r.setVolume(o))}),c()()()}if(e&2){let n=d();l(),g("iconName",n.getSoundIcon())("size",20),l(2),g("ngModel",n.audio.volume)}}function Mf(e,i){if(e&1&&(s(0,"h3"),p(1),c(),x(2,"div",33),Y(3,"timerDisplay"),Y(4,"trustHtml")),e&2){let n=d();ze(pt("active-step ",n.getActiveStageClass())),l(),k(" ",n.clock.getActiveStageLabel()," "),l(),g("innerHTML",me(4,7,me(3,5,n.widget.value)),De)}}function Of(e,i){e&1&&(s(0,"div",14),p(1,"GO"),c())}function kf(e,i){if(e&1){let n=w();s(0,"div",38),C("click",function(){v(n);let o=d().$index,r=d();return b(r.skipToStep(o))}),c()}if(e&2){let n=d(),t=n.$implicit,o=n.$index,r=d();I("active",r.widget.activeStep===o)("passed",r.widget.activeStep>o&&r.widget.activeStep<r.clock.stages.length-1)("focus",t.stage===r.PomodoroStageRef.PomodoroTimer)("break",t.stage===r.PomodoroStageRef.ShortBreak)}}function Tf(e,i){if(e&1&&h(0,kf,1,8,"div",37),e&2){let n=i.$implicit,t=d();_(n.stage!==t.PomodoroStageRef.LongBreak?0:-1)}}var Xd=(()=>{let i=class i{beforeNavigatedAway(){this.clock.ticking&&(this.widgetsService.updatePomodoroTimerWidgetAndKeepAlive(this.widget),this.sessionHelper.runningSessionId&&this.pomodoroSessionService.completeAndKeepAlive(this.sessionHelper.runningSessionId))}onMouseDown(t){if(!this.showVolumeSlider)return;let o=t.target,r=document.querySelector(".volume-slider-wrapper"),a=o.closest(".volume-slider-wrapper"),m=o.closest(".volume-toggle-icon");r!==o&&a!==r&&!m&&(this.showVolumeSlider=!1)}constructor(t,o,r,a,m,f,S,y,P){this.dialog=t,this.widgetsService=o,this.pomodoroSessionService=r,this.analyticsService=a,this.accountService=m,this.toastService=f,this.notificationService=S,this.signalRService=y,this.timerDisplayPipe=P,this.toggleMinimizeClick=new Le,this.closeClick=new Le,this.audio=new Audio,this.PomodoroSessionEndReasonRef=xe,this.showVolumeSlider=!1,this.PomodoroStageRef=ee,this.presets=[{id:0,label:"Default",pomodoroTimer:1200,shortBreak:300,longBreak:600,focusSessions:3,autoTransition:!0,loopPomodoro:!1},{id:1,label:"Writing",pomodoroTimer:2400,shortBreak:600,longBreak:1200,focusSessions:3,autoTransition:!0,loopPomodoro:!1},{id:2,label:"Research",pomodoroTimer:3600,shortBreak:600,longBreak:1200,focusSessions:3,autoTransition:!0,loopPomodoro:!1},{id:3,label:"Custom"}],this.lastSetVolume=1,this.subscriptions=[],this.audio.src="/assets/audio/timer-done.mp3",this.audio.load()}ngOnInit(){this.sessionHelper=new fr(this.pomodoroSessionService,this.accountService,this.toastService),this.clock=new gr(this.audio,this.widget,this.timerDisplayPipe,this.notificationService,this.sessionHelper,this.updateWidget.bind(this)),this.clock.resetPomodoroStages(),this.subscriptions.push(this.sessionHelper.errorCompletingSession.subscribe(()=>this.clock.stopIfRunning(xe.EndedUnexpectedly,!0)),this.signalRService.pomodoroSessionStarted.subscribe(t=>{this.sessionHelper.runningSessionId!==t.id&&this.clock.stopIfRunning(xe.EndedFromAnotherTab,!0)}))}ngOnDestroy(){this.clock.stopIfRunning(xe.EndedUnexpectedly),this.subscriptions.forEach(t=>t.unsubscribe())}play(){this.clock.start()}pause(){this.clock.stopIfRunning(xe.Paused),this.updateWidget()}onPresetChange(t){if(t!==null){if(t===this.widget.preset){this.clock.setValueAndUpdateVisualProgress(this.widget.value);return}this.widget.preset=t,t!==3&&(this.widget.pomodoroTimer=this.presets[t].pomodoroTimer,this.widget.shortBreak=this.presets[t].shortBreak,this.widget.longBreak=this.presets[t].longBreak,this.widget.focusSessions=this.presets[t].focusSessions,this.widget.loopPomodoro=this.presets[t].loopPomodoro,this.clock.resetPomodoroStages(),this.widget.activeStep=0,this.clock.setValueAndUpdateVisualProgress(this.widget.pomodoroTimer)),this.clock.stopIfRunning(xe.Paused),setTimeout(()=>{document.activeElement.blur()}),this.updateWidget()}}next(){let t=this.clock.ticking;this.clock.stopIfRunning(xe.NextStepSelected);let o=this.widget.activeStep===this.clock.stages.length-1;this.widget.activeStep=o?0:this.widget.activeStep+1,this.clock.setValueAndUpdateVisualProgress(this.clock.getActiveStageValue()),t&&(!o||this.widget.loopPomodoro)&&this.clock.start(),this.updateWidget()}previous(){let t=this.clock.ticking;this.clock.stopIfRunning(xe.PreviousStepSelected);let o=this.widget.activeStep===0;this.clock.getActiveStageValue()-this.widget.value>3||(this.widget.activeStep=o?0:this.widget.activeStep-1),this.clock.setValueAndUpdateVisualProgress(this.clock.getActiveStageValue()),t&&this.clock.start(),this.updateWidget()}skipToStep(t){let o=this.clock.ticking;this.clock.stopIfRunning(xe.StepSelectedManually),this.widget.activeStep===t||(this.widget.activeStep=t),this.clock.setValueAndUpdateVisualProgress(this.clock.getActiveStageValue()),o&&this.clock.start(),this.updateWidget()}openPomodoroSettings(){this.dialog.open(Qd,{width:"300px",autoFocus:!1,panelClass:"pomodoro-settings-modal",data:{pomodoroTimer:this.widget.pomodoroTimer,shortBreak:this.widget.shortBreak,longBreak:this.widget.longBreak,loopPomodoro:this.widget.loopPomodoro,focusSessions:this.widget.focusSessions}}).afterClosed().subscribe(o=>{o&&(this.clock.stopIfRunning(xe.PresetChanged),this.widget.preset=3,this.widget.pomodoroTimer=o.pomodoroTimer,this.widget.shortBreak=o.shortBreak,this.widget.longBreak=o.longBreak,this.widget.loopPomodoro=o.loopPomodoro,this.widget.focusSessions=o.focusSessions,this.widget.activeStep=0,this.clock.setValueAndUpdateVisualProgress(this.widget.pomodoroTimer),this.clock.resetPomodoroStages(),this.updateWidget())})}toggleVolumeSlider(){this.showVolumeSlider=!this.showVolumeSlider}toggleMute(){this.audio.volume?(this.lastSetVolume=this.audio.volume,this.audio.volume=0):this.audio.volume=this.lastSetVolume||1}toggleMinimize(){this.toggleMinimizeClick.next()}hide(){this.analyticsService.fireEvent(Te.Click,ke.Button,"close pomodoro"),this.closeClick.next()}isTimerInStartingPoint(){return this.widget.activeStep===0&&!this.clock.ticking&&this.clock.getActiveStageValue()===this.widget.value}setVolume(t){t!==null&&(this.audio.volume=t)}getSoundIcon(){return this.audio.volume===0?"speaker_0":this.audio.volume===1?"speaker_2":"speaker_1"}getActiveStageClass(){switch(this.clock.activeStage.stage){case ee.PomodoroTimer:return"pomodoro-timer";case ee.LongBreak:return"long-break";case ee.ShortBreak:return"short-break";default:return""}}updateWidget(){this.accountService.authenticated()?this.widgetsService.updatePomodoroTimerWidget(this.widget).subscribe({error:t=>this.handleErrors(t)}):this.widgetsService.localWidgetsUpdated.next()}handleErrors(t){this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(Ce),u(Mi),u(Jd),u(oe),u(T),u(V),u(zt),u(Ge),u(nn))},i.\u0275cmp=O({type:i,selectors:[["ss-pomodoro-timer"]],hostVars:2,hostBindings:function(o,r){o&1&&C("beforeunload",function(){return r.beforeNavigatedAway()},Xi)("mousedown",function(m){return r.onMouseDown(m)},wn),o&2&&I("minimized",r.minimized)},inputs:{widget:"widget",minimized:"minimized"},outputs:{toggleMinimizeClick:"toggleMinimizeClick",closeClick:"closeClick"},standalone:!1,features:[Mn([nn])],decls:43,vars:45,consts:[[1,"header"],[1,"minimized-info"],[1,"actions"],["role","button",1,"volume-toggle-icon",3,"click","iconName","size","color"],["role","button","color","default-40",3,"click","iconName","size"],["role","button","iconName","line_horizontal_1","color","default-40",3,"click","iconVariant","size"],[1,"volume-slider-wrapper"],[1,"select-wrapper"],["id","type","name","type","placeholder","Presets","panelClass","small-select","labelProperty","label","valueProperty","id",3,"ngModelChange","ngModel","options","small","noMargin"],["role","button","iconName","settings","color","default-40",3,"click","size"],[1,"timer-wrapper"],["role","button","iconName","previous","color","default-60",3,"click","size"],[1,"circle-shadow"],[1,"timer-info"],[1,"counter","start"],["role","button","color","default-60",3,"click","iconName","size"],[1,"progress-ring"],["id","pomodoro-timer","x1","0%","y1","0%","x2","100%","y2","0%"],["offset","8%","stop-color","#5145a2"],["offset","76%","stop-color","#fe5d8214"],["id","short-break","x1","0%","y1","0%","x2","90%","y2","0"],["offset","0%",2,"stop-color","rgb(98,177,111)","stop-opacity","1.00"],["offset","100%",2,"stop-color","rgb(15,111,59)","stop-opacity","0.00"],["id","long-break","x1","0%","y1","0%","x2","100%","y2","0"],["offset","0%",2,"stop-color","#EB5C7D","stop-opacity","1.00"],["offset","100%",2,"stop-color","#CA61A0","stop-opacity","0.00"],["id","small-circle","x1","0%","y1","0%","x2","100%","y2","0%","gradientTransform","rotate(10)"],["offset","0%","stop-color","#fe85a1"],["offset","100%","stop-color","#7d73b9"],["stroke-width","5","fill","transparent","cx","90","cy","90",1,"progress-ring-circle-white"],["stroke-width","5","fill","transparent","cx","90","cy","90",1,"progress-ring-circle"],["cx","90","cy","5.8%","r","7","fill","white","stroke","url(#small-circle)","stroke-width","2"],["role","button","iconName","next","color","default-60",3,"click","size"],[1,"counter",3,"innerHTML"],["role","button",3,"click","iconName","size"],["step","0.1","tickInterval","10","min","0","max","1","aria-label","units",3,"mousedown"],["matSliderThumb","",3,"ngModelChange","ngModel"],[3,"active","passed","focus","break"],[3,"click"]],template:function(o,r){o&1&&(s(0,"div",0),h(1,yf,2,0,"h3"),h(2,wf,7,11,"div",1),s(3,"div",2)(4,"ss-icon",3),C("click",function(){return r.toggleVolumeSlider()}),c(),s(5,"ss-icon",4),C("click",function(){return r.toggleMinimize()}),c(),s(6,"ss-icon",5),C("click",function(){return r.hide()}),c()()(),h(7,Pf,4,3,"div",6),s(8,"div",7)(9,"ss-select",8),C("ngModelChange",function(m){return r.onPresetChange(m)}),c(),s(10,"ss-icon",9),C("click",function(){return r.openPomodoroSettings()}),c()(),s(11,"div",10)(12,"ss-icon",11),C("click",function(){return r.previous()}),c(),s(13,"div",12)(14,"div")(15,"div",13),h(16,Mf,5,9),h(17,Of,2,0,"div",14),s(18,"ss-icon",15),C("click",function(){return r.clock.ticking?r.pause():r.play()}),c()(),Ws(),s(19,"svg",16)(20,"defs")(21,"linearGradient",17),x(22,"stop",18)(23,"stop",19),c()(),s(24,"defs")(25,"linearGradient",20),x(26,"stop",21)(27,"stop",22),c()(),s(28,"defs")(29,"linearGradient",23),x(30,"stop",24)(31,"stop",25),c()(),s(32,"defs")(33,"linearGradient",26),x(34,"stop",27)(35,"stop",28),c()(),x(36,"circle",29)(37,"circle",30)(38,"circle",31),c()()(),Hs(),s(39,"ss-icon",32),C("click",function(){return r.next()}),c()(),s(40,"div"),q(41,Tf,1,1,null,null,Et),c()),o&2&&(l(),_(r.minimized?-1:1),l(),_(r.minimized?2:-1),l(2),g("iconName",r.getSoundIcon())("size",20)("color",r.showVolumeSlider?"default":"default-40"),l(),g("iconName",r.minimized?"maximize":"arrow_minimize")("size",20),l(),g("iconVariant",20)("size",20),l(),_(r.showVolumeSlider?7:-1),l(),I("hide",r.minimized||r.showVolumeSlider),l(),g("ngModel",r.widget.preset)("options",r.presets)("small",!0)("noMargin",!0),l(),g("size",20),l(2),g("size",20),l(2),ze(pt("circle ",r.clock.ticking?"":r.getActiveStageClass())),l(2),_(r.isTimerInStartingPoint()?-1:16),l(),_(r.isTimerInStartingPoint()?17:-1),l(),g("iconName",r.clock.ticking?"pause":"play")("size",18),l(18),_e("stroke-dashoffset",r.clock.style.strokeDashoffset)("stroke-dasharray",r.clock.style.strokeDasharray),lt("r",r.clock.style.radius),l(),_e("stroke-dashoffset",r.clock.style.strokeDashoffset)("stroke-dasharray",r.clock.style.strokeDasharray),lt("stroke","url(#"+r.getActiveStageClass()+")")("r",r.clock.style.radius),l(),ze(pt("progress-pointer ",r.getActiveStageClass())),_e("transform",r.clock.style.transformRotate),l(),g("size",20),l(),ze(pt("progress-bar ",r.getActiveStageClass())),l(),K(r.clock.stages))},dependencies:[j,qn,Hn,We,He,io,no,nn,go],styles:['[_nghost-%COMP%]{position:relative;width:300px;padding:16px 24px 15px;border:1.5px solid var(--alt);border-radius:20px;color:var(--default);background:var(--widget-default);text-align:center;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.minimized[_nghost-%COMP%]{padding:12px 18px}.minimized[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:7px}.minimized[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]{position:absolute;top:50px;left:50%;margin:0;transform:translate(-50%)}.minimized[_nghost-%COMP%]   .circle-shadow[_ngcontent-%COMP%]{display:none}.minimized[_nghost-%COMP%]   .volume-slider-wrapper[_ngcontent-%COMP%]{position:absolute;top:40px;z-index:1;width:calc(100% - 36px);margin:0;background:var(--grayscale)}.minimized[_nghost-%COMP%]   .volume-slider-wrapper[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{position:relative;z-index:1}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:move}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:2px}.minimized-info[_ngcontent-%COMP%]{display:flex;align-items:center}.minimized-info[_ngcontent-%COMP%]   .active-step[_ngcontent-%COMP%]{margin:0 8px 0 0}.minimized-info[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{display:flex;width:41px;margin-right:7px;font-size:14px;color:var(--default)}.actions[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{margin-right:15px}.actions[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]:last-child{margin-right:0}ss-select[_ngcontent-%COMP%]{flex:1;margin-right:7px}.volume-slider-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px 12px;margin:6px 0 13px;border:1px solid var(--alt);border-radius:8px}.volume-slider-wrapper[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{margin-right:16px}mat-slider[_ngcontent-%COMP%]{width:100%;height:21px;margin:13px 0 15px}.select-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.select-wrapper.hide[_ngcontent-%COMP%]{display:none}.timer-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.circle[_ngcontent-%COMP%], .circle-shadow[_ngcontent-%COMP%]{width:154px;height:154px;border-radius:50%}.circle-shadow[_ngcontent-%COMP%]{filter:drop-shadow(var(--inner-strong))}.circle[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;background:var(--container-2);transform:translate(-50%,-50%)}.circle.pomodoro-timer[_ngcontent-%COMP%]{box-shadow:var(--glow-purple)}.circle.pomodoro-timer[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%]{stroke:#fdfbfb}.circle.short-break[_ngcontent-%COMP%]{box-shadow:var(--glow-green)}.circle.short-break[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%]{stroke:#f6f9f8}.circle.long-break[_ngcontent-%COMP%]{box-shadow:var(--glow-pink)}.circle.long-break[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%]{stroke:#fbeaef}.timer-info[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;height:100%;text-align:center}.timer-info[_ngcontent-%COMP%]   .active-step[_ngcontent-%COMP%]{margin-top:30px}.timer-info[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{display:flex;margin-bottom:8px;font-size:38px;line-height:52px;color:var(--default);letter-spacing:3px}.timer-info[_ngcontent-%COMP%]   .counter.start[_ngcontent-%COMP%]{margin-top:35px;font-weight:700}.timer-info[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]     .digit{display:inline-block;width:27px}.active-step.start[_ngcontent-%COMP%], .active-step.pomodoro-timer[_ngcontent-%COMP%]{color:var(--accent-blurple)}.active-step.short-break[_ngcontent-%COMP%]{color:#6bc16d}.active-step.long-break[_ngcontent-%COMP%]{color:#eb5d7e}svg.progress-ring[_ngcontent-%COMP%]{position:absolute;top:-13px;left:-13px;width:180px;height:180px}.progress-pointer[_ngcontent-%COMP%]{transform-origin:50% 50%;transition:transform 1s linear}.progress-pointer.short-break[_ngcontent-%COMP%]{stroke:var(--positive-20)}.progress-pointer.long-break[_ngcontent-%COMP%]{stroke:#eb5d7e}.progress-pointer.no-transition[_ngcontent-%COMP%]{transition:none}.progress-ring-circle-white[_ngcontent-%COMP%], .progress-ring-circle[_ngcontent-%COMP%]{transform:rotate(-90deg);transition:stroke-dashoffset 1s linear;transform-origin:50% 50%}.progress-ring-circle-white.no-transition[_ngcontent-%COMP%], .progress-ring-circle.no-transition[_ngcontent-%COMP%]{transition:none}.progress-bar[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;margin-top:20px}.progress-bar[_ngcontent-%COMP%]   .focus[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%]   .break[_ngcontent-%COMP%]{cursor:pointer}.progress-bar[_ngcontent-%COMP%]   .focus[_ngcontent-%COMP%]:hover, .progress-bar[_ngcontent-%COMP%]   .break[_ngcontent-%COMP%]:hover{opacity:.7}.progress-bar[_ngcontent-%COMP%]   .focus[_ngcontent-%COMP%]{width:13px;height:13px;border-radius:50%;background:var(--accent-blurple-80)}.progress-bar[_ngcontent-%COMP%]   .focus.active[_ngcontent-%COMP%]{position:relative}.progress-bar[_ngcontent-%COMP%]   .focus.active[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:13px;height:13px;border:3px solid #5b4fa7;border-radius:50%;background:var(--widget-default);transform:translate(-50%,-50%)}.progress-bar[_ngcontent-%COMP%]   .focus.passed[_ngcontent-%COMP%]{background:#5b4fa7}.progress-bar[_ngcontent-%COMP%]   .break[_ngcontent-%COMP%]{width:15px;height:1px;background-image:url(/assets/images/dashed-light.png)}.progress-bar[_ngcontent-%COMP%]   .break.active[_ngcontent-%COMP%]{position:relative}.progress-bar[_ngcontent-%COMP%]   .break.active[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:50%;height:1px;background:var(--positive)}.progress-bar[_ngcontent-%COMP%]   .break.passed[_ngcontent-%COMP%]{border-top:1px solid var(--positive)}.progress-bar.pomodoro-timer[_ngcontent-%COMP%]   .break.passed[_ngcontent-%COMP%]{border-top:1px solid #5b4fa7}.progress-bar.short-break[_ngcontent-%COMP%]   .focus.passed[_ngcontent-%COMP%]{background:var(--positive)}.progress-bar.long-break[_ngcontent-%COMP%]{position:relative}.progress-bar.long-break[_ngcontent-%COMP%]   .focus[_ngcontent-%COMP%]{position:relative;z-index:1}.progress-bar.long-break[_ngcontent-%COMP%]:before, .progress-bar.long-break[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-3px;left:-3px;width:19px;height:19px;border-radius:50%;background:url(/assets/images/elipse-timer-light.png) no-repeat}.progress-bar.long-break[_ngcontent-%COMP%]:after{right:-3px;left:auto;transform:rotate(180deg)}  .dark-theme .mat-mdc-option.mat-selected:not(.mat-option-multiple){background:var(--alt-40)!important}  .dark-theme .mat-mdc-option:not(.mat-option-disabled):hover:not(.mat-option-disabled){background:var(--alt-40)!important}.dark-theme[_nghost-%COMP%]   .timer-info[_ngcontent-%COMP%]   .active-step.long-break[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .timer-info[_ngcontent-%COMP%]   .active-step.long-break[_ngcontent-%COMP%]{color:#fe85a1}.dark-theme[_nghost-%COMP%]   .circle.long-break[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .circle.long-break[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%]{stroke:#383544}.dark-theme[_nghost-%COMP%]   .circle.short-break[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .circle.short-break[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%]{stroke:#0f6f3b42}.dark-theme[_nghost-%COMP%]   .circle.pomodoro-timer[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .circle.pomodoro-timer[_ngcontent-%COMP%]   .progress-ring-circle-white[_ngcontent-%COMP%]{stroke:none}.dark-theme[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .focus[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .focus[_ngcontent-%COMP%]{background:var(--accent-blurple-80)}.dark-theme[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .focus.active[_ngcontent-%COMP%]:after, .dark-theme   [_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .focus.active[_ngcontent-%COMP%]:after{border:3px solid #958fcc}.dark-theme[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .focus.passed[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .focus.passed[_ngcontent-%COMP%]{background:#958fcc}.dark-theme[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .break[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .break[_ngcontent-%COMP%]{background-image:url(/assets/images/dashed-dark.png)}.dark-theme[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .break.passed[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .break.passed[_ngcontent-%COMP%]{border-top:1px solid #65b272}.dark-theme[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .break.active[_ngcontent-%COMP%]:after, .dark-theme   [_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .break.active[_ngcontent-%COMP%]:after{background:#65b272}.dark-theme[_nghost-%COMP%]   .progress-bar.pomodoro-timer[_ngcontent-%COMP%]   .break.passed[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .progress-bar.pomodoro-timer[_ngcontent-%COMP%]   .break.passed[_ngcontent-%COMP%]{border-top:1px solid #958fcc}.dark-theme[_nghost-%COMP%]   .progress-bar.short-break[_ngcontent-%COMP%]   .focus.passed[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .progress-bar.short-break[_ngcontent-%COMP%]   .focus.passed[_ngcontent-%COMP%]{background:#65b272}.dark-theme[_nghost-%COMP%]   .progress-bar.long-break[_ngcontent-%COMP%]:before, .dark-theme   [_nghost-%COMP%]   .progress-bar.long-break[_ngcontent-%COMP%]:before, .dark-theme[_nghost-%COMP%]   .progress-bar.long-break[_ngcontent-%COMP%]:after, .dark-theme   [_nghost-%COMP%]   .progress-bar.long-break[_ngcontent-%COMP%]:after{background:url(/assets/images/elipse-timer-dark.png) no-repeat}@media only screen and (max-width: 1024px){  .ios .timer-wrapper{position:relative;margin-left:-28px}  .ios .timer-wrapper ss-icon[iconname=previous]{position:relative;left:28px}  .ios .circle-shadow{margin-right:-28px}  .ios .circle{transform:translate(-41%,-50%)}  .ios .progress-bar{margin-top:53px}}.safari[_nghost-%COMP%]   .timer-wrapper[_ngcontent-%COMP%], .safari   [_nghost-%COMP%]   .timer-wrapper[_ngcontent-%COMP%]{position:relative;margin-left:-28px}.safari[_nghost-%COMP%]   .timer-wrapper[_ngcontent-%COMP%]   ss-icon[iconname=previous][_ngcontent-%COMP%], .safari   [_nghost-%COMP%]   .timer-wrapper[_ngcontent-%COMP%]   ss-icon[iconname=previous][_ngcontent-%COMP%]{position:relative;left:28px}.safari[_nghost-%COMP%]   .timer-wrapper[_ngcontent-%COMP%]   .circle-shadow[_ngcontent-%COMP%], .safari   [_nghost-%COMP%]   .timer-wrapper[_ngcontent-%COMP%]   .circle-shadow[_ngcontent-%COMP%]{margin-right:-28px}.safari[_nghost-%COMP%]   .timer-wrapper[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .safari   [_nghost-%COMP%]   .timer-wrapper[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{transform:translate(-41%,-50%)}.safari[_nghost-%COMP%]   .progress-bar.progress-bar[_ngcontent-%COMP%], .safari   [_nghost-%COMP%]   .progress-bar.progress-bar[_ngcontent-%COMP%]{margin-top:53px}']});let e=i;return e})(),ee=function(e){return e.PomodoroTimer="PomodoroTimer",e.ShortBreak="ShortBreak",e.LongBreak="LongBreak",e}(ee||{});function If(e,i){if(e&1){let n=w();s(0,"button",10),C("click",function(){let o=v(n).$implicit,r=d(2);return b(r.disableNotifications(o.seconds))}),s(1,"span"),p(2),c()()}if(e&2){let n=i.$implicit;l(2),z(n.displayString)}}function Rf(e,i){if(e&1&&(s(0,"h4",8),p(1,"Disable notifications for:"),c(),q(2,If,3,1,"button",9,Et)),e&2){let n=d();l(2),K(n.muteTimespans)}}function Af(e,i){if(e&1){let n=w();s(0,"div",7)(1,"h4",8),p(2),Y(3,"date"),c(),s(4,"button",10),C("click",function(){v(n);let o=d();return b(o.enableNotifications())}),s(5,"span"),p(6,"Enable notifications now"),c()()()}if(e&2){let n=d();l(2),k(" Notifications disabled until ",Dt(3,1,n.notificationsDisabledUntil,"hh:mm a")," ")}}var Zd=(()=>{let i=class i{get notificationsDisabled(){return!!this.notificationsDisabledUntil&&new Date<new Date(this.notificationsDisabledUntil)}get notificationsDisabledUntil(){return this.accountService.currentUser.notificationsDisabledUntil}constructor(t,o,r){this.accountService=t,this.accountModalsService=o,this.toastService=r,this.muteTimespans=[{displayString:"30m",seconds:1800},{displayString:"1h",seconds:3600},{displayString:"2h",seconds:7200},{displayString:"6h",seconds:21600},{displayString:"12h",seconds:43200}]}disableNotifications(t){this.accountService.disableNotifications(t).subscribe({next:()=>this.toastService.success({message:"Disabled notifications"}),error:o=>this.handleErrors(o)})}enableNotifications(){this.accountService.enableNotifications().subscribe({next:()=>this.toastService.success({message:"Enabled notifications"}),error:t=>this.handleErrors(t)})}shouldOpenMenu(t){if(!this.accountModalsService.ensureUserCompletedBasicInfo()){t.closeMenu();return}}handleErrors(t){this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(T),u(Ft),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-quiet-mode-button"]],standalone:!1,decls:9,vars:7,consts:[["matMenuTrigger","matMenuTrigger"],["menu","matMenu"],["matTooltip","Use this 'Quiet Mode' to let others know that you won't receive chat notifications while you are working","mat-icon-button","",1,"top-menu-item","top-menu-button",3,"click","matMenuTriggerFor"],[1,"prohibited-alert"],["iconName","prohibited","color","accent-blue-20",3,"size"],["iconName","alert","color","accent-blue-20",3,"size"],[1,"mute-notification-menu"],[1,"notifications-disabled-menu"],[1,"mute-menu-title"],["mat-menu-item",""],["mat-menu-item","",3,"click"]],template:function(o,r){if(o&1){let a=w();s(0,"button",2,0),C("click",function(){v(a);let f=Fe(1);return b(r.shouldOpenMenu(f))}),s(2,"div",3),x(3,"ss-icon",4)(4,"ss-icon",5),c()(),s(5,"mat-menu",6,1),h(7,Rf,4,0),h(8,Af,7,4,"div",7),c()}if(o&2){let a=Fe(6);g("matMenuTriggerFor",a),l(3),I("prohibited-frame-transparent",!r.notificationsDisabled),g("size",43),l(),g("size",22),l(3),_(r.notificationsDisabled?-1:7),l(),_(r.notificationsDisabled?8:-1)}},dependencies:[j,eo,Zn,to,Pa,$e,kn],styles:[".notifications-disabled-menu[_ngcontent-%COMP%]{width:350px}.mute-menu-title[_ngcontent-%COMP%]{padding:16px 16px 0}.prohibited-alert[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.prohibited-alert[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:absolute;inset:auto;display:flex;justify-content:center;align-items:center;width:100%;height:100%}.prohibited-alert[_ngcontent-%COMP%]   .prohibited-frame-transparent[_ngcontent-%COMP%]{opacity:.3}"]});let e=i;return e})();function Vf(e,i){if(e&1){let n=w();s(0,"ss-conversation-list",4),C("startChatDmTray",function(){v(n);let o=d();return b(o.activeView=o.DmViewRef.CreateGroup)})("chatId",function(o){v(n);let r=d();return b(r.chatIdChange(o))}),c()}e&2&&g("isDmTray",!0)}function Uf(e,i){if(e&1){let n=w();s(0,"ss-chat",5),C("closeDmTray",function(){v(n);let o=d();return b(o.closeDmTray.emit())})("backToMessageList",function(){v(n);let o=d();return b(o.backToMessageList())})("addParticipantDmTray",function(o){v(n);let r=d();return b(r.addParticipant(o))}),c()}if(e&2){let n=d();g("chatId",n.chatId)("isDmTray",!0)}}function Nf(e,i){if(e&1){let n=w();s(0,"ss-create-group",6),C("backToMessageList",function(){v(n);let o=d();return b(o.backToMessageList())})("navigateToChatDmTray",function(o){v(n);let r=d();return b(r.chatIdChange(o))}),c()}if(e&2){let n=d();g("isDmTray",!0)("userToAddId",n.userToAddId)}}function Bf(e,i){if(e&1){let n=w();s(0,"ss-group-manage-users-panel",7),C("backToDmChat",function(o){v(n);let r=d();return b(r.chatIdChange(o))})("backToMessageList",function(){v(n);let o=d();return b(o.backToMessageList())}),c()}if(e&2){let n=d();g("isDmTray",!0)("chat",n.chat)}}var ep=(()=>{let i=class i{get chatViewClass(){return this.activeView===et.Chat}get audioPodInvitesInCurrentToasts(){return this.toastService.audioPodInvitesInCurrentToasts()}constructor(t,o){this.utilityService=t,this.toastService=o,this.closeDmTray=new Le,this.DmViewRef=et}chatIdChange(t){this.chatId=t,this.activeView=et.Chat}addParticipant(t){this.chat=t,this.activeView=et.ManageGroup}backToMessageList(){this.activeView=et.ChatList}};i.\u0275fac=function(o){return new(o||i)(u(Me),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-dm-tray"]],hostVars:4,hostBindings:function(o,r){o&2&&I("chat-view",r.chatViewClass)("on-top",r.audioPodInvitesInCurrentToasts)},inputs:{activeView:"activeView",chatId:"chatId",userToAddId:"userToAddId"},outputs:{closeDmTray:"closeDmTray"},standalone:!1,decls:4,vars:4,consts:[[3,"isDmTray"],[3,"chatId","isDmTray"],[3,"isDmTray","userToAddId"],[3,"isDmTray","chat"],[3,"startChatDmTray","chatId","isDmTray"],[3,"closeDmTray","backToMessageList","addParticipantDmTray","chatId","isDmTray"],[3,"backToMessageList","navigateToChatDmTray","isDmTray","userToAddId"],[3,"backToDmChat","backToMessageList","isDmTray","chat"]],template:function(o,r){o&1&&(h(0,Vf,1,1,"ss-conversation-list",0),h(1,Uf,1,2,"ss-chat",1),h(2,Nf,1,2,"ss-create-group",2),h(3,Bf,1,2,"ss-group-manage-users-panel",3)),o&2&&(_(r.activeView===r.DmViewRef.ChatList?0:-1),l(),_(r.activeView===r.DmViewRef.Chat?1:-1),l(),_(r.activeView===r.DmViewRef.CreateGroup?2:-1),l(),_(r.activeView===r.DmViewRef.ManageGroup?3:-1))},dependencies:[Dc,Uc,Nc,Bc],styles:["[_nghost-%COMP%]{display:flex;width:350px;height:500px;border-radius:16px;background:var(--grayscale);filter:drop-shadow(var(--inner-strong))}.chat-view[_nghost-%COMP%]{width:464px}.on-top[_nghost-%COMP%]{z-index:1002}@media only screen and (max-height: 670px){[_nghost-%COMP%]{height:calc(100% - 160px)}}[_nghost-%COMP%]   ss-conversation-list[_ngcontent-%COMP%]{overflow:auto;border-radius:16px}[_nghost-%COMP%]   ss-conversation-list[_ngcontent-%COMP%]     .conversation-wrapper, [_nghost-%COMP%]   ss-conversation-list[_ngcontent-%COMP%]     .chat-list{height:100%}[_nghost-%COMP%]   ss-chat[_ngcontent-%COMP%]{overflow:inherit;border-radius:16px}[_nghost-%COMP%]     ss-message-input-block .input-block{flex-direction:column}[_nghost-%COMP%]     ss-message-input-block .input-block .avatar-editor-wrapper{width:100%!important}"]});let e=i;return e})();var op=Vp(Up());var Pe=function(e){return e.FeedComment="FeedComment",e.FeedReaction="FeedReaction",e.FeedCommentReaction="FeedCommentReaction",e.LivekitUserStatusReaction="LivekitUserStatusReaction",e.PinReason="PinReason",e.Followed="Followed",e}(Pe||{});function Ff(e,i){e&1&&x(0,"mat-spinner",4)}function zf(e,i){if(e&1){let n=w();s(0,"ss-feed-item",6),C("react",function(o){v(n);let r=d(3);return b(r.onReactToFeedItem(o))}),c()}if(e&2){let n=d(3);g("feed",n.feedItem)("disableActivityModal",!0)("pinFeedItemEnabled",!1)("isNotificationFeedModal",!0)("isMobile",n.isMobile)}}function jf(e,i){if(e&1&&h(0,zf,1,5,"ss-feed-item",5),e&2){let n=d(2);_(n.feedItem?0:-1)}}function Wf(e,i){if(e&1&&(s(0,"mat-dialog-content"),h(1,Ff,1,0,"mat-spinner",4)(2,jf,1,1),c()),e&2){let n=d();l(),_(n.loading?1:2)}}var tp=(()=>{let i=class i{constructor(t,o,r,a,m){this.data=t,this.feedService=o,this.utilityService=r,this.accountService=a,this.toastService=m,this.loading=!0,this.isMobile=!1,this.subscriptions=[]}ngOnInit(){this.feedService.getFeedItemsByIds([this.data.feedItemId]).subscribe({next:t=>{this.feedItem=t[0],this.loading=!1,setTimeout(()=>{this.data.commentId&&this.feedItemComponent&&this.feedItemComponent.openCommentsAndScroll(this.data.commentId)})}}),this.subscriptions.push(this.utilityService.isMobile.subscribe(t=>this.isMobile=t))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onReactToFeedItem(t){let o=t.emoji.native||"";this.feedService.toggleReaction(t.feedItem.id,o).subscribe({next:r=>{let a=t.feedItem.reactions;this.utilityService.mapReactionToggled(r,a,o,this.accountService.currentUser.id)},error:r=>this.handleErrors(r)})}handleErrors(t){this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(fi),u(Ha),u(Me),u(T),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-feed-item-modal"]],viewQuery:function(o,r){if(o&1&&It(Co,5),o&2){let a;Rt(a=At())&&(r.feedItemComponent=a.first)}},standalone:!1,decls:6,vars:3,consts:[[1,"mat-header"],["mat-dialog-title",""],["mat-dialog-close","",1,"close-modal"],["iconName","dismiss","color","default-20",3,"size","iconVariant"],["diameter","30","strokeWidth","3"],[3,"feed","disableActivityModal","pinFeedItemEnabled","isNotificationFeedModal","isMobile"],[3,"react","feed","disableActivityModal","pinFeedItemEnabled","isNotificationFeedModal","isMobile"]],template:function(o,r){o&1&&(s(0,"div",0)(1,"h2",1),p(2,"Post"),c(),s(3,"button",2),x(4,"ss-icon",3),c()(),h(5,Wf,3,1,"mat-dialog-content")),o&2&&(l(4),g("size",20)("iconVariant",20),l(),_(r.loading?-1:5))},dependencies:[Co,j,An,hi,Vt,Nt],styles:["mat-spinner[_ngcontent-%COMP%]{margin:o auto}"]});let e=i;return e})();function $f(e,i){if(e&1){let n=w();s(0,"ss-user-popup",8),C("closePopup",function(){v(n);let o=d(2);return b(o.closePopup())}),c()}if(e&2){let n=d(2);g("userId",n.userPopupId)}}function Gf(e,i){if(e&1&&h(0,$f,1,1,"ss-user-popup",7),e&2){let n=d();_(n.userPopupId?0:-1)}}var ip=(()=>{let i=class i{constructor(t,o,r,a){this.sanitizer=t,this.accountService=o,this.router=r,this.dialog=a,this.popupOpened=!1,this.userPopupId=null}get isUnread(){return this.accountService.currentUser.lastNotificationReadDate===null||this.notification.date>this.accountService.currentUser.lastNotificationReadDate}ngOnInit(){this.formattedMessage=this.sanitizer.bypassSecurityTrustHtml(this.buildFormattedMessage())}onNameClick(t){let r=t.target.closest(".user-name");r?.dataset?.userId&&(t.stopPropagation(),this.openPopup(r.dataset.userId))}openPopup(t){this.popupOpened=!0,this.userPopupId=t}closePopup(){this.popupOpened=!1,this.userPopupId=null}onNotificationClick(){switch(this.notification.type){case Pe.FeedComment:case Pe.FeedReaction:case Pe.FeedCommentReaction:case Pe.LivekitUserStatusReaction:this.openFeedModal();break;case Pe.Followed:this.openFollowerManagementModal();break}}openFeedModal(){if(!this.notification.feedItemId)return;let t={feedItemId:this.notification.feedItemId};(this.notification.type===Pe.FeedComment||this.notification.type===Pe.FeedCommentReaction)&&this.notification.feedItemCommentId&&(t.commentId=this.notification.feedItemCommentId),this.dialog.open(tp,{panelClass:"fullscreen-dialog",width:"720px",data:t})}openFollowerManagementModal(){if(!this.accountService.currentUser.completedBasicInfo){this.router.navigate(["/basic-info"]);return}this.dialog.open(tc,{panelClass:["follower-management-modal","fullscreen-dialog"],width:"1133px"})}buildFormattedMessage(){let{type:t,totalUsers:o,latestUsers:r}=this.notification,a=r.map(P=>`<span class="user-name" data-user-id="${P.id}"><strong>${P.displayName}</strong></span>`),[m,f]=a,S=o-a.length,y=o===1?m:o===2?`${m} and ${f}`:`${m}, ${f} and <strong>${S} others</strong>`;switch(t){case Pe.FeedComment:return`${y} commented on your post.`;case Pe.FeedReaction:return`${y} reacted to your post.`;case Pe.FeedCommentReaction:return`${y} reacted to your comment.`;case Pe.LivekitUserStatusReaction:return`${y} reacted to your video tile message.`;case Pe.PinReason:return`${y} left you a pin reason.`;case Pe.Followed:return`${y} started following you.`;default:return"You have a new notification."}}};i.\u0275fac=function(o){return new(o||i)(u(En),u(T),u(Z),u(Ce))},i.\u0275cmp=O({type:i,selectors:[["ss-notification-item"]],inputs:{notification:"notification"},standalone:!1,decls:9,vars:16,consts:[["trigger","cdkOverlayOrigin"],["cdkOverlayOrigin","",1,"notification-item",3,"click"],[1,"content-wrapper"],["role","button",3,"click","avatarColor","avatarThumbUrl","initials","userId","showOnlineStatus","size"],[1,"content",3,"click","innerHTML"],[1,"date"],["cdkConnectedOverlay","","cdkConnectedOverlayBackdropClass","transparent",3,"backdropClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayDisableClose"],["cssClass","margin-horizontal",3,"userId"],["cssClass","margin-horizontal",3,"closePopup","userId"]],template:function(o,r){if(o&1){let a=w();s(0,"div",1,0),C("click",function(){return v(a),b(r.onNotificationClick())}),s(2,"div",2)(3,"ss-user-avatar",3),C("click",function(){return v(a),b(r.openPopup(r.notification.latestUsers[0].id))}),c(),s(4,"span",4),C("click",function(f){return v(a),b(r.onNameClick(f))}),c()(),s(5,"time",5),p(6),Y(7,"timeAgo"),c(),Be(8,Gf,1,1,"ng-template",6),C("backdropClick",function(){return v(a),b(r.closePopup())}),c()}if(o&2){let a=Fe(1);I("unread",r.isUnread),l(3),g("avatarColor",r.notification.latestUsers[0].avatarColor)("avatarThumbUrl",r.notification.latestUsers[0].avatarThumbUrl)("initials",r.notification.latestUsers[0].initials)("userId",r.notification.latestUsers[0].id)("showOnlineStatus",!1)("size",28),l(),g("innerHTML",r.formattedMessage,De),l(2),z(me(7,14,r.notification.date)),l(2),g("cdkConnectedOverlayOrigin",a)("cdkConnectedOverlayOpen",r.popupOpened)("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayDisableClose",!0)}},dependencies:[Si,yi,gi,ui,ec],styles:[".notification-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px;border-bottom:1px solid var(--alt-20);cursor:pointer}.notification-item.unread[_ngcontent-%COMP%]{background:var(--accent-blue-90)}.notification-item[_ngcontent-%COMP%]:hover{background:var(--alt-60)}.content-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}ss-user-avatar[_ngcontent-%COMP%]{margin-right:6px}.date[_ngcontent-%COMP%]{flex-shrink:0;margin-top:3px;margin-left:8px;color:var(--default-60);font-size:12px;line-height:16px}"]});let e=i;return e})();var Kf=["olderNotificationsLoader"],Yf=(e,i)=>i.id;function Qf(e,i){if(e&1){let n=w();s(0,"ss-button-small",10),C("buttonClick",function(){v(n);let o=d();return b(o.mute())}),p(1," Mute for 1 day "),c()}if(e&2){let n=d();g("color",n.ButtonColorRef.Secondary)("isLoading",n.loadingMute)}}function Jf(e,i){if(e&1){let n=w();s(0,"ss-button-small",10),C("buttonClick",function(){v(n);let o=d();return b(o.unmute())}),p(1," Unmute "),c()}if(e&2){let n=d();g("color",n.ButtonColorRef.Secondary)("isLoading",n.loadingUnmute)}}function Xf(e,i){if(e&1&&x(0,"ss-notification-item",6),e&2){let n=i.$implicit;g("notification",n)}}function Zf(e,i){e&1&&(s(0,"div",7),p(1,"You have no new notifications."),c())}function eh(e,i){e&1&&x(0,"mat-spinner",9)}var rp=(()=>{let i=class i{get showMute(){let t=this.accountService.currentUser.notificationsCountHiddenUntil;return t===null||pe.fromISO(t)<pe.now()}constructor(t,o,r,a){this.accountService=t,this.notificationService=o,this.signalRService=r,this.toastService=a,this.notifications=[],this.loading=!1,this.loadedAllNotifications=!1,this.initialNotificationsLoaded=!1,this.loadingMute=!1,this.loadingUnmute=!1,this.ButtonColorRef=Lt,this.subscriptions=[],this.intersectionObserver=new IntersectionObserver(m=>{m[0].isIntersecting&&this.initialNotificationsLoaded&&!this.loadedAllNotifications&&!this.loading&&this.loadMoreNotifications()},{threshold:[0]})}ngOnInit(){this.loadMoreNotifications(),this.subscriptions.push(this.signalRService.notificationsUpserted.subscribe(t=>this.handleNotificationUpserted(t)),this.signalRService.notificationsDeleted.subscribe(t=>this.handleNotificationDeleted(t)))}ngAfterViewInit(){this.intersectionObserver.observe(this.olderNotificationsLoader.nativeElement)}ngOnDestroy(){if(this.notifications.length>0){let t=this.notifications[0].date;this.notificationService.updateLastNotificationReadDate(t).subscribe({next:()=>this.accountService.currentUser.lastNotificationReadDate=t,error:o=>this.handleErrors(o)})}Wn(this.intersectionObserver,this.olderNotificationsLoader?.nativeElement),this.subscriptions.forEach(t=>t.unsubscribe())}mute(){this.loadingMute=!0,this.accountService.disableNotificationsTray(24*60*60).subscribe({next:()=>this.loadingMute=!1,error:t=>this.handleErrors(t)})}unmute(){this.loadingUnmute=!0,this.accountService.enableNotificationsTray().subscribe({next:()=>this.loadingUnmute=!1,error:t=>this.handleErrors(t)})}loadMoreNotifications(){this.loading=!0;let t=this.notifications.length>0?this.notifications[this.notifications.length-1].date:null;this.notificationService.getNotifications(t).subscribe({next:o=>{this.notifications.push(...o.notifications),this.loadedAllNotifications=o.notifications.length<oa,this.loading=!1,this.initialNotificationsLoaded=!0},error:o=>this.handleErrors(o)})}handleNotificationUpserted(t){this.notificationService.getNotificationByIds(t).subscribe({next:o=>{let r=0;for(let a of o){let m=this.notifications.findIndex(S=>S.id===a.id);if(m===-1){this.notifications.push(a),r++;continue}let f=this.notifications[m].date<=this.accountService.currentUser.lastNotificationReadDate;this.notifications[m]=a,f&&r++}this.notifications.sort((0,op.firstBy)(a=>a.date,{direction:"desc"})),r!==0&&(this.notificationService.unreadNotificationsCount+=r,this.notificationService.unreadNotificationsCount>this.notifications.length&&this.getUnreadCount())}})}getUnreadCount(){this.notificationService.getUnreadCount().subscribe({next:t=>this.notificationService.unreadNotificationsCount=t,error:t=>this.handleErrors(t)})}handleNotificationDeleted(t){this.notifications=this.notifications.filter(o=>!t.includes(o.id))}handleErrors(t){this.loading=!1,this.initialNotificationsLoaded=!0,this.loadingMute=!1,this.loadingUnmute=!1,this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(T),u(zt),u(Ge),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-notification-center"]],viewQuery:function(o,r){if(o&1&&It(Kf,5),o&2){let a;Rt(a=At())&&(r.olderNotificationsLoader=a.first)}},standalone:!1,decls:14,vars:5,consts:[["olderNotificationsLoader",""],[1,"header"],[1,"left"],["color","gradient-20","iconName","alert_urgent",1,"section-title-icon",3,"iconVariant","size"],[3,"color","isLoading"],[1,"notifications-list"],[3,"notification"],[1,"empty-message"],[1,"notifications-loader-spinner"],["diameter","30","strokeWidth","3"],[3,"buttonClick","color","isLoading"]],template:function(o,r){o&1&&(s(0,"div",1)(1,"div",2),x(2,"ss-icon",3),s(3,"h4"),p(4,"Notifications"),c()(),h(5,Qf,2,2,"ss-button-small",4)(6,Jf,2,2,"ss-button-small",4),c(),s(7,"div",5),q(8,Xf,1,1,"ss-notification-item",6,Yf),h(10,Zf,2,0,"div",7),s(11,"div",8,0),h(13,eh,1,0,"mat-spinner",9),c()()),o&2&&(l(2),g("iconVariant",24)("size",24),l(3),_(r.showMute?5:6),l(3),K(r.notifications),l(2),_(!r.loading&&r.notifications.length===0?10:-1),l(3),_(r.loadedAllNotifications?-1:13))},dependencies:[j,Ci,Nt,ip],styles:["[_nghost-%COMP%]{position:absolute;top:56px;right:70px;z-index:7;width:380px;height:500px;overflow:auto;border-radius:16px;background:var(--grayscale);filter:drop-shadow(var(--inner-strong))}@media only screen and (max-width: 1279px){[_nghost-%COMP%]{right:107px}}@media only screen and (max-width: 1024px){[_nghost-%COMP%]{height:508px}}@media only screen and (max-width: 479px){[_nghost-%COMP%]{right:auto;left:0;width:100%;max-height:70vh;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){[_nghost-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}[_nghost-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}[_nghost-%COMP%]::-webkit-scrollbar{width:8px;height:8px}}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:40px;padding:0 16px 0 18px;box-shadow:var(--elevation-s1-bottom-only);background:var(--alt-60)}.header[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{margin-right:6px}.header[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center}.empty-message[_ngcontent-%COMP%], .notifications-loader-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:12px}"]});let e=i;return e})();var oh=(e,i)=>({x:e,y:i});function rh(e,i){if(e&1){let n=w();s(0,"div",1),x(1,"div",25),Y(2,"trustHtml"),s(3,"ss-icon",26),C("click",function(){v(n);let o=d();return b(o.settingsService.settings.systemStatusMessage=null)}),c()()}if(e&2){let n=d();l(),g("innerHTML",me(2,2,n.settingsService.settings.systemStatusMessage),De),l(2),g("size",22)}}function sh(e,i){if(e&1){let n=w();s(0,"div",2)(1,"div",27)(2,"div"),p(3,"Attempting to reconnect\u2026 If this message doesn't disappear, "),s(4,"a",28),C("click",function(){v(n);let o=d();return b(o.reloadPage())}),p(5,"click here to refresh"),c(),p(6,"."),c()()()}}function ah(e,i){if(e&1&&x(0,"ss-sidebar",31),e&2){let n=d(2);I("ads-shown",!n.subscriptionService.adsDisabled),g("expandedSidebar",n.sidebarExpanded&&!n.isMobile)("hundredMsInitialized",n.hundredMsInitialized)}}function ch(e,i){if(e&1){let n=w();s(0,"div",3),h(1,ah,1,4,"ss-sidebar",29),s(2,"ss-icon",30),C("click",function(){v(n);let o=d();return b(o.toggleSidebarExpandedState())}),c()()}if(e&2){let n=d();l(),_(n.isMobile&&n.isFocusRoom?-1:1),l(),I("collapsed",!n.sidebarExpanded),g("matTooltip",n.sidebarExpanded?"Collapse":"Expand")("size",14)}}function lh(e,i){if(e&1){let n=w();s(0,"ss-button",32),C("buttonClick",function(){v(n);let o=d();return b(o.subscriptionNavigationService.openPlansAndPricing(o.TriggeredUpgradeFromSourceRef.HeaderUpgradeButton))}),p(1),c()}if(e&2){let n=d();I("fix-payment",n.subscriptionService.issueWithStripePaymentExists),g("color",n.settingsService.isCoWork()?"primary":"blurple-20")("autoSize",!0),l(),k(" ",n.subscriptionService.issueWithStripePaymentExists?"Fix payment":"Upgrade"," ")}}function dh(e,i){if(e&1){let n=w();s(0,"ss-button",33),C("buttonClick",function(){v(n);let o=d();return b(o.startWorking())}),s(1,"div",34)(2,"span",35),p(3,"Start working"),c(),s(4,"span",36),p(5,"Focus+"),c()()()}if(e&2){let n=d();g("iconSize",28)("matTooltip",n.activeGroup!==null?"You can't use this feature while you're in a space.":"")("disabled",n.activeGroup!==null)}}function ph(e,i){e&1&&x(0,"ss-quiet-mode-button",8)}function mh(e,i){if(e&1){let n=w();s(0,"button",40),C("click",function(){v(n);let o=d(2);return b(o.downloadDesktopApp())}),x(1,"ss-icon",41),c()}e&2&&(l(),g("size",22))}function uh(e,i){if(e&1){let n=w();h(0,mh,2,1,"button",37),s(1,"button",38),C("click",function(){v(n);let o=d();return b(o.notificationService.displayNewFeatures())}),x(2,"ss-icon",39),c()}if(e&2){let n=d();_(!n.utilityService.isElectron()&&n.authenticated&&n.showDownloadAppButton?0:-1),l(2),g("size",22)}}function gh(e,i){if(e&1){let n=w();s(0,"button",42),C("click",function(){v(n);let o=d();return b(o.showTasks())}),x(1,"ss-icon",43),c()}e&2&&(l(),g("size",22))}function fh(e,i){if(e&1&&(s(0,"div",46)(1,"span"),p(2),c()()),e&2){let n=d(2);l(2),k(" ",n.notificationService.totalUnreadMessages>99?"99+":n.notificationService.totalUnreadMessages," ")}}function hh(e,i){if(e&1){let n=w();s(0,"button",44),C("click",function(){v(n);let o=d();return b(o.toggleDmTray())}),x(1,"ss-icon",45),h(2,fh,3,1,"div",46),c()}if(e&2){let n=d();I("active",n.dmTray.activeView),l(),g("size",22),l(),_(n.notificationService.totalUnreadMessages>0?2:-1)}}function _h(e,i){if(e&1){let n=w();s(0,"button",47),C("click",function(){v(n);let o=d();return b(o.widgetVisibilityChange(o.pomodoroTimerWidget,o.WidgetTypeRef.PomodoroTimer))}),x(1,"ss-icon",48),c()}e&2&&(l(),g("size",24))}function Ch(e,i){if(e&1&&(s(0,"div",46)(1,"span"),p(2),c()()),e&2){let n=d(2);l(2),k(" ",n.notificationService.unreadNotificationsCount>99?"99+":n.notificationService.unreadNotificationsCount," ")}}function vh(e,i){if(e&1){let n=w();s(0,"button",49),C("click",function(){v(n);let o=d();return b(o.showNotificationsCenter())}),x(1,"ss-icon",50),h(2,Ch,3,1,"div",46),c()}if(e&2){let n=d();l(),g("size",24),l(),_(n.showNotificationsUnreadCount?2:-1)}}function bh(e,i){e&1&&x(0,"ss-icon",14),e&2&&g("size",24)}function xh(e,i){e&1&&x(0,"ss-icon",15),e&2&&g("size",24)}function Sh(e,i){e&1&&x(0,"ss-header-avatar",16)}function yh(e,i){if(e&1){let n=w();s(0,"ss-button",51),C("buttonClick",function(){v(n);let o=d();return b(o.goToLogin())}),p(1," Login "),c()}}function wh(e,i){if(e&1){let n=w();s(0,"ss-button",52),C("buttonClick",function(){v(n);let o=d();return b(o.goToRegister())}),p(1," Create an account "),c()}}function Ph(e,i){if(e&1){let n=w();s(0,"ss-widget",53),C("cdkDragEnded",function(o){v(n);let r=d();return b(r.dragEnd(r.pomodoroTimerWidget,r.WidgetTypeRef.PomodoroTimer,o))}),s(1,"ss-pomodoro-timer",54),C("toggleMinimizeClick",function(){v(n);let o=d();return b(o.widgetMinimizeChange(o.pomodoroTimerWidget,o.WidgetTypeRef.PomodoroTimer))})("closeClick",function(){v(n);let o=d();return b(o.widgetVisibilityChange(o.pomodoroTimerWidget,o.WidgetTypeRef.PomodoroTimer))}),c()()}if(e&2){let n=d();_e("visibility",n.pomodoroTimerWidget.offsetLeft<0||n.pomodoroTimerWidget.offsetTop<0?"hidden":"visible"),I("force-on-top",n.shouldDisplayFocusPlus&&n.livekit.room.focusPlus.active),g("id",n.pomodoroTimerElementId)("hideWidgetHeader",!0)("cdkDragFreeDragPosition",Ks(12,oh,n.pomodoroTimerWidget.offsetLeft,n.pomodoroTimerWidget.offsetTop))("cdkDragBoundary",n.elementRef)("visible",n.pomodoroTimerWidget.visible)("hidden",!n.pomodoroTimerWidget.visible),l(),g("minimized",n.pomodoroTimerWidget.minimized)("widget",n.pomodoroTimerWidget)}}function Mh(e,i){if(e&1){let n=w();s(0,"ss-dm-tray",55),C("closeDmTray",function(){v(n);let o=d(2);return b(o.dmTray.close())}),c(),s(1,"div",56),C("click",function(){v(n);let o=d(2);return b(o.dmTray.close())}),c()}if(e&2){let n=d(2);g("activeView",n.dmTray.activeView)("chatId",n.dmTray.chatId)("userToAddId",n.dmTray.userToAddId)}}function Oh(e,i){if(e&1){let n=w();s(0,"ss-tasks",57),C("navigateToTasksClicked",function(){v(n);let o=d(2);return b(o.taskTrayActive=!1)}),c(),s(1,"div",58),C("click",function(){v(n);let o=d(2);return b(o.taskTrayActive=!1)}),c()}e&2&&g("taskTray",!0)}function kh(e,i){if(e&1&&(h(0,Mh,2,3),h(1,Oh,2,1)),e&2){let n=d();_(n.dmTray.activeView?0:-1),l(),_(n.taskTrayActive?1:-1)}}function Th(e,i){if(e&1){let n=w();x(0,"ss-notification-center"),s(1,"div",59),C("click",function(){v(n);let o=d();return b(o.onNotificationOverlayClick())}),c()}}function Eh(e,i){e&1&&(s(0,"span"),p(1,"Click to upgrade to premium."),c())}function Ih(e,i){if(e&1){let n=w();s(0,"div",62),C("click",function(){v(n);let o=d(2);return b(o.navigateToPlansAndPricing())}),s(1,"h2"),p(2,"Please turn off your ad-blocker and reload page"),c(),s(3,"div"),p(4),h(5,Eh,2,0,"span"),c()()}if(e&2){let n=d(2);lt("role",n.accountService.isFullyVerifiedUser()?"button":"note"),l(4),k("This helps us keep a version of ",n.settingsService.siteName," free, otherwise we would have to charge you. "),l(),_(n.accountService.isFullyVerifiedUser()?5:-1)}}function Rh(e,i){if(e&1){let n=w();s(0,"div")(1,"ss-ads-wrapper",60),C("adBlockerDetected",function(){v(n);let o=d();return b(o.adBlockerActive=!0)}),c(),h(2,Ih,6,3,"div",61),c()}if(e&2){let n=d();ze(n.adsWrapperClass),I("focus-buddies",n.isFocusBuddiesPage),l(2),_(n.adBlockerActive?2:-1)}}function Ah(e,i){if(e&1){let n=w();s(0,"ss-encouragement-toast",68),C("closeToast",function(o){v(n);let r=d(3);return b(r.closeEncouragementToast(o))}),c()}if(e&2){let n=i.$implicit;g("encouragementInfo",n)}}function Dh(e,i){if(e&1&&(s(0,"div",65)(1,"cdk-virtual-scroll-viewport",66),Be(2,Ah,1,1,"ss-encouragement-toast",67),c()()),e&2){let n=d(2);I("has-elements",n.encouragementService.encouragementsReceived.length>0),l(),_e("height",n.virtualScrollViewportHeight,"px"),l(),g("cdkVirtualForOf",n.encouragementService.encouragementsReceived)}}function Vh(e,i){if(e&1){let n=w();h(0,Dh,3,5,"div",63),s(1,"ss-encouragement-menu",64),C("hideEncouragementsClick",function(o){v(n);let r=d();return b(r.hideEncouragements=o)}),c()}if(e&2){let n=d();_(n.hideEncouragements?-1:0),l(),g("hideEncouragements",n.hideEncouragements)}}function Uh(e,i){if(e&1){let n=w();s(0,"div",69)(1,"h4"),p(2,"You've just pinned your first Focus Partner! Did you know?"),c(),s(3,"p"),p(4,"After a 30-minute session with the same person, they'll become one of your \u{1F44B} \u201DAcquaintances\u201D and you can continue to build connections from there."),c(),s(5,"div",70)(6,"div")(7,"strong"),p(8,"Focus Buddy Progress"),c(),p(9,": 1st session underway"),c(),s(10,"div",71),x(11,"div",72),c()(),s(12,"ss-button",73),C("buttonClick",function(){v(n);let o=d(2);return b(o.closeFocusBuddyProgressInfo())}),p(13,"Got it"),c()()}}function Nh(e,i){if(e&1){let n=w();s(0,"ss-toast",75,0),C("closeButtonClicked",function(){let o=v(n).$implicit,r=d(3);return b(r.toastService.closeToast(o))}),c()}if(e&2){let n=i.$implicit;g("options",n)}}function Bh(e,i){if(e&1&&q(0,Nh,2,1,"ss-toast",74,Et),e&2){let n=d(2);K(n.toastService.toasts)}}function Lh(e,i){if(e&1&&(s(0,"div",23),h(1,Uh,14,0,"div",69),h(2,Bh,2,0),c()),e&2){let n=d();l(),_(n.showPinnedInfo?1:-1),l(),_(n.toastService.toasts.length>0?2:-1)}}function Fh(e,i){if(e&1){let n=w();s(0,"div",24)(1,"div",76)(2,"h4"),p(3),c(),s(4,"div",77),x(5,"div",78),s(6,"div",79),p(7,"Mobile App"),c(),s(8,"ss-button",80),C("buttonClick",function(){v(n);let o=d();return b(o.openMobileApp())}),p(9," Open "),c()(),s(10,"div",77),x(11,"div",81),s(12,"div",79),p(13,"Browser"),c(),s(14,"ss-button",82),C("buttonClick",function(){v(n);let o=d();return b(o.closePrompt())}),p(15," Continue "),c()()()()}if(e&2){let n=d();l(3),k("View ",n.settingsService.siteName," in...")}}var cp=(()=>{let i=class i{get displayedParticipants(){return this.livekit.room?.displayedParticipants}get shouldDisplayFocusPlus(){return!this.isMobile&&!!this.livekit.room?.focusPlus&&this.livekit.room?.state!==da.Disconnected&&this.isFocusRoom&&!this.isFocusRoomLite}get virtualScrollViewportHeight(){switch(this.encouragementService.encouragementsReceived.length){case 1:return 54;case 2:return 108;default:return 133}}get showRoomIntroUnauthVideo(){return this.inRoom&&this.livekit.room.localParticipant.anonymous&&this.showUnauthIntroVideo}get showRoomIntroAuthVideo(){return this.inRoom&&this.accountService.authenticated()&&this.showAuthIntroVideo&&!this.accountService.currentUser.seenRoomIntroJs&&!this.showRoomIntroUnauthVideo}get inRoom(){return this.isFocusRoom&&this.livekit.room&&!this.settingsService.isB2BApp()}get showNotificationsUnreadCount(){let t=this.accountService.currentUser.notificationsCountHiddenUntil;return(t===null||pe.fromISO(t)<pe.now())&&this.notificationService.unreadNotificationsCount>0}constructor(t,o,r,a,m,f,S,y,P,M,R,A,G,se,Se,at,Gi,qi,_r,D,Ne,Pp,Mp,Op,kp,Tp,Ep,Ip,Rp,Ap,Dp){this.utilityService=t,this.elementRef=o,this.signalRService=r,this.encouragementService=a,this.toastService=m,this.livekit=f,this.subscriptionService=S,this.subscriptionNavigationService=y,this.accountService=P,this.settingsService=M,this.notificationService=R,this.navigationService=A,this.onlineStatusService=G,this.loaderService=se,this.accountModalsService=Se,this.widgetsService=at,this.geolocationService=Gi,this.countryService=qi,this.dialog=_r,this.changeDetectorRef=D,this.sidebarService=Ne,this.analyticsService=Pp,this.pollService=Mp,this.router=Op,this.activatedRoute=kp,this.userTaskService=Tp,this.focusRoomService=Ep,this.badgeService=Ip,this.datadogService=Rp,this.growthBookService=Ap,this.dialogQueueService=Dp,this.resizeObserver=new ResizeObserver(Ki=>{requestAnimationFrame(()=>{this.correctAllWidgetsPositions(),this.setIsMobile(Ki[0].contentRect.width)})}),this.noteColors=ia,this.pomodoroTimerElementId=na,this.isMobile=!1,this.sidebarExpanded=!0,this.hundredMsInitialized=!1,this.showDownloadAppButton=!1,this.menuOpened=!1,this.isFocusRoom=!1,this.isFocusRoomLite=!1,this.isFocusBuddiesPage=!1,this.isTasksPage=!1,this.isConfirmSubscriptionInvitationPage=!1,this.hideEncouragements=!1,this.showMobileAppPrompt=!1,this.taskTrayActive=!1,this.notificationCenterActive=!1,this.adBlockerActive=!1,this.showUnauthIntroVideo=!0,this.showAuthIntroVideo=!1,this.showPinnedInfo=!1,this.dmTray={activeView:null,chatId:null,userToAddId:null,close:()=>{this.dmTray.activeView=null,this.dmTray.chatId=null,this.dmTray.userToAddId=null},chat:Ki=>{this.dmTray.chatId=Ki,this.dmTray.activeView=et.Chat},createChat:Ki=>{this.dmTray.userToAddId=Ki,this.dmTray.activeView=et.CreateGroup}},this.WidgetTypeRef=ye,this.DmViewRef=et,this.ButtonColorRef=Lt,this.DismissReasonRef=Zt,this.TriggeredUpgradeFromSourceRef=Ze,this.activeGroup=null,this.adsWrapperClass=`aw${ma()}`,this.isPollModalOpen=!1,this.haveSetUpNotifications=!1,this.subscriptions=[],this.navigationService.init(),this.authenticated=this.accountService.authenticated(),this.showDownloadAppButton=["local","local-app","staging-app"].includes(de.name),this.showMobileAppPrompt=this.isMobileDevice()&&!this.settingsService.isB2BApp()&&!this.settingsService.isCoWork()}onFocus(){this.signalRService.ensureSignalRIsConnected()}handleKeyboardEvent(t){t.key==="Escape"&&this.dmTray.activeView&&this.toggleDmTray()}onBeforeUnload(){this.performUnloadActions(hr.Unload),this.isFocusRoom&&this.accountService.isFullyVerifiedUser()&&this.livekit.room?.storeLivekitSettings()}ngOnInit(){if(this.analyticsService.initAmplitude(()=>{this.accountService.authenticated()&&this.accountService.currentUser.returningUserNotifyInfo&&this.resolveReturningUserAmplitudeEvents()}),this.growthBookService.init(),this.setCurrentUser(),this.setUpWidgets(),this.subscriptions.push(this.signalRService.widgetUpdated.subscribe(t=>this.widgetUpdated(t)),this.signalRService.widgetPositionUpdated.subscribe(t=>this.widgetPositionUpdated(t)),this.signalRService.widgetsVisibilityUpdated.subscribe(t=>this.widgetsVisibilityUpdated(t)),this.signalRService.encouragementReceived.subscribe(t=>this.showEncouragement(t)),this.signalRService.encouragementsDismissed.subscribe(t=>this.dismissEncouragements(t)),this.signalRService.premiumAccessChanged.subscribe(t=>{t&&this.showPaywallTimerSubscription?.unsubscribe()}),this.signalRService.notificationsUpserted.subscribe(()=>this.handleNotificationsUpserted()),this.signalRService.notificationsDeleted.subscribe(()=>this.handleNotificationsDeleted()),this.widgetsService.localWidgetsUpdated.pipe(vr(1e3)).subscribe(()=>this.updateWidgets()),this.widgetsService.widgetsMinimized.subscribe(()=>this.minimizeAllWidgets()),this.sidebarService.sidebarStateChange.subscribe(t=>this.sidebarExpanded=t),this.utilityService.openDmTrayChat.subscribe(t=>this.dmTray.chat(t)),this.utilityService.requestChatNavigation.subscribe(t=>this.dmTray.createChat(t)),this.utilityService.collapseEncouragements.subscribe(()=>this.hideEncouragements=!0),this.utilityService.startPricingModalTimer.subscribe(()=>this.startPricingModalTimer()),this.accountService.logoutEvent.subscribe(()=>this.performUnloadActions(hr.Logout)),this.badgeService.checkForNewBadges.pipe(vr(1e3)).subscribe(()=>this.checkForNewBadges(this.isFocusRoom?this.livekit.room?.roomName:null)),this.userTaskService.showTasks.subscribe(()=>this.showTasks()),this.activatedRoute.queryParams.subscribe(t=>{if(t.deactivationReason){let o=t.deactivationReason;o===br.TemporaryDeactivationByUser?this.toastService.info({title:"Account deactivated",message:"You have successfully deactivated your account."}):o===br.UserRequestedDeletion&&this.toastService.info({title:"Account deleted",message:"You have successfully deleted your account. Sad to see you go :("}),this.router.navigate([],{queryParams:{deactivationReason:null},queryParamsHandling:"merge"})}})),this.router.events.subscribe(t=>{t instanceof Bn&&(this.isFocusRoom=this.utilityService.isOnFocusRoomPage(),this.isFocusRoomLite=this.utilityService.isOnFocusRoomLitePage(),this.isFocusBuddiesPage=this.router.url.includes("/focus-buddies"),this.isTasksPage=this.router.url.includes("/tasks"),this.isConfirmSubscriptionInvitationPage=this.router.url.includes("/confirm-subscription-invitation"))}),this.isFocusRoom=this.utilityService.isOnFocusRoomPage(),this.isFocusRoomLite=this.utilityService.isOnFocusRoomLitePage(),this.isFocusBuddiesPage=this.router.url.includes("/focus-buddies"),this.isTasksPage=this.router.url.includes("/tasks"),this.isConfirmSubscriptionInvitationPage=this.router.url.includes("/confirm-subscription-invitation"),this.isIOS=this.utilityService.isIOS(),this.utilityService.hundredMsInitialized.subscribe(t=>this.hundredMsInitialized=t),this.utilityService.conversationsModuleLoaded.subscribe(t=>{t&&(this.dmTray.activeView=null,this.notificationService.setDmTrayActiveStatus(!!this.dmTray.activeView))}),window.addEventListener("orientationchange",()=>{setTimeout(()=>{document.documentElement.style.setProperty("--vh",`${window.innerHeight}px`)},1e3)}),!this.settingsService.isB2BApp()&&!this.subscriptionService.issueWithStripePaymentExists){let t=this.utilityService.isOnFocusRoomPage();setTimeout(()=>this.tryShowingPricingModal(),t?3*60*1e3:0)}this.showUnauthIntroVideo=!localStorage.getItem(yr),this.showAuthIntroVideo=Xe(this.accountService.currentUser)<7}ngAfterViewInit(){this.resizeObserver.observe(document.body),this.utilityService.handlePlatformSpecificClass();let t=window.fusetag||(window.fusetag={que:[]});t.que.push(()=>{t.pageInit({blockingFuseIds:["23041220963","23040416613"]})}),this.accountService.isFullyVerifiedUser()&&this.checkForNewBadges()}ngOnDestroy(){this.onlineStatusService.stop(),this.subscriptions.forEach(t=>t.unsubscribe()),this.pollTimerSubscription?.unsubscribe(),this.showPaywallTimerSubscription?.unsubscribe(),this.countryChangeTimerSubscription?.unsubscribe(),this.timezoneChangeTimerSubscription?.unsubscribe(),this.additionalInfoTimerSubscription?.unsubscribe(),this.checkBadgesTimerSubscription?.unsubscribe(),this.widgetsService.vibesWidgetUpdated.complete(),this.widgetsService.vibesWidgetUpdated=new yn(1),Wn(this.resizeObserver,document.body)}dragEnd(t,o,r){let a=r.source.getFreeDragPosition();if(a.x===0&&a.y===0){let m=Math.max(t.offsetLeft+r.distance.x,0),f=Math.max(t.offsetTop+r.distance.y,0);if(m!==a.x||f!==a.y){r.source.setFreeDragPosition({x:t.offsetLeft,y:t.offsetTop});return}}t.offsetLeft=Math.max(a.x,0),t.offsetTop=Math.max(a.y,0),this.accountService.authenticated()?this.widgetsService.updateWidgetPosition(t,o,m=>this.handleErrors(m)):this.widgetsService.localWidgetsUpdated.next()}onNotificationOverlayClick(){this.notificationService.unreadNotificationsCount=0,this.notificationCenterActive=!1}updateWidgets(){if(this.accountService.authenticated())return;let t={pomodoroTimerWidget:this.pomodoroTimerWidget,vibesWidget:this.vibesWidget};this.widgetsService.updateLocal(t)}widgetVisibilityChange(t,o){t.visible=!t.visible,this.analyticsService.fireEvent(Te.Click,ke.Button,`open ${o.toLocaleLowerCase()}`),t.visible&&setTimeout(()=>{this.correctWidgetPosition(t,o)}),this.accountService.authenticated()?this.widgetsService.updateWidgetPosition(t,o,r=>this.handleErrors(r)):this.widgetsService.localWidgetsUpdated.next()}widgetMinimizeChange(t,o){t.minimized=!t.minimized,this.accountService.authenticated()?this.widgetsService.updateWidgetPosition(t,o,r=>this.handleErrors(r)):this.widgetsService.localWidgetsUpdated.next()}openImportantMessageModal(){this.dialog.open(tl,{panelClass:"fullscreen-dialog",width:"600px"})}toggleSidebarExpandedState(){this.sidebarService.setSidebarState(!this.sidebarExpanded)}toggleDmTray(){if(this.accountModalsService.ensureUserCompletedBasicInfo()){if(this.isMobile){this.router.navigate(["/conversations"]);return}this.dmTray.activeView=this.dmTray.activeView?null:et.ChatList,this.notificationService.setDmTrayActiveStatus(!!this.dmTray.activeView)}}showNotificationsCenter(){this.accountModalsService.ensureUserCompletedBasicInfo()&&(this.notificationCenterActive=!0)}showTasks(){if(this.isMobile){this.router.navigate(["/tasks"]);return}this.taskTrayActive=!0}reloadPage(){window.location.reload()}goToLogin(){this.analyticsService.markActivity(W.LoginButtonClick),this.isFocusRoom?this.router.navigate([],{queryParams:{authStep:Mr.Login}}):this.router.navigate(["/login"],{queryParams:{redirectUrl:"/"}})}goToRegister(){this.analyticsService.markActivity(W.CreateAnAccountButtonClick),this.isFocusRoom?this.router.navigate([],{queryParams:{authStep:Mr.Register}}):this.router.navigate(["/register"],{queryParams:{redirectUrl:"/",state:"default"}})}downloadDesktopApp(){this.accountModalsService.ensureUserCompletedBasicInfo()&&this.utilityService.downloadDesktopApp().subscribe({error:t=>this.handleErrors(t)})}closeEncouragementToast(t){let o=this.encouragementService.encouragementsReceived.find(a=>a.id===t);if(!o)return;let r=this.encouragementService.encouragementsReceived.indexOf(o);this.encouragementService.encouragementsReceived.splice(r,1),this.encouragementService.encouragementsReceived=[...this.encouragementService.encouragementsReceived]}startWorking(){!this.displayedParticipants||!this.accountModalsService.ensureUserCompletedBasicInfo()||this.dialog.open(mc,{panelClass:"fullscreen-dialog"})}openMobileApp(){this.showMobileAppPrompt=!1;let t="",o=navigator.userAgent||navigator.vendor;/android/i.test(o)&&(t="https://play.google.com/store/apps/details?id=live.studystream.app"),/iPhone/.test(o)&&(t="https://apps.apple.com/us/app/studystream/id6461722416"),window.open(t,"_blank")}closePrompt(){this.showMobileAppPrompt=!1}goToMobileApp(){window.open("https://www.studystream.live/download-mobile-app","_blank")}navigateToPlansAndPricing(){this.accountService.isFullyVerifiedUser()&&this.subscriptionNavigationService.openPlansAndPricing(Ze.AdBlockerDetectedBlock)}closeFocusBuddyProgressInfo(){this.showPinnedInfo=!1,this.analyticsService.markActivity(W.NewUserClickedGotItFromProgressToast)}hideUnauthIntroVideoButton(){localStorage.setItem(yr,"false"),this.showUnauthIntroVideo=!1}closeAuthIntroVideoButton(){this.accountService.setIntroJsSeenState(Sa.FocusRoom).subscribe()}tryShowingPricingModal(t=!1){let o=this.accountService.currentUser.dateCreated>ra;if(this.accountService.isFullyVerifiedUser()&&!this.subscriptionService.hasActiveSubscription&&o&&(this.accountService.currentUser.timeInfo.purchasedFocusRoomSecondsLeft===null||this.accountService.currentUser.timeInfo.purchasedFocusRoomSecondsLeft<=0)&&!this.isConfirmSubscriptionInvitationPage){let r=t?Ze.PaywallTimer:Ze.PaywallFirstShow;this.subscriptionNavigationService.openPlansAndPricing(r,!1,!0)}}startPricingModalTimer(){this.settingsService.isB2BApp()||(this.showPaywallTimerSubscription=Je(15*60*1e3,15*60*1e3).subscribe(()=>{let t=localStorage.getItem(Sr),o=0;t&&(o=pe.now().diff(pe.fromISO(t),"hours").hours),(t?o>24:!0)&&(this.tryShowingPricingModal(!0),localStorage.setItem(Sr,new Date().toISOString()))}))}getRandomNumber(t,o){return Math.floor(Math.random()*(o-t+1)+t)}setUpWidgets(){let t=this.geolocationService.isVimeoBanned();this.widgetsService.getAllWidgets(t).subscribe({next:o=>{this.pomodoroTimerWidget=o.pomodoroTimerWidget,this.vibesWidget=o.vibesWidget,setTimeout(()=>this.correctAllWidgetsPositions())},error:o=>this.handleErrors(o)})}widgetUpdated(t){switch(t.type){case ye.Vibes:this.widgetsService.getVibesWidget().subscribe({error:o=>this.handleErrors(o)});break;default:break}}widgetPositionUpdated(t){switch(t.type){case ye.PomodoroTimer:this.pomodoroTimerWidget.offsetTop=t.offsetTop,this.pomodoroTimerWidget.offsetLeft=t.offsetLeft,this.pomodoroTimerWidget.minimized=t.minimized,this.pomodoroTimerWidget.visible=t.visible;break;case ye.Vibes:this.vibesWidget.offsetTop=t.offsetTop,this.vibesWidget.offsetLeft=t.offsetLeft,this.vibesWidget.minimized=t.minimized,this.vibesWidget.visible=t.visible;break}}widgetsVisibilityUpdated(t){this.pomodoroTimerWidget.visible=t.visible}correctAllWidgetsPositions(){this.pomodoroTimerWidget&&(this.correctWidgetPosition(this.pomodoroTimerWidget,ye.PomodoroTimer),this.changeDetectorRef.detectChanges())}setIsMobile(t=null){t&&(this.isMobile=t<=1024,this.utilityService.isMobile.next(this.isMobile),this.utilityService.isPhone.next(t<768),this.utilityService.isSmallAdBreakpoint.next(t<540),this.utilityService.handlePlatformSpecificClass())}correctWidgetPosition(t,o,r=!1){let a=this.elementRef.nativeElement.offsetWidth,m=this.elementRef.nativeElement.offsetHeight,f;switch(o){case ye.Vibes:return;case ye.PomodoroTimer:f=this.pomodoroTimerElementId;break;default:throw new Error(`Unknown type ${o}`)}let S=document.getElementById(f);if(!S||S.clientWidth===0||S.clientHeight===0)return;let y=!1;if(t.offsetLeft<0||t.offsetTop<0)t.offsetLeft=(a-S.clientWidth)/2+(r?this.getRandomNumber(-100,100):0),t.offsetTop=(m-S.clientHeight)/2+(r?this.getRandomNumber(-100,100):0),y=!0;else{let P=a-S.clientWidth;t.offsetLeft>P&&(t.offsetLeft=P,y=!0);let M=m-S.clientHeight;t.offsetTop>M&&(t.offsetTop=M,y=!0)}y&&(this.accountService.authenticated()?this.widgetsService.updateWidgetPosition(t,o,P=>this.handleErrors(P)):this.widgetsService.localWidgetsUpdated.next())}setCurrentUser(){if(this.accountService.authenticated()||this.accountService.getAnonymousUserIdAndEnsureCreated(),this.accountService.isFullyVerifiedUser())this.setUpNotifications(),this.sidebarExpanded=this.accountService.currentUser.sidebarExpanded,this.additionalInfoTimerSubscription=Je(1e4).subscribe(()=>this.checkAdditionalUserInfoSet()),this.timezoneChangeTimerSubscription=Je(5*60*1e3).subscribe(()=>this.checkTimezoneChange()),this.countryChangeTimerSubscription=Je(10*60*1e3).subscribe(()=>this.checkCountryChange()),this.setPollTimer(this.settingsService.settings.pollInitialShowDelay*1e3);else if(this.settingsService.isB2BApp()){if(!this.accountService.authenticated()){this.router.navigate(["/login"]);return}let t=this.accountService.currentUser.emailConfirmed?this.accountService.isCurrentUserPhoneVerified()?this.accountService.currentUser.completedBasicInfo?"":"/basic-info":"/verify-phone":"/verify-email";t&&this.router.navigate([t])}}setPollTimer(t){this.pollTimerSubscription?.unsubscribe(),this.pollTimerSubscription=Je(t).subscribe({next:()=>{let o=this.pollService.userPolls.filter(r=>r.location===tn.Modal);o.length>0&&!this.isPollModalOpen&&this.displayPoll(o[0].id)}})}resolveReturningUserAmplitudeEvents(){let t=this.accountService.currentUser.returningUserNotifyInfo,o={emailConfirmed:this.accountService.currentUser.emailConfirmed,phoneNumerConfirmed:this.accountService.currentUser.phoneNumberConfirmed,completedBasicInfo:this.accountService.currentUser.completedBasicInfo};t.notifyFirstReturningRollingDate&&this.analyticsService.markActivity(W.UserFirstReturningRollingDate,o),t.notifyFirstReturningCalendarDate&&this.analyticsService.markActivity(W.UserFirstReturningCalendarDate,o),t.notifyFirstReturningRollingWeek&&this.analyticsService.markActivity(W.UserFirstReturningRollingWeek,o),t.notifyFirstReturningCalendarWeek&&this.analyticsService.markActivity(W.UserFirstReturningCalendarWeek,o),t.notifyFirstReturningRollingMonth&&this.analyticsService.markActivity(W.UserFirstReturningRollingMonth,o),t.notifyFirstReturningCalendarMonth&&this.analyticsService.markActivity(W.UserFirstReturningCalendarMonth,o)}setUpNotifications(){this.haveSetUpNotifications||(this.signalRService.initialize(),this.onlineStatusService.initialize(),this.notificationService.initialize(),this.datadogService.initialize(),"Notification"in window&&Notification.permission==="default"&&Xe(this.accountService.currentUser)>=3&&Notification.requestPermission(),this.haveSetUpNotifications=!0)}checkCountryChange(){this.accountService.currentUser.doNotAskAboutCountryChange||localStorage.getItem(sa)==="false"||!this.accountService.currentUser.locationCountryTwoLetterCode||this.accountService.currentUser.locationCountryTwoLetterCode===this.accountService.currentUser.countryTwoLetterCode||!this.accountService.isFullyVerifiedUser()||Xe(this.accountService.currentUser)<3||this.countryService.getAll().subscribe({next:t=>{this.dialogQueueService.openDialog({component:uc,config:{panelClass:"fullscreen-dialog",width:"480px",data:t}})}})}checkTimezoneChange(){if(this.accountService.currentUser.doNotAskAboutTimezoneChange||!this.accountService.isFullyVerifiedUser()||Xe(this.accountService.currentUser)<3)return;let t=this.accountService.currentUser.timezoneId==="UTC",o=Math.abs(this.accountService.currentUser.timezoneUtcOffset-pe.now().offset);!t&&o<=60||this.utilityService.getTimezones().subscribe({next:r=>{this.dialogQueueService.openDialog({component:_c,config:{panelClass:"fullscreen-dialog",width:"480px",data:r}})}})}checkAdditionalUserInfoSet(){!(this.accountService.currentUser.completedBasicInfo&&(!this.accountService.currentUser.gender||!this.accountService.currentUser.birthday))||this.settingsService.isB2BApp()||this.dialogQueueService.openDialog({component:lc,config:{panelClass:"fullscreen-dialog",width:"480px"}})}minimizeAllWidgets(){if(this.pomodoroTimerWidget.visible=!1,this.accountService.authenticated()){let t={visible:!1};this.widgetsService.updateWidgetsVisibility(t).subscribe({error:o=>this.handleErrors(o)})}else this.widgetsService.localWidgetsUpdated.next()}displayPoll(t){this.isPollModalOpen=!0,this.pollService.getPoll(t).subscribe(o=>{if(!o){this.pollTimerSubscription?.unsubscribe(),this.isPollModalOpen=!1;return}this.dialogQueueService.openDialog({component:Qa,config:{panelClass:["fullscreen-dialog"],width:"520px",disableClose:!0,autoFocus:!1,data:{poll:o,isPreview:!1}},onCloseCallback:r=>{this.isPollModalOpen=!1,this.pollService.userPolls.filter(m=>m.location===tn.Modal).length>0&&this.setPollTimer(this.settingsService.settings.pollEnsuingShowDelay*1e3)}})})}showEncouragement(t){if(this.livekit.room?.roomName){if(this.encouragementService.encouragementsReceived.unshift(t),this.encouragementService.encouragementsReceived=[...this.encouragementService.encouragementsReceived],t.isFromGreetingMode){let o={senderGender:t.senderGender,receiverGender:this.accountService.currentUser.gender};this.analyticsService.markActivity(W.LivekitGreetingModeAutoEncouragementReceived,o)}else this.analyticsService.markActivity(W.LivekitEncouragementReceived,{userEncouragingId:t.sender.id});!this.livekit.room.milestones.encouraged&&this.utilityService.isOnFocusRoomPage()&&this.livekit.room&&this.livekit.room.allParticipants.some(o=>o.identity===t.sender.id)&&(this.badgeService.showAchievementModal(null,!0),this.livekit.room.milestones.encouraged=!0)}}dismissEncouragements(t){t.forEach(o=>{let r=this.encouragementService.encouragementsReceived.find(a=>a.id===o);if(r){let a=this.encouragementService.encouragementsReceived.indexOf(r);this.encouragementService.encouragementsReceived.splice(a,1)}})}performUnloadActions(t){return li(this,null,function*(){if(!this.accountService.isFullyVerifiedUser())return;let r={encouragementDismissReasonsModel:this.encouragementService.encouragementsReceived.map(a=>({encouragementId:a.id,dismissReason:t===hr.Logout?Zt.LeftTheRoom:Zt.Disconnected}))};if(this.livekit.room?.roomName){let a=ct(L({},r),{roomName:this.livekit.room?.roomName});this.livekit.performUnloadActionsAndKeepAlive(a)}})}checkForNewBadges(t){this.badgeService.getEarnedBadges(t).subscribe({next:o=>{let r=!1;o.unreadBadges.some(f=>f.id===ca.id)&&(this.showPinnedInfo=!0,this.analyticsService.markActivity(W.NewUserFocusBuddyProgressToastShown));let m=o.unreadBadges.filter(f=>f.type!==Fc.Milestone);m.length>0&&(this.subscriptions.push(Je(2e3).subscribe(()=>this.badgeService.showAchievementModal(m[0],!1,m.length>1))),r=!0),this.focusRoomService.updateStreakInfo(o.currentStreak,r)},error:o=>this.handleErrors(o)})}handleNotificationsUpserted(){this.notificationCenterActive||this.getUnreadCount()}handleNotificationsDeleted(){this.notificationService.unreadNotificationsCount!==0&&this.getUnreadCount()}getUnreadCount(){this.notificationService.getUnreadCount().subscribe({next:t=>this.notificationService.unreadNotificationsCount=t,error:t=>this.handleErrors(t)})}isMobileDevice(){return/Android|webOS|iPhone|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}handleErrors(t){this.loaderService.stop(),this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(Me),u($s),u(Ge),u(ro),u(V),u(ut),u(Bt),u(bi),u(T),u(ie),u(zt),u(Ja),u(Wa),u(Oe),u(Ft),u(Mi),u(So),u(bo),u(Ce),u(On),u(zc),u(oe),u(ho),u(Z),u(je),u(pc),u(xi),u(co),u(qd),u(ja),u(ao))},i.\u0275cmp=O({type:i,selectors:[["ss-dashboard"]],hostBindings:function(o,r){o&1&&C("focus",function(){return r.onFocus()},Xi)("keydown",function(m){return r.handleKeyboardEvent(m)})("beforeunload",function(){return r.onBeforeUnload()},Xi)},standalone:!1,decls:30,vars:33,consts:[["toast",""],[1,"important-notice-bar"],[1,"reconnect-bar"],[1,"sidebar-wrapper"],[1,"top-menu"],[3,"color","fix-payment","autoSize"],["color","focus-room","iconName","task_list_square_add",1,"start-working",3,"iconSize","matTooltip","disabled"],[1,"drawer"],[1,"top-menu-item","top-menu-button"],["matTooltip","Tasks",1,"top-menu-item","top-menu-button","task-tray"],["matTooltip","Chats",1,"top-menu-item","top-menu-button",3,"active"],["matTooltip","Pomodoro Timer",1,"top-menu-item","top-menu-button"],["matTooltip","Notifications",1,"top-menu-item","top-menu-button"],[1,"top-menu-item","top-menu-button","drawer-button",3,"click"],["iconName","folder_arrow_left","color","gradient-20",1,"more-options",3,"size"],["iconName","dismiss","color","gradient-20",1,"more-options",3,"size"],[1,"top-menu-item"],["color","tertiary",1,"login-button"],[1,"register-button"],["cdkDrag","",3,"id","visibility","hideWidgetHeader","force-on-top","cdkDragFreeDragPosition","cdkDragBoundary","visible","hidden"],[1,"dashboard-wrapper"],[1,"router-wrapper"],[3,"class","focus-buddies"],[1,"main-toast-wrapper"],[1,"mobile-app-prompt"],[1,"content",3,"innerHTML"],["role","button","color","contrast","iconName","dismiss",3,"click","size"],[1,"content"],[3,"click"],[3,"ads-shown","expandedSidebar","hundredMsInitialized"],["color","default","role","button","iconName","arrow_left","matTooltipPosition","right",1,"collapse-arrow",3,"click","matTooltip","size"],[3,"expandedSidebar","hundredMsInitialized"],[3,"buttonClick","color","autoSize"],["color","focus-room","iconName","task_list_square_add",1,"start-working",3,"buttonClick","iconSize","matTooltip","disabled"],[1,"button-content"],[1,"main-text"],[1,"sub-text"],["matTooltip","Download desktop application",1,"top-menu-item","top-menu-button"],["matTooltip","What's new?",1,"top-menu-item","top-menu-button","new-features",3,"click"],["iconName","sparkle","color","accent-blue-20",3,"size"],["matTooltip","Download desktop application",1,"top-menu-item","top-menu-button",3,"click"],["iconName","arrow_download","color","accent-blue-20",3,"size"],["matTooltip","Tasks",1,"top-menu-item","top-menu-button","task-tray",3,"click"],["iconName","tasks_app","color","accent-blue-20",3,"size"],["matTooltip","Chats",1,"top-menu-item","top-menu-button",3,"click"],["iconName","chat","color","accent-blue-20",3,"size"],[1,"unread-count"],["matTooltip","Pomodoro Timer",1,"top-menu-item","top-menu-button",3,"click"],["iconName","clock","color","accent-blue-20",3,"size"],["matTooltip","Notifications",1,"top-menu-item","top-menu-button",3,"click"],["iconName","alert_urgent","color","accent-blue-20",3,"size"],["color","tertiary",1,"login-button",3,"buttonClick"],[1,"register-button",3,"buttonClick"],["cdkDrag","",3,"cdkDragEnded","id","hideWidgetHeader","cdkDragFreeDragPosition","cdkDragBoundary","visible","hidden"],[3,"toggleMinimizeClick","closeClick","minimized","widget"],[3,"closeDmTray","activeView","chatId","userToAddId"],[1,"dm-overlay",3,"click"],[3,"navigateToTasksClicked","taskTray"],[1,"tasks-overlay",3,"click"],[1,"notification-center-overlay",3,"click"],[3,"adBlockerDetected"],[1,"ads-block-warning"],[1,"ads-block-warning",3,"click"],["id","bottom-toast-wrapper",3,"has-elements"],[3,"hideEncouragementsClick","hideEncouragements"],["id","bottom-toast-wrapper"],["itemSize","54",1,"virtual-scroll-container"],[3,"encouragementInfo","closeToast",4,"cdkVirtualFor","cdkVirtualForOf"],[3,"closeToast","encouragementInfo"],[1,"focus-buddy-progress"],[1,"first-session"],[1,"progress-bar"],[1,"in-progress"],[3,"buttonClick"],[3,"options"],[3,"closeButtonClicked","options"],["animateOnScroll","","animationName","animate__animated animate__fadeInUp",1,"bottom-menu","hide-on-init"],[1,"menu-item"],[1,"icon","ss"],[1,"title","interactable-bold"],["color","primary",3,"buttonClick"],[1,"icon","browser"],["color","secondary",3,"buttonClick"]],template:function(o,r){o&1&&(h(0,rh,4,4,"div",1),h(1,sh,7,0,"div",2),h(2,ch,3,5,"div",3),s(3,"div",4),h(4,lh,2,5,"ss-button",5),h(5,dh,6,3,"ss-button",6),s(6,"div",7),h(7,ph,1,0,"ss-quiet-mode-button",8),h(8,uh,3,2),h(9,gh,2,1,"button",9),h(10,hh,3,4,"button",10),h(11,_h,2,1,"button",11),h(12,vh,3,2,"button",12),c(),s(13,"button",13),C("click",function(){return r.menuOpened=!r.menuOpened}),h(14,bh,1,1,"ss-icon",14),h(15,xh,1,1,"ss-icon",15),c(),h(16,Sh,1,0,"ss-header-avatar",16),h(17,yh,2,0,"ss-button",17),h(18,wh,2,0,"ss-button",18),c(),h(19,Ph,2,15,"ss-widget",19),h(20,kh,2,2),h(21,Th,2,0),s(22,"section",20)(23,"div",21),x(24,"router-outlet"),c(),h(25,Rh,3,5,"div",22),c(),h(26,Vh,2,2),h(27,Lh,3,2,"div",23),x(28,"ss-footer"),h(29,Fh,16,1,"div",24)),o&2&&(_(r.settingsService.settings.systemStatusMessage?0:-1),l(),_(r.signalRService.isDisconnected()?1:-1),l(),_(!r.shouldDisplayFocusPlus||!r.livekit.room.focusPlus.active?2:-1),l(2),_(r.accountService.isFullyVerifiedUser()&&!r.subscriptionService.hasPremiumFeatures&&!r.utilityService.isOnPlansAndPricingPage()?4:-1),l(),_(r.shouldDisplayFocusPlus?5:-1),l(),I("show",r.menuOpened),l(),_(r.authenticated?7:-1),l(),_(!r.settingsService.isB2BApp()&&!r.subscriptionService.isD0AndFree?8:-1),l(),_(r.authenticated&&!r.isTasksPage?9:-1),l(),_(r.authenticated&&!r.settingsService.isB2BApp()?10:-1),l(),_(r.pomodoroTimerWidget?11:-1),l(),_(r.authenticated?12:-1),l(2),_(r.menuOpened?-1:14),l(),_(r.menuOpened?15:-1),l(),_(r.authenticated?16:-1),l(),_(r.authenticated?-1:17),l(),_(r.authenticated?-1:18),l(),_(r.pomodoroTimerWidget?19:-1),l(),_(r.authenticated&&!r.isMobile?20:-1),l(),_(r.authenticated&&r.notificationCenterActive?21:-1),l(),I("hundred-ms-initialized",r.hundredMsInitialized)("expanded-sidebar",r.sidebarExpanded&&!r.isMobile)("ads-shown",!r.subscriptionService.adsDisabled),l(),I("focus-room",r.isFocusRoom),l(2),_(r.subscriptionService.adsDisabled?-1:25),l(),_(r.isFocusRoom&&(!r.shouldDisplayFocusPlus||!r.livekit.room.focusPlus.active)&&r.encouragementService.encouragementsReceived.length>0?26:-1),l(),_(r.toastService.toasts.length>0||r.showPinnedInfo?27:-1),l(2),_(r.showMobileAppPrompt?29:-1))},dependencies:[Ln,Oc,Za,ac,Tc,ic,Pc,H,j,La,ya,Qs,Xs,Js,$e,Yd,Xd,Zd,ep,Hc,Yc,rp,go],styles:["[_nghost-%COMP%]{position:relative;display:flex;max-height:100vh;overflow:hidden}@media only screen and (max-width: 1024px){[_nghost-%COMP%]{height:100%;overflow:auto}}.top-menu[_ngcontent-%COMP%]{position:absolute;top:8px;right:16px;z-index:5;display:flex;align-items:center}@media only screen and (max-width: 1024px){.top-menu[_ngcontent-%COMP%]{right:8px}}@media only screen and (max-width: 767px){.top-menu[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 479px){.top-menu[_ngcontent-%COMP%]{justify-content:space-between;flex-wrap:wrap}}.top-menu[_ngcontent-%COMP%]   .drawer[_ngcontent-%COMP%]{display:flex}@media only screen and (max-width: 1279px){.top-menu[_ngcontent-%COMP%]   .drawer[_ngcontent-%COMP%]{position:absolute;right:100%;max-width:0;min-width:0;width:0;overflow:hidden;transition:all .3s ease-in-out}.top-menu[_ngcontent-%COMP%]   .drawer.show[_ngcontent-%COMP%]{max-width:300%;min-width:40%;width:auto}}.top-menu[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]{margin-left:16px}@media only screen and (max-width: 767px){.top-menu[_ngcontent-%COMP%]   ss-button.login-button[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 479px){.top-menu[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]{margin-left:12px}}.top-menu[_ngcontent-%COMP%]   ss-button.fix-payment[_ngcontent-%COMP%]     button{background:var(--warning)!important}.top-menu[_ngcontent-%COMP%]   ss-button.start-working[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.top-menu[_ngcontent-%COMP%]   ss-button.start-working[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .main-text[_ngcontent-%COMP%]{line-height:16px}.top-menu[_ngcontent-%COMP%]   ss-button.start-working[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{font-size:10px;font-weight:400;line-height:10px}.top-menu-item[_ngcontent-%COMP%]{margin-left:12px}@media only screen and (max-width: 767px){.top-menu-item[_ngcontent-%COMP%]{margin-left:8px}}.top-menu-item.top-menu-button[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;min-width:36px;width:36px;height:36px;padding:0;border:1px solid var(--accent-blue-90);border-radius:50%;box-shadow:var(--round-button);background:var(--overlay);background-size:auto;cursor:pointer}.top-menu-item.top-menu-button[_ngcontent-%COMP%]:hover, .top-menu-item.top-menu-button.active[_ngcontent-%COMP%]{background:var(--accent-blue-80)}@media only screen and (max-width: 767px){.top-menu-item.top-menu-button.task-tray[_ngcontent-%COMP%], .top-menu-item.top-menu-button.new-features[_ngcontent-%COMP%]{display:none}}.top-menu-item.top-menu-button[_ngcontent-%COMP%]   .unread-count[_ngcontent-%COMP%]{position:absolute;top:24px;right:1px;display:flex;justify-content:center;align-items:center;min-width:15px;min-height:15px;padding:0 5px;border:1px solid var(--blue-black);border-radius:6px;font-size:9px;font-weight:700;color:var(--contrast);background:var(--accent-blue)}.top-menu-item.drawer-button[_ngcontent-%COMP%]{display:none}@media only screen and (max-width: 1279px){.top-menu-item.drawer-button[_ngcontent-%COMP%]{display:block}}.menu-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;width:152px}.sidebar-wrapper[_ngcontent-%COMP%]{position:relative}.sidebar-wrapper[_ngcontent-%COMP%]:hover   .collapse-arrow[_ngcontent-%COMP%]{opacity:1}@media only screen and (max-width: 1024px){.sidebar-wrapper[_ngcontent-%COMP%]   .ads-shown[_ngcontent-%COMP%]{bottom:90px;z-index:6}}@media only screen and (max-width: 767px){.sidebar-wrapper[_ngcontent-%COMP%]   .ads-shown[_ngcontent-%COMP%]{bottom:60px}}.collapse-arrow[_ngcontent-%COMP%]{display:flex}.collapse-arrow.collapsed[_ngcontent-%COMP%]  i{margin-top:0;margin-left:0;transform:rotate(180deg)}@media only screen and (max-width: 1024px){.collapse-arrow[_ngcontent-%COMP%]{display:none}}.dashboard-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;width:calc(100% - 56px);height:calc(var(--vh))}.dashboard-wrapper.expanded-sidebar[_ngcontent-%COMP%]{width:calc(100% - 200px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.expanded-sidebar[_ngcontent-%COMP%]{width:100%}}.dashboard-wrapper[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%]{width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%]  ss-hundred-ms-test-prebuilt{height:100%}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%]{height:calc(var(--vh) - 90px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%]{height:calc(var(--vh) - 149px)}}@media only screen and (max-width: 767px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%]{height:calc(var(--vh) - 120px)}}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper.focus-room[_ngcontent-%COMP%]{height:calc(var(--vh) - 91px)}}@media only screen and (max-width: 767px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper.focus-room[_ngcontent-%COMP%]{height:calc(var(--vh) - 60px)}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{z-index:2;display:flex!important;justify-content:center;align-items:center;flex-shrink:0;width:100%;gap:32px}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%] + div.focus-buddies[_ngcontent-%COMP%]{background:var(--alt-40)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:fixed;bottom:0;z-index:5}}@media only screen and (max-width: 539px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .router-wrapper[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{height:60px}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]{display:flex;text-align:center;flex-direction:column;justify-content:center;align-items:center;width:728px;height:90px;padding:5px 10px;border:4px solid var(--warning)}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:normal}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}}@media only screen and (max-width: 767px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]{width:468px;height:60px;padding:0 10px}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px}}@media only screen and (max-width: 539px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]{width:320px;height:50px;padding:0}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]   .ads-block-warning[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-user-dashboard .rooms{height:calc(var(--vh) - 236px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-user-dashboard .rooms{height:auto}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-user-dashboard .actions{height:calc(var(--vh) - 186px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-user-dashboard .actions{height:auto}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-room{height:calc(100% - 56px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-room{height:100%}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-room .room-wrapper, .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-room .right{height:100%}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-room ss-focus-plus{width:100vw;height:calc(100vh - 90px)}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-room ss-focus-plus ss-focus-room-tile-grid{width:100vw!important;height:calc(100vh - 210px)!important}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-room-session-group{height:calc(var(--vh) - 146px)}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-session-summary .session-wrapper{height:calc(var(--vh) - 146px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-session-summary .session-wrapper{height:calc(var(--vh) - 149px)}}@media only screen and (max-width: 767px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-session-summary .session-wrapper{height:calc(var(--vh) - 120px)}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-session-summary .summary{height:calc(var(--vh) - 186px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-session-summary .summary{height:auto}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-session-summary .encouragements{height:calc(var(--vh) - 264px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-session-summary .encouragements{height:auto}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-break-video-page .break-mode-wrapper{height:calc(var(--vh) - 146px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-break-video-page .break-mode-wrapper{height:calc(var(--vh) - 149px)}}@media only screen and (max-width: 767px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-break-video-page .break-mode-wrapper{height:calc(var(--vh) - 120px)}}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations{height:calc(var(--vh) - 120px)}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations .page-content-wrapper{height:calc(100% - 56px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations .page-content-wrapper{height:100%}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations .conversation-list-wrapper, .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations ss-threads, .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations ss-bookmarks{height:calc(var(--vh) - 146px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations .conversation-list-wrapper, .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations ss-threads, .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations ss-bookmarks{height:calc(var(--vh) - 205px)}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations ss-message-list{height:calc(var(--vh) - 220px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations ss-message-list{height:calc(var(--vh) - 278px)}}@media only screen and (max-width: 767px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-conversations ss-message-list{height:calc(var(--vh) - 250px)}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-buddies .create-post-wrapper{height:calc(var(--vh) - 150px)}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-buddies .columns-wrapper{height:calc(var(--vh) - 182px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-buddies .main-wrapper{height:calc(var(--vh) - 249px)}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-buddies .create-post-wrapper, .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-focus-buddies .columns-wrapper{height:calc(var(--vh) - 242px)}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-tasks{height:auto}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-tasks .tasks-wrapper{height:calc(var(--vh) - 146px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-tasks .tasks-wrapper{height:calc(var(--vh) - 205px)}}@media only screen and (max-width: 767px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-tasks .tasks-wrapper{height:calc(var(--vh) - 176px)}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-profile .page-content-wrapper{height:calc(100% - 146px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-profile .page-content-wrapper{height:100%}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-profile ss-summary-tab, .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-profile ss-statistics-tab{height:calc(var(--vh) - 254px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-profile ss-summary-tab, .dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-profile ss-statistics-tab{height:auto}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-hundred-ms-test-prebuilt{height:calc(100% - 90px)}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-plans-and-pricing .plans-and-pricing-wrapper{height:calc(var(--vh) - 146px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-plans-and-pricing .plans-and-pricing-wrapper{height:calc(var(--vh) - 205px)}}@media only screen and (max-width: 767px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-plans-and-pricing .plans-and-pricing-wrapper{height:calc(var(--vh) - 176px)}}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-groups .conversation-list-wrapper{height:calc(100vh - 147px)}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-groups ss-group{height:calc(var(--vh) - 206px)}.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-groups ss-group-members .list-wrapper{height:calc(var(--vh) - 270px)}@media only screen and (max-width: 1024px){.dashboard-wrapper.ads-shown[_ngcontent-%COMP%]  ss-leaderboards{height:calc(var(--vh) - 123px)}}@media only screen and (max-width: 1024px){.dashboard-wrapper[_ngcontent-%COMP%]{position:relative;left:0;width:100%;height:100%;transition:all .2s}}@media only screen and (max-width: 1024px){.dashboard-wrapper.hundred-ms-initialized[_ngcontent-%COMP%]{height:calc(100vh - 113px)}}@media only screen and (max-width: 1024px){  body.emulator .page-wrapper .dashboard-wrapper.hundred-ms-initialized{height:calc(100vh - 49px)}}.important-notice-bar[_ngcontent-%COMP%], .reconnect-bar[_ngcontent-%COMP%]{position:absolute;z-index:6;display:flex;justify-content:center;align-items:center;width:100%;height:40px;color:var(--default);background:var(--accent-blue-90)}.important-notice-bar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .reconnect-bar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;margin-right:30px}.important-notice-bar[_ngcontent-%COMP%]   ss-button-small[_ngcontent-%COMP%], .reconnect-bar[_ngcontent-%COMP%]   ss-button-small[_ngcontent-%COMP%]{margin-left:20px}.important-notice-bar[_ngcontent-%COMP%]   .celebration[_ngcontent-%COMP%], .reconnect-bar[_ngcontent-%COMP%]   .celebration[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;margin-left:12px;background:url(/assets/icons/celebration-icon.webp) center no-repeat;background-size:contain}@media only screen and (max-width: 1024px){.important-notice-bar[_ngcontent-%COMP%]   .celebration[_ngcontent-%COMP%], .reconnect-bar[_ngcontent-%COMP%]   .celebration[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:7px}}@media only screen and (max-width: 574px){.important-notice-bar[_ngcontent-%COMP%]   .celebration[_ngcontent-%COMP%], .reconnect-bar[_ngcontent-%COMP%]   .celebration[_ngcontent-%COMP%]{top:8px;right:8px}}.important-notice-bar[_ngcontent-%COMP%]{height:50px;background:var(--accent-gradient-60)}.important-notice-bar[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:30px;transform:translateY(-50%)}@media only screen and (max-width: 767px){.important-notice-bar[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 767px){.reconnect-bar[_ngcontent-%COMP%]{display:none}}ss-dm-tray[_ngcontent-%COMP%]{position:absolute;top:56px;right:164px;z-index:7}.dm-overlay[_ngcontent-%COMP%], .notification-center-overlay[_ngcontent-%COMP%], .tasks-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:6;width:100%;height:100%}.tasks-overlay[_ngcontent-%COMP%]{z-index:5}@media only screen and (max-width: 1024px){ss-footer[_ngcontent-%COMP%]{display:none}}#bottom-toast-wrapper[_ngcontent-%COMP%]{position:fixed;bottom:100px;left:70px;z-index:1000;width:400px;border-radius:16px}#bottom-toast-wrapper.has-elements[_ngcontent-%COMP%]{padding:0 12px 8px 8px}@media only screen and (max-width: 1024px){#bottom-toast-wrapper[_ngcontent-%COMP%]{position:absolute;bottom:135px;left:30px}}@media only screen and (max-width: 479px){#bottom-toast-wrapper[_ngcontent-%COMP%]{right:0;left:0;display:block;width:calc(100% - 20px);margin:0 10px}}.virtual-scroll-container[_ngcontent-%COMP%]{width:100%;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){.virtual-scroll-container[_ngcontent-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}.virtual-scroll-container[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}.virtual-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar, .virtual-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}.virtual-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.mobile-app-prompt[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:6;display:flex;flex-direction:column;justify-content:flex-end;width:100%;height:100%;background-color:#00000042}.bottom-menu[_ngcontent-%COMP%]{padding:24px 20px 12px;border-radius:24px 24px 0 0;background-color:var(--grayscale)}.bottom-menu[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:16px;text-align:center}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.menu-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;margin-right:16px}.menu-item[_ngcontent-%COMP%]   .icon.ss[_ngcontent-%COMP%]{background:url(/assets/images/ss-mobile-app-button.svg) center no-repeat}.menu-item[_ngcontent-%COMP%]   .icon.browser[_ngcontent-%COMP%]{background:url(/assets/images/browser-button.svg) center no-repeat}.menu-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:auto}.menu-item[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]  button.primary, .menu-item[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]  button.secondary{min-width:84px;height:36px}.focus-buddy-progress[_ngcontent-%COMP%]{width:326px;padding:18px;margin-bottom:20px;border-radius:16px;box-shadow:var(--elevation-s3);background:var(--contrast)}.focus-buddy-progress[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:12px}.focus-buddy-progress[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:6px}.focus-buddy-progress[_ngcontent-%COMP%]   .first-session[_ngcontent-%COMP%]{text-align:center;margin:18px 0 20px}.focus-buddy-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{display:flex;width:100%;height:8px;overflow:auto;margin-top:8px;border-radius:12px;background:var(--accent-gradient-90)}.focus-buddy-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .in-progress[_ngcontent-%COMP%]{width:50%;background:var(--accent-blue)}.focus-buddy-progress[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]{width:100px;margin:0 auto}.dark-theme[_nghost-%COMP%]   .top-menu[_ngcontent-%COMP%]   .top-menu-item.top-menu-button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .top-menu[_ngcontent-%COMP%]   .top-menu-item.top-menu-button[_ngcontent-%COMP%]{color:var(--contrast)}.dark-theme[_nghost-%COMP%]   footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--default)}.dark-theme[_nghost-%COMP%]   footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--accent-blurple)}"]});let e=i;return e})(),hr=function(e){return e[e.Logout=0]="Logout",e[e.Unload=1]="Unload",e}(hr||{});var lp=(()=>{let i=class i{constructor(t,o){this.router=t,this.settingsService=o}canActivate(){return this.settingsService.settings.showBreakVideos?!0:(this.router.navigate(["404"]),!1)}};i.\u0275fac=function(o){return new(o||i)(X(Z),X(ie))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var pp=(()=>{let i=class i{constructor(t){this.redirectService=t}canActivate(t,o){let r=`${location.origin}${o.url}`;return this.redirectService.resolveAuthentication(r)}};i.\u0275fac=function(o){return new(o||i)(X(vi))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var mp=(()=>{let i=class i{constructor(t,o,r){this.accountService=t,this.router=o,this.loaderService=r}resolve(t,o){if(!this.accountService.authenticated())return Qi({});this.loaderService.start();let r=this.accountService.currentUser;return(!r||!r.id)&&(this.loaderService.stop(),this.router.navigate(["/404"])),Qi({})}};i.\u0275fac=function(o){return new(o||i)(X(T),X(Z),X(Oe))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var up=(()=>{let i=class i{constructor(t,o,r,a,m){this.loaderService=t,this.activatedRoute=o,this.router=r,this.dialog=a,this.toastService=m,this.openedFromSource=null,this.loaderService.stop()}ngAfterViewInit(){this.activatedRoute.queryParams.subscribe(t=>{t.success===void 0&&t.errorCode===void 0&&t.openedFromSource===void 0||setTimeout(()=>this.resolveCallbackParams(t.success==="true",t.errorCode,t.openedFromSource))})}resolveCallbackParams(t,o,r){t?(this.toastService.success({title:"Thank you.",message:"You have successfully subscribed.",autoClose:!1}),this.dialog.open(hc,{panelClass:"fullscreen-dialog",width:"480px"})):o&&this.toastService.error({exceptionDetail:{errorCode:o}}),r&&(this.openedFromSource=r),this.router.navigate([],{queryParams:{success:null,errorCode:null,openedFromSource:null},queryParamsHandling:"merge"})}};i.\u0275fac=function(o){return new(o||i)(u(Oe),u(je),u(Z),u(Ce),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-plans-and-pricing"]],standalone:!1,decls:3,vars:1,consts:[[1,"plans-and-pricing-wrapper"],[3,"openedFromSource"]],template:function(o,r){o&1&&(x(0,"ss-main-app-header"),s(1,"div",0),x(2,"ss-subscriptions-block",1),c()),o&2&&(l(2),g("openedFromSource",r.openedFromSource))},dependencies:[jt,wc],styles:[".plans-and-pricing-wrapper[_ngcontent-%COMP%]{height:calc(var(--vh) - 56px);overflow:auto;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){.plans-and-pricing-wrapper[_ngcontent-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}.plans-and-pricing-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}.plans-and-pricing-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .plans-and-pricing-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}.plans-and-pricing-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}@media only screen and (max-width: 1024px){.plans-and-pricing-wrapper[_ngcontent-%COMP%]{height:calc(var(--vh) - 112px)}}"]});let e=i;return e})();var gp=(()=>{let i=class i{constructor(t,o,r,a){this.loaderService=t,this.activatedRoute=o,this.router=r,this.toastService=a,this.loaderService.stop()}ngAfterViewInit(){this.activatedRoute.queryParams.subscribe(t=>{t.success===void 0&&t.errorCode===void 0||setTimeout(()=>this.resolveCallbackParams(t.success==="true",t.errorCode))})}resolveCallbackParams(t,o){t?this.toastService.success({title:"Thank you.",message:"You purchased additional focus room hours. Note: They will be added to your total purchased hours only after your payment goes through.",autoClose:!1}):o&&this.toastService.error({exceptionDetail:{errorCode:o},autoClose:!1}),this.router.navigate([],{queryParams:{success:null,errorCode:null},queryParamsHandling:"merge"})}};i.\u0275fac=function(o){return new(o||i)(u(Oe),u(je),u(Z),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-purchase-focus-room-hours"]],standalone:!1,decls:3,vars:0,consts:[[1,"purchase-wrapper"]],template:function(o,r){o&1&&(x(0,"ss-main-app-header"),s(1,"div",0),x(2,"ss-products-block"),c())},dependencies:[jt,xc],styles:[".purchase-wrapper[_ngcontent-%COMP%]{height:calc(var(--vh) - 56px);overflow:auto;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){.purchase-wrapper[_ngcontent-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}.purchase-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}.purchase-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .purchase-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}.purchase-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}@media only screen and (max-width: 1024px){.purchase-wrapper[_ngcontent-%COMP%]{height:calc(var(--vh) - 112px)}}"]});let e=i;return e})();var fp=(()=>{let i=class i{constructor(t){this.accountService=t}checkForAndTagFirstSession(){let t=localStorage.getItem(wr),o=!this.accountService.isFullyVerifiedUser(),r=this.accountService.authenticated(),a=Xe(this.accountService.currentUser)<2,m=o||a||!r;t||typeof hj!="function"||!m||(hj("identify",this.accountService.currentUser.id??this.accountService.getAnonymousUserIdAndEnsureCreated(),{isNewUser:a,isAnonymousUser:o,isAuthenticated:r}),hj("event","first_session_start"),localStorage.setItem(wr,"true"))}};i.\u0275fac=function(o){return new(o||i)(X(T))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function jh(e,i){if(e&1){let n=w();s(0,"button",3),C("click",function(){v(n);let o=d(2);return b(o.welcomeSectionVisible=!1)}),x(1,"ss-icon",4),c()}e&2&&(l(),g("size",24)("iconVariant",24))}function Wh(e,i){e&1&&(s(0,"strong"),p(1,"Our \u{1F3A7} Focus Rooms are especially designed to elevate your remote & hybrid working experience, getting accountability & motivation from others."),c(),s(2,"p"),p(3,"Whether you're a \u{1F4BB} remote employee, \u{1F4B8} freelancer, or a \u{1F30E} digital nomad, our rooms connect you with others who share your passion for progress."),c())}function Hh(e,i){e&1&&(s(0,"strong"),p(1,"Our \u{1F393} Focus Rooms are especially designed to elevate your study experience, getting accountability and motivation from others"),c(),s(2,"p"),p(3,"Whether you're a \u{1F9D1}\u200D\u{1F393} student, a \u{1F468}\u200D\u2708\uFE0F professional, or a \u2753 lifelong learner, our rooms connect you with others who share your passion for progress."),c())}function $h(e,i){if(e&1&&(s(0,"div",0)(1,"div",2)(2,"h2"),p(3),c(),h(4,jh,2,2,"button"),c(),h(5,Wh,4,0)(6,Hh,4,0),c()),e&2){let n=d();l(3),k("Welcome to ",n.settingsService.siteName,"!"),l(),_(n.authenticated?4:-1),l(),_(n.settingsService.isB2BApp()||n.settingsService.isCoWork()?5:6)}}function Gh(e,i){if(e&1&&(s(0,"li"),p(1,"Many people "),s(2,"strong"),p(3,"make a new work connection in their first week"),c(),p(4),c()),e&2){let n=d(2);l(4),k(" on ",n.settingsService.siteName,", working together to get more done.")}}function qh(e,i){if(e&1&&(s(0,"li"),p(1,"Many people "),s(2,"strong"),p(3,"find a friend in their first week"),c(),p(4),c()),e&2){let n=d(2);l(4),k(" on ",n.settingsService.siteName,", working together to get more done.")}}function Kh(e,i){if(e&1){let n=w();s(0,"div",1)(1,"div",2)(2,"h2"),p(3,"You're on the right track!"),c(),s(4,"button",3),C("click",function(){v(n);let o=d();return b(o.onTrackSectionVisible=!1)}),x(5,"ss-icon",4),c()(),s(6,"ul")(7,"li")(8,"strong"),p(9,"90% of people"),c(),p(10," achieved more "),s(11,"strong"),p(12,"productivity"),c(),p(13),c(),s(14,"li")(15,"strong"),p(16,"3 out of 4 people"),c(),p(17," reported an "),s(18,"strong"),p(19,"improvement in their mental health"),c(),p(20),c(),h(21,Gh,5,1,"li")(22,qh,5,1,"li"),s(23,"li"),p(24),s(25,"strong"),p(26,"better work-life balance to help your mental health"),c(),p(27,"! Work hard and rest hard."),c()()()}if(e&2){let n=d();l(5),g("size",24)("iconVariant",24),l(8),k(" while using ",n.settingsService.siteName,"."),l(7),k(" after using ",n.settingsService.siteName,"."),l(),_(n.settingsService.isB2BApp()?21:22),l(3),k("You can use ",n.settingsService.siteName," for ")}}var hp=(()=>{let i=class i{constructor(t,o){this.settingsService=t,this.accountService=o,this.shouldShowWelcomeSection=!1,this.shouldShowOnTrackSection=!1,this.welcomeSectionVisible=!0,this.onTrackSectionVisible=!0,this.authenticated=this.accountService.authenticated()}ngOnInit(){this.authenticated&&(this.shouldShowWelcomeSection=this.accountService.isD0,this.shouldShowOnTrackSection=Xe(this.accountService.currentUser)<3&&!this.shouldShowWelcomeSection)}};i.\u0275fac=function(o){return new(o||i)(u(ie),u(T))},i.\u0275cmp=O({type:i,selectors:[["ss-welcome-and-tips-sections"]],standalone:!1,decls:2,vars:2,consts:[[1,"welcome-section"],[1,"right-track-section"],[1,"top"],[3,"click"],["iconName","dismiss","role","button","color","default",3,"size","iconVariant"]],template:function(o,r){o&1&&(h(0,$h,7,3,"div",0),h(1,Kh,28,6,"div",1)),o&2&&(_(r.shouldShowWelcomeSection&&r.welcomeSectionVisible||!r.authenticated?0:-1),l(),_(r.shouldShowOnTrackSection&&r.onTrackSectionVisible?1:-1))},dependencies:[j],styles:[".welcome-section[_ngcontent-%COMP%]{padding:12px 16px;margin-bottom:24px;border-radius:12px;background:var(--alt-60)}.welcome-section[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:16px}.welcome-section[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{margin-bottom:24px}.right-track-section[_ngcontent-%COMP%]{position:relative;padding:24px;margin-bottom:24px;border-radius:24px;background:var(--alt-60)}.welcome-section[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%], .right-track-section[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.welcome-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .right-track-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:24px}.welcome-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .right-track-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;border:0;outline:none;background:none}"]});let e=i;return e})();var Fs=(e,i)=>i.id;function Xh(e,i){e&1&&x(0,"img",9)}function Zh(e,i){e&1&&x(0,"img",10)}function e0(e,i){e&1&&x(0,"img",11)}function t0(e,i){e&1&&x(0,"img",12)}function i0(e,i){if(e&1){let n=w();s(0,"div",6)(1,"h4"),p(2,"People who pinned you today "),s(3,"span",7),p(4),c()()(),s(5,"div",8),h(6,Xh,1,0,"img",9),h(7,Zh,1,0,"img",10),h(8,e0,1,0,"img",11),h(9,t0,1,0,"img",12),s(10,"div",13),x(11,"ss-icon",14),s(12,"div"),p(13,"To see everyone who pinned you today, "),s(14,"a",15),C("click",function(){v(n);let o=d(2);return b(o.subscriptionNavigationService.openPlansAndPricing(o.TriggeredUpgradeFromSourceRef.SessionSummaryPinnedYouInfo))}),p(15,"upgrade to premium."),c()()()()}if(e&2){let n=d(2);l(4),z(n.todayTotalEntries),l(2),_(n.todayTotalEntries>0?6:-1),l(),_(n.todayTotalEntries>1?7:-1),l(),_(n.todayTotalEntries>2?8:-1),l(),_(n.todayTotalEntries>3?9:-1),l(2),g("size",24)("iconVariant",24)}}function n0(e,i){if(e&1){let n=w();s(0,"ss-button",19),C("buttonClick",function(){v(n);let o=d(3);return b(o.openPinnedByUsersModal(o.todayUsers))}),p(1," View all "),c()}}function o0(e,i){if(e&1&&x(0,"ss-pinned-you-user-item",18),e&2){let n=i.$implicit;g("vertical",!0)("user",n)}}function r0(e,i){if(e&1&&(s(0,"div",6)(1,"h4"),p(2,"People who pinned you today "),s(3,"span",7),p(4),c()(),h(5,n0,2,0,"ss-button",16),c(),s(6,"div",17),q(7,o0,1,2,"ss-pinned-you-user-item",18,Fs),c()),e&2){let n=d(2);l(4),z(n.todayUsers.length),l(),_(n.todayUsers.length>4?5:-1),l(2),K(n.todayUsers.slice(0,4))}}function s0(e,i){if(e&1){let n=w();s(0,"ss-button",22),C("buttonClick",function(){v(n);let o=d(3);return b(o.joinRoom())}),p(1),c()}if(e&2){let n=d(3);l(),k(" Join ",n.firstIntegratedFocusRoom.roomDisplayName," ")}}function a0(e,i){if(e&1&&(s(0,"em",20),p(1,"No pins yet today"),c(),s(2,"small"),p(3," Want to get more pins? Try this... "),x(4,"br"),p(5," Enter a focus room, turn your camera on, boost yourself forward and keep working hard! "),c(),h(6,s0,2,1,"ss-button",21)),e&2){let n=d(2);l(6),_(n.firstIntegratedFocusRoom?6:-1)}}function c0(e,i){if(e&1&&(s(0,"div",0)(1,"h2"),p(2,"Today"),c(),s(3,"div",1)(4,"h4"),p(5,"Statistics"),c(),s(6,"div",2)(7,"div",3)(8,"h4"),p(9,"Duration"),c(),x(10,"h1",4),Y(11,"timeDisplayHoursMinutes"),c(),s(12,"div",3)(13,"h4"),p(14," All pins "),x(15,"ss-info-tooltip",5),c(),s(16,"h1"),p(17),c()(),s(18,"div",3)(19,"h4"),p(20,"Encouragements"),c(),s(21,"h1"),p(22),c()()(),s(23,"section"),h(24,i0,16,7)(25,r0,9,2)(26,a0,7,1),c()()()),e&2){let n=d();l(10),g("innerHTML",me(11,5,n.todaySessionSummary.duration),De),l(5),g("isSmall",!0),l(2),z(n.todaySessionSummary.totalPins),l(5),z(n.todaySessionSummary.totalEncouragements),l(2),_(!n.subscriptionService.hasPremiumFeatures&&n.todayTotalEntries>0?24:n.subscriptionService.hasPremiumFeatures&&n.todayUsers.length>0?25:26)}}function l0(e,i){if(e&1&&x(0,"ss-pinned-you-user-item",18),e&2){let n=i.$implicit;g("vertical",!0)("user",n)}}function d0(e,i){e&1&&x(0,"img",9)}function p0(e,i){e&1&&x(0,"img",10)}function m0(e,i){e&1&&x(0,"img",11)}function u0(e,i){if(e&1){let n=w();s(0,"div",6)(1,"h4"),p(2,"People who pinned you yesterday "),s(3,"span",7),p(4),c()()(),s(5,"div",24),q(6,l0,1,2,"ss-pinned-you-user-item",18,Fs),s(8,"div",8),h(9,d0,1,0,"img",9),h(10,p0,1,0,"img",10),h(11,m0,1,0,"img",11),s(12,"div",13),x(13,"ss-icon",14),s(14,"div"),p(15,"You can see one person that pinned you yesterday, visible for 24h. To see everyone who pinned you, "),s(16,"a",15),C("click",function(){v(n);let o=d(2);return b(o.subscriptionNavigationService.openPlansAndPricing(o.TriggeredUpgradeFromSourceRef.SessionSummaryPinnedYouInfo))}),p(17,"upgrade to premium."),c()()()()()}if(e&2){let n=d(2);l(4),z(n.yesterdayTotalEntries),l(2),K(n.yesterdayUsers.slice(0,4)),l(3),_(n.yesterdayTotalEntries>1?9:-1),l(),_(n.yesterdayTotalEntries>2?10:-1),l(),_(n.yesterdayTotalEntries>3?11:-1),l(2),g("size",24)("iconVariant",24)}}function g0(e,i){if(e&1){let n=w();s(0,"ss-button",19),C("buttonClick",function(){v(n);let o=d(3);return b(o.openPinnedByUsersModal(o.yesterdayUsers))}),p(1," View all "),c()}}function f0(e,i){if(e&1&&x(0,"ss-pinned-you-user-item",18),e&2){let n=i.$implicit;g("vertical",!0)("user",n)}}function h0(e,i){if(e&1&&(s(0,"div",6)(1,"h4"),p(2,"People who pinned you yesterday "),s(3,"span",7),p(4),c()(),h(5,g0,2,0,"ss-button",16),c(),s(6,"div",17),q(7,f0,1,2,"ss-pinned-you-user-item",18,Fs),c()),e&2){let n=d(2);l(4),z(n.yesterdayUsers.length),l(),_(n.yesterdayUsers.length>4?5:-1),l(2),K(n.yesterdayUsers.slice(0,4))}}function _0(e,i){if(e&1){let n=w();s(0,"ss-button",22),C("buttonClick",function(){v(n);let o=d(3);return b(o.joinRoom())}),p(1),c()}if(e&2){let n=d(3);l(),k(" Join ",n.firstIntegratedFocusRoom.roomDisplayName," ")}}function C0(e,i){if(e&1&&(s(0,"em"),p(1,"No pins yesterday "),c(),s(2,"small"),p(3,"Jump into a focus room then come back tomorrow to see who pinned you!"),c(),h(4,_0,2,1,"ss-button",21)),e&2){let n=d(2);l(4),_(n.firstIntegratedFocusRoom?4:-1)}}function v0(e,i){if(e&1&&(s(0,"div",0)(1,"h2"),p(2,"Yesterday"),c(),s(3,"div",1)(4,"h4"),p(5,"Statistics"),c(),s(6,"div",2)(7,"div",3)(8,"h4"),p(9,"Duration"),c(),x(10,"h1",4),Y(11,"timeDisplayHoursMinutes"),c(),s(12,"div",3)(13,"h4"),p(14," All pins "),x(15,"ss-info-tooltip",23),c(),s(16,"h1"),p(17),c()(),s(18,"div",3)(19,"h4"),p(20,"Encouragements"),c(),s(21,"h1"),p(22),c()()(),s(23,"section"),h(24,u0,18,6)(25,h0,9,2)(26,C0,5,1),c()()()),e&2){let n=d();l(10),g("innerHTML",me(11,5,n.yesterdaySessionSummary.duration),De),l(5),g("isSmall",!0),l(2),z(n.yesterdaySessionSummary.totalPins),l(5),z(n.yesterdaySessionSummary.totalEncouragements),l(2),_(!n.subscriptionService.hasPremiumFeatures&&n.yesterdayTotalEntries>0?24:n.subscriptionService.hasPremiumFeatures&&n.yesterdayUsers.length>0?25:26)}}function b0(e,i){if(e&1&&(s(0,"div",0)(1,"h2"),p(2,"Last Session Summary"),c(),s(3,"div",1)(4,"h4"),p(5,"Statistics"),c(),s(6,"div",2)(7,"div",3)(8,"h4"),p(9,"Duration"),c(),x(10,"h1",4),Y(11,"timeDisplayHoursMinutes"),c(),s(12,"div",3)(13,"h4"),p(14," All pins "),x(15,"ss-info-tooltip",25),c(),s(16,"h1"),p(17),c()(),s(18,"div",3)(19,"h4"),p(20,"Encouragements"),c(),s(21,"h1"),p(22),c()()()()()),e&2){let n=d();l(10),g("innerHTML",me(11,4,n.lastSessionSummary.duration),De),l(5),g("isSmall",!0),l(2),z(n.lastSessionSummary.totalPins),l(5),z(n.lastSessionSummary.totalEncouragements)}}var _p=(()=>{let i=class i{constructor(t,o,r,a,m,f,S,y,P,M){this.utilityService=t,this.subscriptionService=o,this.subscriptionNavigationService=r,this.accountService=a,this.livekit=m,this.userService=f,this.dialog=S,this.toastService=y,this.analyticsService=P,this.router=M,this.todayUsers=[],this.yesterdayUsers=[],this.TriggeredUpgradeFromSourceRef=Ze}ngOnInit(){this.accountService.isFullyVerifiedUser()&&(this.getPinnedByUsers(),this.livekit.getSpecificDaysSessionsSummary(1,0,!1).subscribe({next:t=>{this.todaySessionSummary=t[1],this.yesterdaySessionSummary=t[0],this.todaySessionSummary.duration===0&&this.yesterdaySessionSummary.duration===0&&this.getLastSessionSummary()}}))}joinRoom(){this.firstIntegratedFocusRoom&&this.router.navigate([this.firstIntegratedFocusRoom.roomUrl])}openPinnedByUsersModal(t){this.analyticsService.markActivity(W.DashboardSeeAllPins),this.dialog.open(bc,{panelClass:"fullscreen-dialog",width:"720px",data:{pinnedByUsers:t,inFocusRoom:!1}})}getLastSessionSummary(){this.livekit.getLastSessionSummary(this.latestRoomName).subscribe({next:t=>this.lastSessionSummary=t,error:t=>this.handleErrors(t)})}getPinnedByUsers(){(this.subscriptionService.hasPremiumFeatures?this.userService.getPinnedByUsersForPremiumUsers(!1):this.userService.getPinnedByUsers()).subscribe({next:o=>{if(this.yesterdayUsers=o.yesterdayUsers,this.yesterdayTotalEntries=o.yesterdayTotalEntries,this.todayTotalEntries=o.todayTotalEntries,this.subscriptionService.hasPremiumFeatures){let r=o;this.yesterdayUsers=r.yesterdayUsers,this.todayUsers=r.todayUsers}},error:o=>this.handleErrors(o)})}handleErrors(t){this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(Me),u(Bt),u(bi),u(T),u(ut),u(so),u(Ce),u(V),u(oe),u(Z))},i.\u0275cmp=O({type:i,selectors:[["ss-dashboard-session-summary"]],inputs:{firstIntegratedFocusRoom:"firstIntegratedFocusRoom",latestRoomName:"latestRoomName"},standalone:!1,decls:3,vars:3,consts:[[1,"session-wrapper"],[1,"statistics"],[1,"info-wrapper"],[1,"info"],[3,"innerHTML"],["text","Total pin count for today",3,"isSmall"],[1,"heading"],[1,"pin-number"],[1,"blur-wrapper"],["src","/assets/images/pinned-by-user-1-vertical.png","alt","pinned-user-1"],["src","/assets/images/pinned-by-user-2-vertical.png","alt","pinned-user-2"],["src","/assets/images/pinned-by-user-3-vertical.png","alt","pinned-user-3"],["src","/assets/images/pinned-by-user-4-vertical.png","alt","pinned-user-4"],[1,"recent-pins-message"],["iconName","lock_closed","color","default",3,"size","iconVariant"],[3,"click"],["color","secondary"],[1,"user-wrapper"],[3,"vertical","user"],["color","secondary",3,"buttonClick"],[1,"no-pins"],[1,"join-room-button"],[1,"join-room-button",3,"buttonClick"],["text","Total pin count for yesterday",3,"isSmall"],[1,"user-blur-wrapper"],["text","Total pin count from last session",3,"isSmall"]],template:function(o,r){o&1&&(h(0,c0,27,7,"div",0),h(1,v0,27,7,"div",0),h(2,b0,23,6,"div",0)),o&2&&(_(r.todaySessionSummary&&r.todaySessionSummary.duration?0:-1),l(),_(r.yesterdaySessionSummary&&r.yesterdaySessionSummary.duration?1:-1),l(),_(r.latestRoomName&&r.lastSessionSummary&&r.lastSessionSummary.duration?2:-1))},dependencies:[vc,H,j,xa,uo],styles:["@media only screen and (max-width: 1024px){[_nghost-%COMP%]{display:block;margin-bottom:20px}}h2[_ngcontent-%COMP%]{margin-bottom:22px}.session-wrapper[_ngcontent-%COMP%]{padding:24px;border-radius:24px;background:var(--alt-60)}.session-wrapper[_ngcontent-%COMP%]:last-of-type{margin-top:24px}.session-wrapper[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]{padding:16px;margin-bottom:22px;border-radius:16px;background:var(--alt-90)}.session-wrapper[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center}@media only screen and (max-width: 767px){.session-wrapper[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px}}@media only screen and (max-width: 767px){.session-wrapper[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.session-wrapper[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]{display:flex;padding-bottom:8px;margin-bottom:12px;border-bottom:1px solid var(--alt)}.session-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex:1}.session-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--default-60)}.session-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   ss-info-tooltip[_ngcontent-%COMP%]{position:relative;top:-6px;left:4px}.session-wrapper[_ngcontent-%COMP%]   .user-blur-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.session-wrapper[_ngcontent-%COMP%]   .blur-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.session-wrapper[_ngcontent-%COMP%]   .blur-wrapper[_ngcontent-%COMP%]   .recent-pins-message[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:flex;align-items:center;width:80%;transform:translate(-50%,-50%)}.session-wrapper[_ngcontent-%COMP%]   .blur-wrapper[_ngcontent-%COMP%]   .recent-pins-message[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{margin-right:8px}.session-wrapper[_ngcontent-%COMP%]   .blur-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:146px;pointer-events:none;-webkit-user-select:none;user-select:none}.session-wrapper[_ngcontent-%COMP%]   .pin-number[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:20px;height:16px;margin-left:4px;border-radius:14px;font-size:11px;color:var(--contrast);background:var(--accent-blue)}.session-wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:10px 0}.session-wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:10px 0}.session-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:24px 0}@media only screen and (max-width: 600px){.session-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}}@media only screen and (max-width: 479px){.session-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.session-wrapper[_ngcontent-%COMP%]   .join-room-button[_ngcontent-%COMP%]{margin-top:20px}.session-wrapper[_ngcontent-%COMP%]   .join-room-button[_ngcontent-%COMP%]  button{width:auto}.session-wrapper[_ngcontent-%COMP%]   .no-pins[_ngcontent-%COMP%]{display:inline-block;margin-bottom:10px}"]});let e=i;return e})();function y0(e,i){if(e&1){let n=w();s(0,"div",0),x(1,"img",3),s(2,"div")(3,"h3"),p(4,"Repair your lost streak"),c(),s(5,"div",4),p(6),c(),s(7,"div",5)(8,"ss-button",6),C("click",function(){v(n);let o=d();return b(o.purchaseStreakRepair())}),p(9),c(),s(10,"div"),p(11),c()()()()}if(e&2){let n=d();l(6),k(" ",n.headerText," "),l(2),g("isLoading",n.purchasingStreakRepair)("color",n.subscriptionService.hasPremiumFeatures?"primary":"blurple-20"),l(),dt(" ",n.buttonLabel," (x",n.repairsNeeded,") "),l(2),z(n.buttonSubtext)}}function w0(e,i){if(e&1){let n=w();s(0,"div",10)(1,"p"),p(2," You have enough repairs to fix "),s(3,"strong"),p(4),c(),p(5),s(6,"strong"),p(7),c(),p(8,". "),c(),s(9,"div",5)(10,"ss-button",6),C("click",function(){v(n);let o=d(2);return b(o.purchaseStreakRepair())}),p(11),c(),s(12,"div"),p(13),c()()()}if(e&2){let n=d(2);l(4),dt("",n.repairsLeft," of ",n.repairsToBuy),l(),k(" missed day",n.repairsToBuy>1?"s":"",". To fully restore your streak, you need to buy "),l(2),dt("",n.repairsNeeded," more streak repair",n.repairsNeeded>1?"s":""),l(3),g("isLoading",n.purchasingStreakRepair)("color",n.subscriptionService.hasPremiumFeatures?"primary":"blurple-20"),l(),dt(" ",n.buttonLabel," (x",n.repairsNeeded,") "),l(2),z(n.buttonSubtext)}}function P0(e,i){if(e&1&&(p(0),Y(1,"shortDate")),e&2){let n=i.$implicit,t=i.$index,o=i.$count;dt(" ",me(1,2,n),"",t!==o-1?", ":""," ")}}function M0(e,i){if(e&1&&(s(0,"div",12)(1,"span"),p(2,"Selected days:"),c(),s(3,"div",14),q(4,P0,2,4,null,null,Et),c()()),e&2){let n=d(2);l(4),K(n.selectedDates)}}function O0(e,i){e&1&&(s(0,"div",13),p(1," No days selected. Please select days from the calendar below to repair your streak. "),c())}function k0(e,i){if(e&1){let n=w();s(0,"ss-user-statistics-chart",15),C("selectedDatesChange",function(o){v(n);let r=d(2);return b(r.onSelectedDatesChange(o))}),c(),s(1,"ss-button",16),C("click",function(){v(n);let o=d(2);return b(o.fixStreakRepair())}),p(2," Fix streak "),c()}if(e&2){let n=d(2);g("userStats",n.userStats)("isMyProfile",!1)("isStreakRepairMode",!0),l(),g("isLoading",n.repairingStreak)("disabled",n.selectedDates.length===0)}}function T0(e,i){if(e&1&&(s(0,"div",1)(1,"div",7),x(2,"img",8),s(3,"div")(4,"h3"),p(5,"Apply your streak repair"),c(),s(6,"p",9),p(7," You missed "),s(8,"strong"),p(9),c(),p(10," in your streak and have "),s(11,"strong"),p(12),c(),p(13," available. "),c(),h(14,w0,14,10,"div",10),c()(),s(15,"div")(16,"div"),p(17," We've pre-selected the days that can be repaired with your available streak repairs. You can modify your selection below: "),c(),s(18,"div",11),h(19,M0,6,0,"div",12),h(20,O0,2,0,"div",13),c()(),h(21,k0,3,5),c()),e&2){let n=d();l(2),g("src",n.repairsNeeded===0?"/assets/icons/repair-happy.svg":"/assets/icons/repair-sad.svg",Tt),l(7),dt("",n.repairsToBuy," day",n.repairsToBuy>1?"s":""),l(3),dt("",n.repairsLeft," streak repair",n.repairsLeft>1?"s":""),l(2),_(n.repairsNeeded>0&&!n.streakRepairInfo.preventPurchase?14:-1),l(5),_(n.selectedDates.length>0?19:-1),l(),_(n.selectedDates.length===0?20:-1),l(),_(n.repairsToBuy>0&&n.userStats?21:-1)}}function E0(e,i){if(e&1){let n=w();s(0,"div",2)(1,"div",17)(2,"span"),p(3),c(),s(4,"div",18),x(5,"span")(6,"span")(7,"span"),c()(),s(8,"div",5)(9,"p"),p(10,"If it takes more than 2 minutes, click the 'Manage' button to see what's going on."),c(),s(11,"ss-button-small",19),C("buttonClick",function(){v(n);let o=d();return b(o.onManageClick())}),p(12," Manage "),c()()()}if(e&2){let n=d();l(3),k("Processing your streak repair",n.repairsToBuy>1?"s":""," purchase"),l(8),g("isLoading",n.creatingPortalSession)("color",n.ButtonColorRef.Secondary)}}var Cp=(()=>{let i=class i{get promoteUpgradeToPremiumAvailable(){return this.subscriptionService.hasPremiumFeatures&&this.streakRepairInfo.promoteUpgradeToPremium}get subscribedWithADifferentProvider(){return this.subscriptionService.hasActiveSubscription&&this.currentUserSubscription?.source!==oo.Stripe}get currentUserSubscription(){return this.accountService.currentUser.subscription}get headerText(){return`Don't let your hard-earned streak go to waste! Restore it by buying ${this.repairsNeeded}
    repair${this.repairsNeeded===1?"":"s"} to fix the missing day${this.repairsNeeded===1?"":"s"}.
    Only available for up to ${this.promoteUpgradeToPremiumAvailable?"24":"3"} days.`}get buttonLabel(){return this.promoteUpgradeToPremiumAvailable?"Upgrade to Premium":"Repair streak"}get buttonSubtext(){return this.promoteUpgradeToPremiumAvailable?"Get a free streak repair with Premium":`Buy ${this.repairsNeeded} repair day${this.repairsNeeded===1?"":"s"} & restore streak`}constructor(t,o,r,a,m,f,S,y){this.subscriptionService=t,this.accountService=o,this.productService=r,this.analyticsService=a,this.userService=m,this.subscriptionNavigationService=f,this.toastService=S,this.signalRService=y,this.streakRepairInfo=this.accountService.currentUser.streakRepairInfo,this.repairsToBuy=this.streakRepairInfo.daysToRepair??0,this.repairsLeft=this.streakRepairInfo.streakRepairsLeft??0,this.repairsNeeded=Math.max(0,this.repairsToBuy-this.repairsLeft),this.purchasingStreakRepair=!1,this.repairingStreak=!1,this.userStats=null,this.creatingPortalSession=!1,this.selectedDates=[],this.ButtonColorRef=Lt,this.subscriptions=[]}ngOnInit(){this.getUserStats(),this.subscriptions.push(this.signalRService.purchasedStreakRepairsUpdated.subscribe(t=>{this.repairsLeft=t.streakRepairsLeft,this.repairsNeeded=Math.max(0,this.repairsToBuy-this.repairsLeft)}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}purchaseStreakRepair(){if(!(this.streakRepairInfo.daysToRepair===null||this.streakRepairProduct===null)){if(this.promoteUpgradeToPremiumAvailable){this.subscriptionNavigationService.openPlansAndPricing(Ze.StreakRepair);return}this.purchasingStreakRepair=!0,this.analyticsService.markActivity(W.PurchaseProductCtaClick,{productName:this.streakRepairProduct.name}),this.productService.createCheckoutSession(this.streakRepairProduct.id,this.streakRepairInfo.daysToRepair).subscribe({next:t=>{location.replace(t.urlToRedirectTo),this.streakRepairInfo.pendingPurchase=!0},error:t=>this.handleErrors(t)})}}onSelectedDatesChange(t){this.selectedDates=t}fixStreakRepair(){this.repairingStreak=!0,this.userService.repairFocusRoomStreak(this.selectedDates).subscribe({next:t=>{this.repairingStreak=!1,this.accountService.currentUser.streakRepairInfo=t,this.accountService.currentUserChange.next(),this.toastService.success({message:"Streak successfully repaired"})},error:t=>this.handleErrors(t)})}onManageClick(){this.subscribedWithADifferentProvider||(this.creatingPortalSession=!0,this.subscriptionService.createPortalSession().subscribe({next:t=>{location.replace(t.urlToRedirectTo),this.creatingPortalSession=!1},error:t=>this.handleErrors(t)}))}getUserStats(){this.userService.getUserFocusRoomStats(this.accountService.currentUser.id).subscribe({next:t=>this.userStats=t,error:t=>this.handleErrors(t)})}handleErrors(t){this.toastService.error({exceptionDetail:t[0]}),this.repairingStreak=!1,this.purchasingStreakRepair=!1}};i.\u0275fac=function(o){return new(o||i)(u(Bt),u(T),u(lo),u(oe),u(so),u(bi),u(V),u(Ge))},i.\u0275cmp=O({type:i,selectors:[["ss-purchase-streak-repair"]],inputs:{streakRepairProduct:"streakRepairProduct"},standalone:!1,decls:3,vars:3,consts:[[1,"wrapper"],[1,"wrapper","big"],[1,"pending-purchase"],["src","/assets/icons/repair-sad.svg","alt","Repair image"],[1,"header"],[1,"button-wrapper"],[3,"click","isLoading","color"],[1,"inner-wrapper"],["alt","Repair image",3,"src"],[1,"streak-info"],[1,"not-enough-repairs"],[1,"selected-dates-wrapper"],[1,"selected-dates"],[1,"selected-dates","no-dates"],[1,"dates"],[3,"selectedDatesChange","userStats","isMyProfile","isStreakRepairMode"],[1,"fix-button",3,"click","isLoading","disabled"],[1,"processing"],[1,"dots"],["iconName","settings","matTooltipClass","subscriptions-tooltip",3,"buttonClick","isLoading","color"]],template:function(o,r){o&1&&(h(0,y0,12,6,"div",0),h(1,T0,22,9,"div",1),h(2,E0,13,3,"div",2)),o&2&&(_(r.repairsToBuy>0&&r.repairsLeft===0&&!r.streakRepairInfo.preventPurchase&&!r.streakRepairInfo.pendingPurchase?0:-1),l(),_(r.repairsLeft>0&&!r.streakRepairInfo.pendingPurchase?1:-1),l(),_(r.streakRepairInfo.pendingPurchase?2:-1))},dependencies:[kc,H,Ci,dc],styles:["[_nghost-%COMP%]{display:block;padding:16px;margin-bottom:24px;border:1px solid var(--alt-40);border-radius:20px;background:var(--grayscale)}.wrapper[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}.wrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;margin-top:8px}.wrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]{margin-bottom:4px}.wrapper.big[_ngcontent-%COMP%]{flex-direction:column}.wrapper.big[_ngcontent-%COMP%]   .inner-wrapper[_ngcontent-%COMP%]{display:flex}img[_ngcontent-%COMP%]{width:120px;height:120px}h3[_ngcontent-%COMP%]{display:flex;margin-bottom:6px}.streak-info[_ngcontent-%COMP%]{margin-bottom:8px}.selected-dates-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:12px 0}.selected-dates-wrapper[_ngcontent-%COMP%]   .selected-dates[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.selected-dates-wrapper[_ngcontent-%COMP%]   .selected-dates.no-dates[_ngcontent-%COMP%]{font-style:italic;color:var(--default-40)}.selected-dates-wrapper[_ngcontent-%COMP%]   .selected-dates[_ngcontent-%COMP%]   .dates[_ngcontent-%COMP%]{font-weight:600}.not-enough-repairs[_ngcontent-%COMP%]{margin-bottom:20px}ss-button[_ngcontent-%COMP%]{min-width:140px}ss-button.fix-button[_ngcontent-%COMP%]{margin:16px 0 0 auto}.pending-purchase[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;padding:8px 16px;border-radius:8px;background-color:var(--alt-60)}.pending-purchase[_ngcontent-%COMP%]   .processing[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.pending-purchase[_ngcontent-%COMP%]   .processing[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:6px}.pending-purchase[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.pending-purchase[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]{display:flex;gap:4px}.pending-purchase[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%;background-color:var(--default-40);animation:_ngcontent-%COMP%_bounce 1.4s infinite ease-in-out}.pending-purchase[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.pending-purchase[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}.pending-purchase[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:12px;font-style:italic;color:var(--default-40);font-size:13px;line-height:20px}ss-user-statistics-chart.table-view[_ngcontent-%COMP%]{height:256px}ss-user-statistics-chart.table-view[_ngcontent-%COMP%]     .data{height:100%}@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]});let e=i;return e})();var vp=(()=>{let i=class i{constructor(t){this.http=t,this.API_ENDPOINT=`${de.apiUrl}/surveys`}createSuperhumanSurveyEntry(t){return this.http.post(`${this.API_ENDPOINT}/superhuman`,t)}};i.\u0275fac=function(o){return new(o||i)(X(mi))},i.\u0275prov=he({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var A0=["surveyForm"],D0=(e,i)=>i.value;function V0(e,i){if(e&1&&(s(0,"mat-radio-button",4),p(1),c()),e&2){let n=i.$implicit;g("value",n.value),l(),k("",n.label," ")}}var bp=(()=>{let i=class i{constructor(t,o,r,a,m){this.settingsService=t,this.toastService=o,this.accountService=r,this.analyticsService=a,this.surveyService=m,this.loading=!1,this.questions={question1Answer:"",question2Answer:"",question3Answer:"",question4Answer:""},this.radioGroupOptions=[{label:"Very upset",value:"Very disappointed"},{label:"Somewhat upset",value:"Somewhat disappointed"},{label:"Not upset",value:"Not disappointed"}]}ngOnInit(){this.analyticsService.markActivity(W.SuperhumanSurveyShowed)}onSubmit(){this.loading=!0,this.surveyService.createSuperhumanSurveyEntry(this.questions).subscribe({next:()=>{this.accountService.currentUser.showSuperhumanSurvey=!1,this.accountService.currentUserChange.next(),this.analyticsService.markActivity(W.SuperhumanSurveySubmitted),this.loading=!1,this.toastService.success({message:"Survey successfully submitted"})},error:t=>this.handleErrors(t)})}handleErrors(t){this.loading=!1,this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(ie),u(V),u(T),u(oe),u(vp))},i.\u0275cmp=O({type:i,selectors:[["ss-superhuman"]],viewQuery:function(o,r){if(o&1&&It(A0,5),o&2){let a;Rt(a=At())&&(r.surveyForm=a.first)}},standalone:!1,decls:25,vars:16,consts:[["surveyForm","ngForm"],[1,"wrapper-form"],["name","question1","required","","validationPropertyName","Answer",3,"ngModelChange","ngModel"],[1,"radio-wrapper"],[3,"value"],[1,"question-wrapper"],["name","question2","validationPropertyName","Answer","placeholder","Please answer thoroughly, to help us improve the platform","minlength","3",3,"ngModelChange","ngModel","rows","required"],["name","question3","validationPropertyName","Answer","placeholder","Please answer thoroughly, to help us improve the platform","minlength","3",3,"ngModelChange","ngModel","rows","required"],["name","question4","validationPropertyName","Answer","placeholder","Please answer thoroughly, to help us improve the platform","minlength","3",3,"ngModelChange","ngModel","rows","required"],[1,"button-wrapper"],["type","submit",3,"buttonClick","disabled","isLoading"]],template:function(o,r){if(o&1){let a=w();s(0,"h2"),p(1,"You are seeing this because you are a paying user and we value your opinion"),c(),s(2,"form",1,0)(4,"mat-radio-group",2),le("ngModelChange",function(f){return v(a),ce(r.questions.question1Answer,f)||(r.questions.question1Answer=f),b(f)}),s(5,"label"),p(6),c(),s(7,"div",3),q(8,V0,2,2,"mat-radio-button",4,D0),c()(),s(10,"div",5)(11,"label"),p(12),c(),s(13,"ss-textarea",6),le("ngModelChange",function(f){return v(a),ce(r.questions.question2Answer,f)||(r.questions.question2Answer=f),b(f)}),c()(),s(14,"div",5)(15,"label"),p(16),c(),s(17,"ss-textarea",7),le("ngModelChange",function(f){return v(a),ce(r.questions.question3Answer,f)||(r.questions.question3Answer=f),b(f)}),c()(),s(18,"div",5)(19,"label"),p(20),c(),s(21,"ss-textarea",8),le("ngModelChange",function(f){return v(a),ce(r.questions.question4Answer,f)||(r.questions.question4Answer=f),b(f)}),c()(),s(22,"div",9)(23,"ss-button",10),C("buttonClick",function(){return v(a),b(r.onSubmit())}),p(24," Submit "),c()()()}if(o&2){let a=Fe(3);l(4),ae("ngModel",r.questions.question1Answer),l(2),k("How upset would you be if ",r.settingsService.siteName," disappeared?"),l(2),K(r.radioGroupOptions),l(4),k("What type of people do you think would most benefit from ",r.settingsService.siteName,"?"),l(),ae("ngModel",r.questions.question2Answer),g("rows",2)("required",!0),l(3),k("What is the main benefit you receive from ",r.settingsService.siteName,"?"),l(),ae("ngModel",r.questions.question3Answer),g("rows",2)("required",!0),l(3),k("How can we improve ",r.settingsService.siteName," for you?"),l(),ae("ngModel",r.questions.question4Answer),g("rows",2)("required",!0),l(2),g("disabled",!a.form.valid)("isLoading",r.loading)}},dependencies:[H,po,fa,We,ua,ha,_a,He,ga,Ia,Ra],styles:["[_nghost-%COMP%]{display:block;padding:24px;margin-bottom:24px;border:1px solid var(--alt);border-radius:24px}h2[_ngcontent-%COMP%]{margin-bottom:30px}.radio-wrapper[_ngcontent-%COMP%]{display:flex;gap:30px}.question-wrapper[_ngcontent-%COMP%]{margin-top:18px}.question-wrapper[_ngcontent-%COMP%]:first-of-type{margin-top:0}label[_ngcontent-%COMP%]{font-weight:500}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}"]});let e=i;return e})();var B0=()=>[],xp=(e,i)=>i.roomName;function L0(e,i){if(e&1){let n=w();x(0,"ss-today-tasks")(1,"ss-rewards"),s(2,"ss-community-block",7),le("eventLoadingChange",function(o){v(n);let r=d(3);return ce(r.eventLoading,o)||(r.eventLoading=o),b(o)}),c()}if(e&2){let n=d(3);l(2),ae("eventLoading",n.eventLoading)}}function F0(e,i){if(e&1){let n=w();s(0,"ss-tabs",6),C("activeTabChange",function(o){v(n);let r=d(2);return b(r.setActiveTab(o))}),c(),h(1,L0,3,1)}if(e&2){let n=d(2);g("primary",!0)("tabs",n.tabs)("activeTab",n.activeTab),l(),_(n.accountService.isFullyVerifiedUser()&&n.activeTab===n.DashboardMobileTabRef.Feed?1:-1)}}function z0(e,i){if(e&1&&(s(0,"div",1),x(1,"ss-account-profile-steps"),h(2,F0,2,4),c()),e&2){let n=d();l(2),_(n.settingsService.isB2BApp()?-1:2)}}function j0(e,i){if(e&1){let n=w();s(0,"ss-poll-block",17),C("pollSubmit",function(o){v(n);let r=d(2);return b(r.setActivePoll(o))}),c()}if(e&2){let n=d(2);g("poll",n.activeDashboardPoll)}}function W0(e,i){e&1&&x(0,"ss-superhuman")}function H0(e,i){if(e&1){let n=w();s(0,"div",9)(1,"button",18),C("click",function(){v(n);let o=d(2);return b(o.closeTopBanner())}),x(2,"ss-icon",19),c(),s(3,"a",20),x(4,"img",21)(5,"img",22),c()()}e&2&&(l(2),g("size",20)("iconVariant",24))}function $0(e,i){if(e&1&&x(0,"ss-purchase-streak-repair",10),e&2){let n=d(2);g("streakRepairProduct",n.streakRepairProduct)}}function G0(e,i){e&1&&x(0,"ss-scientific-assessment-summary")}function q0(e,i){if(e&1&&h(0,G0,1,0,"ss-scientific-assessment-summary"),e&2){let n=d(2);_(n.isD3OrHigher?0:-1)}}function K0(e,i){e&1&&(s(0,"div"),p(1,"streak progress"),c())}function Y0(e,i){e&1&&(s(0,"div",24),p(1,"Streak Achieved!!!"),c())}function Q0(e,i){if(e&1&&(s(0,"div",23),h(1,K0,2,0,"div"),h(2,Y0,2,0,"div",24),s(3,"div",25),x(4,"strong",26),Y(5,"timeDisplayHoursMinutes"),p(6,"/30m"),c()(),s(7,"div",27),x(8,"div",28)(9,"div",29),c()),e&2){let n=d(2);l(),_(n.accountService.currentUser.timeInfo.totalFocusRoomSecondsToday<1800?1:-1),l(),_(n.accountService.currentUser.timeInfo.totalFocusRoomSecondsToday>=1800?2:-1),l(2),g("innerHTML",Dt(5,5,n.accountService.currentUser.timeInfo.totalFocusRoomSecondsToday,!0),De),l(4),_e("width",n.streakProgressCoverLineWidth)}}function J0(e,i){if(e&1){let n=w();s(0,"ss-button-small",30),C("buttonClick",function(){v(n);let o=d(2);return b(o.reportAnIncident())}),p(1," Report an issue "),c()}if(e&2){let n=d(2);g("iconSize",20)("color",n.ButtonColorRef.Secondary)}}function X0(e,i){if(e&1){let n=w();s(0,"ss-button-small",31),C("buttonClick",function(){v(n);let o=d(2);return b(o.createRoomB2B())}),p(1," Create room "),c()}if(e&2){let n=d(2);g("color",n.ButtonColorRef.Secondary)}}function Z0(e,i){e&1&&x(0,"div")}function e_(e,i){e&1&&Be(0,Z0,1,0,"div",33),e&2&&g("ssSkeletonLoader",!0)("ssSkeletonLoaderHeight","161px")("ssSkeletonLoaderWidth","100%")}function t_(e,i){if(e&1){let n=w();s(0,"ss-b2b-room-box",35),C("updateRoom",function(){let o=v(n).$implicit,r=d(5);return b(r.updateRoomB2B(o.roomName))})("deactivateRoom",function(){let o=v(n).$implicit,r=d(5);return b(r.deactivateRoomB2B(o.roomName))}),c()}if(e&2){let n=i.$implicit,t=d(5);g("isMobile",t.isMobile)("room",n),lt("id",n.roomName)}}function i_(e,i){if(e&1&&(s(0,"div",32),q(1,t_,1,3,"ss-b2b-room-box",34,xp),c()),e&2){let n=d(4);l(),K(n.rooms)}}function n_(e,i){if(e&1&&h(0,e_,1,3,"div")(1,i_,3,0,"div",32),e&2){let n=d(3);_(n.roomLoading||n.additionalInfoLoading?0:1)}}function o_(e,i){if(e&1&&h(0,n_,2,1),e&2){let n=d(2);_(n.accountService.isFullyVerifiedUser()?0:-1)}}function r_(e,i){e&1&&x(0,"ss-room-loader")(1,"ss-room-loader")(2,"ss-room-loader")}function s_(e,i){if(e&1&&x(0,"ss-room-box",39),e&2){let n=d().$implicit,t=d(4);_e("background-color","#"+(t.currentTheme===t.UserThemeRef.Light?n.roomLightThemeColor:n.roomDarkThemeColor)),g("isMobile",t.isMobile)("room",n)("isLatestRoom",t.isLatestRoom(n.roomName))("hasSession",t.hasRoomSessionToday(n.roomName))("latestRoomUsers",t.isLatestRoom(n.roomName)?t.latestRoomUsersToPinFromDashboard:qs(10,B0))("latestRoomUsersLoading",t.latestRoomUsersLoading)("matTooltip",n.disabled?"This room is temporarily closed":""),lt("id",n.roomName)}}function a_(e,i){if(e&1&&h(0,s_,1,11,"ss-room-box",38),e&2){let n=i.$implicit,t=i.$index,o=d(4);_(o.shouldShowRoom(n.roomName,t)?0:-1)}}function c_(e,i){if(e&1&&q(0,a_,1,1,null,null,xp),e&2){let n=d(3);K(n.rooms)}}function l_(e,i){if(e&1){let n=w();s(0,"ss-button",40),C("buttonClick",function(){v(n);let o=d(3);return b(o.viewHiddenRooms=!0)}),p(1),c()}if(e&2){let n=d(3);l(),k(" ",n.viewOtherRoomsText," ")}}function d_(e,i){e&1&&x(0,"ss-pin-reason-chart")}function p_(e,i){if(e&1&&(s(0,"div",36),h(1,r_,3,0)(2,c_,2,0),c(),h(3,l_,2,1,"ss-button",37),h(4,d_,1,0,"ss-pin-reason-chart")),e&2){let n=d(2);l(),_(n.roomLoading||n.additionalInfoLoading?1:2),l(2),_(!n.viewHiddenRooms&&n.rooms.length>n.displayedRoomsCount?3:-1),l(),_(n.accountService.isFullyVerifiedUser()?4:-1)}}function m_(e,i){if(e&1&&x(0,"ss-dashboard-session-summary",15),e&2){let n=d(2);g("latestRoomName",n.latestRoomExists?n.additionalInfo.latestRoomName:null)("firstIntegratedFocusRoom",n.firstIntegratedFocusRoom)}}function u_(e,i){if(e&1){let n=w();s(0,"ss-button-small",41),C("buttonClick",function(){v(n);let o=d(2);return b(o.reportAnIncident())}),p(1," Report an issue "),c()}if(e&2){let n=d(2);g("iconSize",20)("color",n.ButtonColorRef.Secondary)}}function g_(e,i){if(e&1&&(s(0,"div",3),h(1,j0,1,1,"ss-poll-block",8),h(2,W0,1,0,"ss-superhuman"),h(3,H0,6,2,"div",9),h(4,$0,1,1,"ss-purchase-streak-repair",10),x(5,"ss-welcome-and-tips-sections"),h(6,q0,1,1),s(7,"div",11)(8,"div",12),h(9,Q0,10,8),c(),h(10,J0,2,2,"ss-button-small",13),h(11,X0,2,1,"ss-button-small",14),c(),h(12,o_,1,1)(13,p_,5,3),h(14,m_,1,2,"ss-dashboard-session-summary",15),h(15,u_,2,2,"ss-button-small",16),c()),e&2){let n=d();l(),_(n.activeDashboardPoll?1:-1),l(),_(n.accountService.currentUser.showSuperhumanSurvey?2:-1),l(),_(n.showTopBanner&&n.accountService.currentUser.type===n.UserTypeRef.UniStudent?3:-1),l(),_(n.hasRepairProductOrPendingPurchase?4:-1),l(2),_(n.accountService.isFullyVerifiedUser()?6:-1),l(3),_(n.accountService.isFullyVerifiedUser()?9:-1),l(),_(!n.isMobile&&!n.settingsService.isB2BApp()?10:-1),l(),_(n.allowRoomManagement?11:-1),l(),_(n.settingsService.isB2BApp()?12:13),l(2),_(n.additionalInfo?14:-1),l(),_(n.settingsService.isB2BApp()?-1:15)}}function f_(e,i){if(e&1){let n=w();s(0,"ss-button-small",42),C("buttonClick",function(){v(n);let o=d();return b(o.reportAnIncident())}),p(1," Report an issue "),c()}if(e&2){let n=d();g("iconSize",20)("color",n.ButtonColorRef.Secondary)}}function h_(e,i){if(e&1){let n=w();x(0,"ss-today-tasks")(1,"ss-rewards"),s(2,"ss-community-block",7),le("eventLoadingChange",function(o){v(n);let r=d(2);return ce(r.eventLoading,o)||(r.eventLoading=o),b(o)}),c()}if(e&2){let n=d(2);l(2),ae("eventLoading",n.eventLoading)}}function __(e,i){if(e&1&&(s(0,"div",5),x(1,"ss-account-profile-steps"),h(2,h_,3,1),c()),e&2){let n=d();l(2),_(n.accountService.isFullyVerifiedUser()&&!n.settingsService.isB2BApp()?2:-1)}}var Sp=(()=>{let i=class i{get viewOtherRoomsText(){let t=this.rooms.length-this.displayedRoomsCount;return`View ${t} other room${t===1?"":"s"}`}get displayedRoomsCount(){return this.latestRoomExists?1:Math.min(3,this.rooms.length)}get latestRoomExists(){return!!this.additionalInfo?.latestRoomName&&this.rooms.some(t=>t.roomName===this.additionalInfo.latestRoomName)}get shouldCenterBlock(){return this.settingsService.isB2BApp()&&this.accountService.isFullyVerifiedUser()&&this.accountService.currentUser.completedUserProfileWizard}get allowRoomManagement(){return this.settingsService.isB2BApp()&&this.accountService.isFullyVerifiedUser()&&(this.accountService.isInRole(mt.RoomManager)||this.accountService.isInRole(mt.Moderator)||this.accountService.isInRole(mt.Administrator))}get hasRepairProductOrPendingPurchase(){if(!this.streakRepairProduct||!this.isAdminOrModerator)return!1;let t=this.accountService.currentUser?.streakRepairInfo;return!!(t?.daysToRepair||t?.pendingPurchase)}get isAdminOrModerator(){return this.accountService.isInRole(mt.Administrator)||this.accountService.isInRole(mt.Moderator)}get isD3OrHigher(){return Xe(this.accountService.currentUser)>=3}constructor(t,o,r,a,m,f,S,y,P,M,R,A,G,se,Se,at,Gi,qi){this.utilityService=t,this.accountService=o,this.settingsService=r,this.loaderService=a,this.dialog=m,this.router=f,this.focusRoomService=S,this.activatedRoute=y,this.redirectService=P,this.analyticsService=M,this.pollService=R,this.livekit=A,this.themeService=G,this.toastService=se,this.hotjarService=Se,this.productService=at,this.accountModalsService=Gi,this.signalRService=qi,this.rooms=[],this.latestRoomUsersToPinFromDashboard=[],this.activeDashboardPoll=null,this.roomLoading=!1,this.additionalInfoLoading=!1,this.latestRoomUsersLoading=!1,this.eventLoading=!1,this.isMobile=!1,this.viewHiddenRooms=!1,this.showTopBanner=!1,this.streakProgressCoverLineWidth="100%",this.tabs=[$i.Dashboard,$i.Feed],this.activeTab=$i.Dashboard,this.DashboardMobileTabRef=$i,this.ButtonColorRef=Lt,this.UserThemeRef=_i,this.UserTypeRef=ta,this.refreshingRoomsInfo=!1,this.lastRefreshRoomsInfoCallDate=null,this.subscriptions=[],this.setActivePoll()}onVisibilityChange(){document.visibilityState==="visible"&&this.refreshRoomsInfo()}ngOnInit(){this.accountService.isFullyVerifiedUser()&&this.refreshUserTimeInfo(),this.getFocusRooms(!0),this.activatedRoute.queryParams.subscribe(t=>{this.redirectService.notifySuccessfulLogin(t),this.tryToOpenRoom()}),this.subscriptions.push(this.utilityService.isMobile.subscribe(t=>{t!==this.isMobile&&(this.activeTab=$i.Dashboard,this.isMobile=t)}),this.themeService.themeChange.subscribe(t=>this.currentTheme=t),this.focusRoomService.resetRooms.subscribe(()=>{this.rooms=[],this.getFocusRooms()}),this.signalRService.pollCompleted.pipe(Cr(t=>this.activeDashboardPoll?.id===t)).subscribe(t=>{this.toastService.info({message:"You completed this poll in another tab."}),this.setActivePoll({pollId:t,success:!0})})),this.hotjarService.checkForAndTagFirstSession(),this.shouldSetStreakRepairProduct()}ngAfterViewInit(){this.activatedRoute.queryParams.subscribe(t=>{t.streakRepairPurchaseSuccess===void 0&&t.errorCode===void 0||setTimeout(()=>this.resolveCallbackParams(t.streakRepairPurchaseSuccess==="true",t.errorCode))})}resolveCallbackParams(t,o){t?this.toastService.success({title:"Thank you.",message:"You purchased streak repair days. Note: You can use them to repair your streak after payment goes through.",autoClose:!1}):o&&this.toastService.error({exceptionDetail:{errorCode:o},autoClose:!1}),this.router.navigate([],{queryParams:{streakRepairPurchaseSuccess:null,errorCode:null},queryParamsHandling:"merge"})}ngOnDestroy(){this.refreshRoomsInfoTimerSubscription?.unsubscribe(),this.subscriptions.forEach(t=>t.unsubscribe())}reportAnIncident(){this.accountModalsService.ensureUserCompletedBasicInfo()&&this.dialog.open($a,{panelClass:"fullscreen-dialog",width:"480px",disableClose:!0,data:{reportedUser:null,roomName:null,myFocusRoomsModel:{myCurrentRoomName:null,rooms:this.rooms}}})}setActiveTab(t){this.activeTab=t}hasRoomSessionToday(t){return this.additionalInfo?this.additionalInfo.roomNamesWithSessionsToday.some(o=>o===t):!1}shouldShowRoom(t,o){return this.viewHiddenRooms&&this.additionalInfo||!this.accountService.authenticated()?!0:this.latestRoomExists?this.isLatestRoom(t):this.viewHiddenRooms?!0:o<3}isLatestRoom(t){return this.additionalInfo&&this.additionalInfo.latestRoomName===t}closeTopBanner(){this.showTopBanner=!1,localStorage.setItem(aa,"true")}createRoomB2B(){this.openRoomModal(null)}deactivateRoomB2B(t){this.livekit.deactivateB2B(t).subscribe({next:()=>{let o=this.rooms.findIndex(r=>r.roomName===t);o>-1&&this.rooms.splice(o,1)},error:o=>this.handleErrors(o)})}updateRoomB2B(t){this.livekit.getB2B(t).subscribe({next:o=>this.openRoomModal(o),error:o=>this.handleErrors(o)})}setActivePoll(t=null){if(t){let o=this.pollService.userPolls.findIndex(r=>r.id===t.pollId);o>-1&&this.pollService.userPolls.splice(o,1)}this.activeDashboardPoll=this.pollService.userPolls.find(o=>o.location===tn.Dashboard)??null}refreshUserTimeInfo(){let t=pe.now();this.accountService.dateLastRefreshedTimeInfo&&t.diff(this.accountService.dateLastRefreshedTimeInfo,"second").seconds>30&&this.accountService.getUserTimeInfo().subscribe()}openRoomModal(t){t||(t={predefinedUsers:[]}),this.dialog.open(fc,{panelClass:"fullscreen-dialog",width:"600px",data:t}).afterClosed().subscribe(r=>{r&&(this.rooms=[],this.getFocusRooms())})}getDashboardAdditionalInfo(){this.accountService.isFullyVerifiedUser()&&(this.additionalInfoLoading=!0,this.livekit.getDashboardAdditionalInfo().subscribe({next:t=>{this.additionalInfo=t,this.additionalInfoLoading=!1;let o=this.accountService.currentUser.timeInfo.totalFocusRoomSecondsToday,r=o<=1800?Math.round(100*o/1800):100;this.streakProgressCoverLineWidth=(100-r+"%").toString(),this.latestRoomExists&&this.getRoomUsersToPinFromDashboard(this.additionalInfo.latestRoomName)},error:t=>this.handleErrors(t)}))}getRoomUsersToPinFromDashboard(t){this.latestRoomUsersLoading=!0,this.livekit.getRoomUsersToPinFromDashboard(t).subscribe({next:o=>{this.latestRoomUsersToPinFromDashboard=o,this.latestRoomUsersLoading=!1},error:o=>this.handleErrors(o)})}getFocusRooms(t=!1){this.loaderService.stop(),this.roomLoading=!0,this.lastRefreshRoomsInfoCallDate=pe.now(),this.focusRoomService.getActiveForWebAppUser().subscribe(o=>{if(this.rooms=o,this.firstIntegratedFocusRoom=this.rooms.find(a=>a.provider===Fa.Livekit),this.roomLoading=!1,this.rooms.forEach(a=>a.loadedParticipants=!0),this.tryToOpenRoom(),!this.accountService.authenticated())return;t&&this.getDashboardAdditionalInfo(),this.refreshRoomsInfoTimerSubscription?.unsubscribe();let r=this.settingsService.isB2BApp()?3e4:12e4;this.refreshRoomsInfoTimerSubscription=Je(r,r).pipe(Cr(a=>document.visibilityState==="visible"&&!this.refreshingRoomsInfo)).subscribe(()=>this.refreshRoomsInfo())})}refreshRoomsInfo(){this.refreshingRoomsInfo||this.lastRefreshRoomsInfoCallDate&&pe.now().diff(this.lastRefreshRoomsInfoCallDate,"seconds").seconds<30||(this.refreshingRoomsInfo=!0,this.lastRefreshRoomsInfoCallDate=pe.now(),this.focusRoomService.getActiveForWebAppUser().subscribe({next:t=>{for(let o of t){let r=this.rooms.find(a=>a.roomUrl===o.roomUrl&&a.roomName===o.roomName);r&&(r.topParticipants=o.topParticipants,r.currentParticipants=o.currentParticipants)}this.refreshingRoomsInfo=!1},error:t=>this.handleErrors(t)}))}tryToOpenRoom(){let t=this.activatedRoute.snapshot.queryParams;if(!t?.roomUrl||this.rooms.length===0)return;let o=t.roomUrl,r=o.replace("/focus-lite/","/focus/"),a=this.rooms.find(m=>m.roomUrl===r);if(!a){this.router.navigate([],{queryParams:{roomUrl:null},queryParamsHandling:"merge"});return}if(!(a.requiresAuth&&!this.redirectService.resolveAuthentication())){if(this.router.navigate([],{queryParams:{roomUrl:null},queryParamsHandling:"merge"}),a.roomUrl){let m=o.includes("/focus-lite/");this.analyticsService.markActivity(W.RoomJoinClick,{roomName:a.roomName||a.roomDisplayName?.toLocaleLowerCase(),isLiteRoom:m}),this.settingsService.isB2BApp()&&de.livekitRoomNamePrefix&&o.includes(de.livekitRoomNamePrefix)&&(o=o.replace(`${de.livekitRoomNamePrefix}-`,"")),this.router.navigate([o])}this.analyticsService.fireEvent(Te.Click,ke.Button,`${a.roomName||a.roomDisplayName?.toLocaleLowerCase()} join`)}}shouldSetStreakRepairProduct(){this.accountService.currentUser?.streakRepairInfo?.daysToRepair&&(this.productService.activeProductsLoaded?this.streakRepairProduct=this.productService.activeProducts.find(t=>t.type===Or.StreakRepair)||null:this.productService.getActiveProducts().subscribe({next:()=>this.streakRepairProduct=this.productService.activeProducts.find(t=>t.type===Or.StreakRepair)||null,error:t=>this.handleErrors(t)}))}handleErrors(t){this.toastService.error({exceptionDetail:t[0]}),this.refreshingRoomsInfo=!1,this.eventLoading=!1,this.additionalInfoLoading=!1,this.latestRoomUsersLoading=!1}};i.\u0275fac=function(o){return new(o||i)(u(Me),u(T),u(ie),u(Oe),u(Ce),u(Z),u(xi),u(je),u(vi),u(oe),u(ho),u(ut),u(Kn),u(V),u(fp),u(lo),u(Ft),u(Ge))},i.\u0275cmp=O({type:i,selectors:[["ss-user-dashboard"]],hostBindings:function(o,r){o&1&&C("visibilitychange",function(){return r.onVisibilityChange()},wn)},standalone:!1,features:[Mn([kn])],decls:7,vars:8,consts:[["pageTitle","Home"],[1,"mobile-wrapper"],[1,"rooms-and-actions"],[1,"rooms"],["iconName","warning","iconColor","accent-blue-20",1,"mobile-button",3,"iconSize","color"],[1,"actions"],[1,"mobile-tabs",3,"activeTabChange","primary","tabs","activeTab"],[3,"eventLoadingChange","eventLoading"],[3,"poll"],[1,"top-banner"],[3,"streakRepairProduct"],[1,"streak-and-report"],[1,"streak-progress"],["iconName","warning","iconColor","accent-blue-20",3,"iconSize","color"],[3,"color"],[3,"latestRoomName","firstIntegratedFocusRoom"],["iconName","warning","iconColor","accent-blue-20",1,"report-button-news-feed",3,"iconSize","color"],[3,"pollSubmit","poll"],[1,"close-ad",3,"click"],["iconName","dismiss","role","button","color","contrast",3,"size","iconVariant"],["href","https://studystream.typeform.com/to/E1YFimQJ","target","_blank"],["src","/assets/images/berkeley-ad.png","alt","Berkeley ad image",1,"big"],["src","/assets/images/berkeley-ad-small.png","alt","Berkeley ad image",1,"small"],[1,"top"],[1,"achieved-streak-text"],[1,"time"],[3,"innerHTML"],[1,"progress-bar"],[1,"holder"],[1,"fill"],["iconName","warning","iconColor","accent-blue-20",3,"buttonClick","iconSize","color"],[3,"buttonClick","color"],[1,"office-wrapper"],[4,"ssSkeletonLoader","ssSkeletonLoaderHeight","ssSkeletonLoaderWidth"],[3,"isMobile","room"],[3,"updateRoom","deactivateRoom","isMobile","room"],[1,"rooms-wrapper"],["color","alt",1,"show-other-rooms-button"],["matTooltipPosition","above",3,"isMobile","room","backgroundColor","isLatestRoom","hasSession","latestRoomUsers","latestRoomUsersLoading","matTooltip"],["matTooltipPosition","above",3,"isMobile","room","isLatestRoom","hasSession","latestRoomUsers","latestRoomUsersLoading","matTooltip"],["color","alt",1,"show-other-rooms-button",3,"buttonClick"],["iconName","warning","iconColor","accent-blue-20",1,"report-button-news-feed",3,"buttonClick","iconSize","color"],["iconName","warning","iconColor","accent-blue-20",1,"mobile-button",3,"buttonClick","iconSize","color"]],template:function(o,r){o&1&&(x(0,"ss-main-app-header",0),h(1,z0,3,1,"div",1),s(2,"div",2),h(3,g_,16,11,"div",3),h(4,f_,2,2,"ss-button-small",4),h(5,__,3,1,"div",5),c(),x(6,"router-outlet")),o&2&&(l(),_(r.isMobile&&r.accountService.authenticated()?1:-1),l(),I("unauth",!r.accountService.authenticated())("center-block",r.shouldCenterBlock),l(),_(!r.isMobile||r.activeTab===r.DashboardMobileTabRef.Dashboard||!r.accountService.authenticated()?3:-1),l(),_(r.settingsService.isB2BApp()?-1:4),l(),_(r.accountService.authenticated()&&!r.isMobile?5:-1))},dependencies:[Ln,_o,Xa,jt,Ya,Mc,Cc,yc,Sc,H,j,qa,Ci,Ka,en,$e,hp,_p,Cp,qc,bp,Zc,uo],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]     ss-attachments-preview>ss-icon{display:none}ss-main-app-header[_ngcontent-%COMP%]{margin-bottom:40px}@media only screen and (max-width: 1024px){ss-main-app-header[_ngcontent-%COMP%]{margin-bottom:30px}}.mobile-wrapper[_ngcontent-%COMP%]{display:block;margin:0 20px}@media only screen and (max-width: 767px){.mobile-wrapper[_ngcontent-%COMP%]{margin:0 10px}}.mobile-tabs[_ngcontent-%COMP%]{display:flex;margin-bottom:20px}@media only screen and (max-width: 767px){.mobile-tabs[_ngcontent-%COMP%]{padding:0 20px;margin-top:12px}}.mobile-tabs[_ngcontent-%COMP%]   ss-tabs[_ngcontent-%COMP%]{width:406px;box-shadow:var(--elevation-s1-bottom-only)}@media only screen and (max-width: 767px){.mobile-tabs[_ngcontent-%COMP%]   ss-tabs[_ngcontent-%COMP%]{width:100%}}.report-button-news-feed[_ngcontent-%COMP%]{display:none}@media only screen and (max-width: 1024px){.report-button-news-feed[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:15px}}.mobile-actions[_ngcontent-%COMP%]{padding:20px 40px 0}@media only screen and (max-width: 767px){.mobile-actions[_ngcontent-%COMP%]{padding:20px 24px 0}}.mobile-actions[_ngcontent-%COMP%]   ss-event-box[_ngcontent-%COMP%], .mobile-actions[_ngcontent-%COMP%]   ss-to-do-box[_ngcontent-%COMP%]{width:100%;padding:0}.top-banner[_ngcontent-%COMP%]{position:relative;display:flex;margin-bottom:24px}.top-banner[_ngcontent-%COMP%]   .close-ad[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px;border:none;background:none}.top-banner[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%}.top-banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:pointer}.top-banner[_ngcontent-%COMP%]   img.small[_ngcontent-%COMP%]{display:none}@media only screen and (max-width: 767px){.top-banner[_ngcontent-%COMP%]   img.big[_ngcontent-%COMP%]{display:none}.top-banner[_ngcontent-%COMP%]   img.small[_ngcontent-%COMP%]{display:initial}}.rooms-and-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:0 20px}@media only screen and (max-width: 1024px){.rooms-and-actions[_ngcontent-%COMP%]{flex-wrap:wrap;width:100%;height:auto;padding:0}}.rooms-and-actions.unauth[_ngcontent-%COMP%]{justify-content:center}.rooms-and-actions.center-block[_ngcontent-%COMP%]{display:block}.rooms-and-actions.center-block[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]{margin:0 auto}@media only screen and (max-width: 1024px){.rooms-and-actions.center-block[_ngcontent-%COMP%]{display:flex}}.streak-and-report[_ngcontent-%COMP%]{display:flex;margin-bottom:24px}.streak-and-report[_ngcontent-%COMP%]   ss-button-small[_ngcontent-%COMP%]{margin:9px 0 0 30px}.streak-progress[_ngcontent-%COMP%]{flex:1}.streak-progress[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px;color:var(--default-40)}.streak-progress[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{text-transform:uppercase}.streak-progress[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .achieved-streak-text[_ngcontent-%COMP%]{font-weight:800;background:var(--achieved-streak-text-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.streak-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{position:relative;width:100%;height:8px;overflow:hidden;border-radius:6px}@media only screen and (max-width: 1024px){.streak-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{margin-top:0}}.streak-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%]{position:absolute;right:0;width:100%;height:100%;background:var(--alt-60)}.streak-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{width:100%;height:100%;background:var(--streak-progress-fill-gradient)}.rooms-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:18px;width:100%;margin-bottom:24px}@media only screen and (max-width: 1024px){.rooms-wrapper[_ngcontent-%COMP%]{column-gap:20px}}@media only screen and (max-width: 767px){.rooms-wrapper[_ngcontent-%COMP%]{justify-content:center}}.office-wrapper[_ngcontent-%COMP%]{position:relative;left:-5px;display:flex;flex-wrap:wrap;margin-bottom:24px}.rooms[_ngcontent-%COMP%]{flex-wrap:wrap;width:687px;height:calc(var(--vh) - 146px);box-sizing:content-box;padding:0 23px 50px 0;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){.rooms[_ngcontent-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}.rooms[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}.rooms[_ngcontent-%COMP%]::-webkit-scrollbar, .rooms[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}.rooms[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}@media only screen and (max-width: 1024px){.rooms[_ngcontent-%COMP%]{width:100%;height:auto;padding:20px}}@media only screen and (max-width: 767px){.rooms[_ngcontent-%COMP%]{min-width:auto;padding:20px 10px 48px}}.rooms[_ngcontent-%COMP%]   .interactable-bold[_ngcontent-%COMP%]{display:-webkit-box;overflow:hidden;margin-bottom:18px;color:var(--default-40);text-overflow:ellipsis;-webkit-line-clamp:1;-webkit-box-orient:vertical}@media only screen and (max-width: 767px){.rooms[_ngcontent-%COMP%]   .interactable-bold[_ngcontent-%COMP%]{display:block}}.show-other-rooms-button[_ngcontent-%COMP%]{margin-bottom:24px}.mobile-button[_ngcontent-%COMP%]{display:none;margin:20px auto 70px}.mobile-button[_ngcontent-%COMP%]     button{width:300px}.actions[_ngcontent-%COMP%]{width:441px;height:calc(var(--vh) - 97px);scroll-behavior:smooth;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){.actions[_ngcontent-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}.actions[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}.actions[_ngcontent-%COMP%]::-webkit-scrollbar, .actions[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}.actions[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.actions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0}@media only screen and (max-width: 1024px){.actions[_ngcontent-%COMP%]{flex:auto;min-width:auto;width:100%;height:auto;padding:20px 40px 48px;margin:20px 0 60px;border:none}.actions.hide-on-touch-devices[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 767px){.actions[_ngcontent-%COMP%]{flex-direction:column;padding:20px 24px}}@media only screen and (max-width: 479px){.actions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-left:24px}}.actions[_ngcontent-%COMP%]   ss-tabs[_ngcontent-%COMP%]{margin-bottom:20px}@media only screen and (max-width: 1024px){.actions[_ngcontent-%COMP%]   ss-tabs[_ngcontent-%COMP%]{display:none}}"]});let e=i;return e})(),$i=function(e){return e.Dashboard="Dashboard",e.Feed="Feed",e}($i||{});var C_=(e,i)=>i.id;function v_(e,i){if(e&1&&x(0,"iframe",1),e&2){let n=d();g("src",n.activeVideo.trustedVideoSrc,Gs)}}function b_(e,i){if(e&1&&(s(0,"h4"),p(1),c()),e&2){let n=d(3);l(),z(n.activeVibe.videos[n.imageSlider.activeSlide].title)}}function x_(e,i){if(e&1){let n=w();s(0,"ss-icon",26),C("click",function(){v(n);let o=d(3);return b(o.navigateToLink())}),c()}e&2&&g("size",14)}function S_(e,i){if(e&1){let n=w();s(0,"div",18),x(1,"div",27),s(2,"div",28),C("click",function(){v(n);let o=d(3);return b(o.previous())}),c(),s(3,"div",29),C("click",function(){v(n);let o=d(3);return b(o.launch())}),c(),s(4,"div",30),C("click",function(){v(n);let o=d(3);return b(o.next())}),c(),x(5,"div",31),s(6,"small",32),p(7,"Click to launch"),c()()}if(e&2){let n=d(3);l(),_e("background-image","url("+n.activeVibe.videos[n.imageSlider.previousSecond].thumbnailSrc+")"),I("active-vibe",n.activeVibe.videos[n.imageSlider.previousSecond].id===n.activeVideo.id)("back-animation",n.backAnimationActive)("forward-animation",n.forwardAnimationActive),l(),_e("background-image","url("+n.activeVibe.videos[n.imageSlider.previousFirst].thumbnailSrc+")"),I("active-vibe",n.activeVibe.videos[n.imageSlider.previousFirst].id===n.activeVideo.id)("back-animation",n.backAnimationActive)("forward-animation",n.forwardAnimationActive),l(),_e("background-image","url("+n.activeVibe.videos[n.imageSlider.activeSlide].thumbnailSrc+")"),I("active-vibe",n.activeVibe.videos[n.imageSlider.activeSlide].id===n.activeVideo.id)("back-animation",n.backAnimationActive)("forward-animation",n.forwardAnimationActive)("shake-animation",n.helpAnimation.active),l(),_e("background-image","url("+n.activeVibe.videos[n.imageSlider.nextFirst].thumbnailSrc+")"),I("active-vibe",n.activeVibe.videos[n.imageSlider.nextFirst].id===n.activeVideo.id)("back-animation",n.backAnimationActive)("forward-animation",n.forwardAnimationActive),l(),_e("background-image","url("+n.activeVibe.videos[n.imageSlider.nextSecond].thumbnailSrc+")"),I("active-vibe",n.activeVibe.videos[n.imageSlider.nextSecond].id===n.activeVideo.id)("back-animation",n.backAnimationActive)("forward-animation",n.forwardAnimationActive),l(),I("show",n.helpAnimation.active)}}function y_(e,i){if(e&1){let n=w();s(0,"ss-select",33),le("ngModelChange",function(o){v(n);let r=d(3);return ce(r.vibeSelectedOption,o)||(r.vibeSelectedOption=o),b(o)}),C("ngModelChange",function(o){v(n);let r=d(3);return b(r.onVibeChange(o))}),c()}if(e&2){let n=d(3);ae("ngModel",n.vibeSelectedOption),g("options",n.vibeSelectOptions)("noMargin",!0)("small",!0)}}function w_(e,i){if(e&1){let n=w();s(0,"ss-icon",34),C("click",function(){v(n);let o=d(3);return b(o.toggleFavorite())}),c()}e&2&&g("iconVariant",20)("size",20)}function P_(e,i){if(e&1){let n=w();s(0,"div",35),C("click",function(){v(n);let o=d(3);return b(o.toggleFavorite())}),x(1,"ss-icon",36)(2,"ss-icon",37),c()}e&2&&(l(),g("iconVariant",20)("size",20),l(),g("iconVariant",20)("size",20))}function M_(e,i){if(e&1){let n=w();s(0,"div")(1,"div",13)(2,"ss-icon",14),C("click",function(){v(n);let o=d(2);return b(o.previous())}),c(),s(3,"div",15),h(4,b_,2,1,"h4"),h(5,x_,1,1,"ss-icon",16),c(),s(6,"ss-icon",17),C("click",function(){v(n);let o=d(2);return b(o.next())}),c()(),h(7,S_,8,44,"div",18),s(8,"div",19)(9,"h4"),p(10,"Category:"),c(),h(11,y_,1,4,"ss-select",20),c(),s(12,"div",21)(13,"div",22),p(14),c(),s(15,"div",23),h(16,w_,1,2,"ss-icon",24),h(17,P_,3,4,"div",25),c()()()}if(e&2){let n=d(2);l(2),g("size",20),l(2),_(n.activeVibe?4:-1),l(),_(n.isYouTubeLink()?5:-1),l(),g("size",20),l(),_(n.activeVibe?7:-1),l(4),_(n.vibes?11:-1),l(3),k("Current: ",n.activeVideo.title),l(2),_(n.activeVideo.isFav?16:-1),l(),_(n.activeVideo.isFav?-1:17)}}function O_(e,i){e&1&&(s(0,"em",38),p(1,"You haven't added any favourites yet!"),c())}function k_(e,i){if(e&1){let n=w();s(0,"div",41),C("click",function(){let o=v(n).$implicit,r=d(3);return b(r.playFavorite(o))}),s(1,"div",22),x(2,"ss-icon",42),p(3),c(),s(4,"ss-icon",43),C("click",function(o){let r=v(n).$implicit,a=d(3);return b(a.removeFavorite(r,o))}),c()()}if(e&2){let n=i.$implicit;l(2),g("size",16),l(),k(" ",n.title," "),l(),g("iconVariant",20)("size",20)}}function T_(e,i){if(e&1&&(s(0,"div"),h(1,O_,2,0,"em",38),s(2,"div",39),q(3,k_,5,4,"div",40,C_),c()()),e&2){let n=d(2);l(),_(n.favorites.length===0?1:-1),l(2),K(n.favorites)}}function E_(e,i){e&1&&(s(0,"div")(1,"em",38),p(2,"Coming soon!"),c()())}function I_(e,i){if(e&1){let n=w();s(0,"div",8)(1,"div",9),x(2,"ss-icon",10),s(3,"h4"),p(4,"Vibe picker"),c(),s(5,"ss-icon",11),C("click",function(){v(n);let o=d();return b(o.minimizeVibesWidget())}),c()(),s(6,"ss-tabs",12),C("activeTabChange",function(o){v(n);let r=d();return b(r.selectTab(o))})("click",function(){v(n);let o=d();return b(o.vibeTabChange(o.activeVibeTab))}),c(),h(7,M_,18,9,"div"),h(8,T_,5,1,"div"),h(9,E_,3,0,"div"),c()}if(e&2){let n=d();l(2),g("iconVariant",20)("size",20),l(3),g("size",20),l(),g("tabs",n.vibeTabs)("activeTab",n.activeVibeTab),l(),_(n.activeVibeTab===n.VibesTabRef.Presets?7:-1),l(),_(n.activeVibeTab===n.VibesTabRef.Favourites?8:-1),l(),_(n.activeVibeTab===n.VibesTabRef.Custom?9:-1)}}var yp=(()=>{let i=class i{constructor(t,o,r,a,m,f,S,y,P,M,R){this.loaderService=t,this.domSanitizer=o,this.widgetsService=r,this.geolocationService=a,this.accountService=m,this.cd=f,this.analyticsService=S,this.vibeService=y,this.activatedRoute=P,this.redirectService=M,this.toastService=R,this.favorites=[],this.activeVideo={},this.vibeTabs=[Xt.Presets,Xt.Favourites,Xt.Custom],this.activeVibeTab=Xt.Presets,this.VibesTabRef=Xt,this.imageSlider={previousFirst:0,previousSecond:0,activeSlide:0,nextFirst:0,nextSecond:0},this.backAnimationActive=!1,this.forwardAnimationActive=!1,this.hideVibeVideo=!1,this.isMobile=!1,this.widget={},this.helpAnimation={timeoutRef:0,active:!1,shouldShow:!1,handle:()=>{this.helpAnimation.shouldShow&&(this.helpAnimation.active&&this.helpAnimation.stop(),this.helpAnimation.start())},start:()=>{setTimeout(()=>{this.helpAnimation.active=!0},this.animationTimeoutValue),this.helpAnimation.timeoutRef=window.setTimeout(()=>{this.helpAnimation.active=!1,this.helpAnimation.shouldShow=!1},2700)},stop:()=>{this.helpAnimation.active=!1,window.clearTimeout(this.helpAnimation.timeoutRef)}},this.animationTimeoutValue=200,this.authenticated=this.accountService.authenticated()}ngOnInit(){this.currentUser=this.accountService.currentUser;let t=this.geolocationService.isVimeoBanned(),o=this.geolocationService.isYouTubeBanned();this.hideVibeVideo=t&&o,this.vibeService.getCategoriesByType(t).subscribe(r=>this.setVibes(r)),this.activatedRoute.queryParams.subscribe(r=>{this.redirectService.notifySuccessfulLogin(r)}),this.accountService.authenticated()&&this.analyticsService.markActivity(W.SoloRoom)}ngAfterViewInit(){this.listenForPageResize()}ngOnDestroy(){this.vibesWidgetSubscription?.unsubscribe(),this.resizeSubscription.unsubscribe(),this.widgetsService.widgetsMinimized.next(),window.clearTimeout(this.helpAnimation.timeoutRef)}toggleVibesWrapper(){this.analyticsService.fireEvent(Te.Click,ke.Button,"vibe picker"),this.widget.visible=!this.widget.visible,this.accountService.authenticated()?this.widgetsService.updateWidgetPosition(this.widget,ye.Vibes,t=>this.handleErrors(t)):this.widgetsService.localWidgetsUpdated.next()}vibeTabChange(t){let o=t===Xt.Presets?"presets":t===Xt.Favourites?"favourites":"custom";this.analyticsService.fireEvent(Te.Click,ke.Tab,o)}minimizeVibesWidget(){this.widget.visible=!1,this.accountService.authenticated()?this.widgetsService.updateWidgetPosition(this.widget,ye.Vibes,t=>this.handleErrors(t)):this.widgetsService.localWidgetsUpdated.next()}toggleFavorite(){if(this.activeVideo.isFav=!this.activeVideo.isFav,this.activeVideo.isFav)this.favorites.push(this.activeVideo);else{let t=this.favorites.indexOf(this.activeVideo);t>-1&&this.favorites.splice(t,1)}this.updateFavorites(),this.analyticsService.fireEvent(Te.Click,ke.Button,this.activeVideo.title+" favourite")}launch(){this.activeVideo=this.activeVibe.videos[this.imageSlider.activeSlide],this.widget.selectedVibe={id:this.activeVideo.id,videoUrl:this.activeVideo.videoSrc},this.analyticsService.fireEvent(Te.Click,ke.Button,this.activeVideo.title),this.updateWidget()}playFavorite(t){let o=this.vibes.find(r=>r.videos.indexOf(t)>-1);o&&this.setActiveVideo(o,o.videos.indexOf(t),!0)}removeFavorite(t,o){o.stopPropagation();let r=this.favorites.indexOf(t);r>-1&&this.favorites.splice(r,1),t.isFav=!1,this.updateFavorites()}next(){this.backAnimationActive=!0,setTimeout(()=>{this.imageSlider.activeSlide===this.activeVibe.videos.length-1?this.imageSlider.activeSlide=0:this.imageSlider.activeSlide++,this.recalculateSliderIndices(),this.helpAnimation.handle(),this.backAnimationActive=!1},this.animationTimeoutValue),this.analyticsService.fireEvent(Te.Click,ke.Button,"vibe right")}previous(){this.forwardAnimationActive=!0,setTimeout(()=>{this.imageSlider.activeSlide===0?this.imageSlider.activeSlide=this.activeVibe.videos.length-1:this.imageSlider.activeSlide--,this.recalculateSliderIndices(),this.helpAnimation.handle(),this.forwardAnimationActive=!1},this.animationTimeoutValue),this.analyticsService.fireEvent(Te.Click,ke.Button,"vibe left")}onVibeChange(t){let o=this.vibes.find(a=>a.id===t);if(!o)return;this.activeVibe=o,this.imageSlider.activeSlide>this.activeVibe.videos.length-1&&(this.imageSlider.activeSlide=0),this.recalculateSliderIndices(),setTimeout(()=>{document.activeElement.blur()}),this.analyticsService.fireEvent(Te.Click,ke.Dropdown,this.activeVibe.name)}isYouTubeLink(){return this.activeVibe?this.activeVibe.videos[this.imageSlider.activeSlide].videoSrc.indexOf("youtube")>-1:void 0}navigateToLink(){if(!this.activeVibe)return;let o=this.activeVibe.videos[this.imageSlider.activeSlide].videoSrc.split("?")[0].split("/"),r=o[o.length-1];window.open(`https://www.youtube.com/watch?v=${r}`,"_blank")}selectTab(t){this.activeVibeTab=t}setActiveVideo(t,o,r=!1){this.activeVibe=t,this.vibeSelectedOption=this.activeVibe.id,this.activeVideo=this.activeVibe.videos[o],this.imageSlider.activeSlide=o,this.recalculateSliderIndices(),r&&(this.widget.selectedVibe={id:this.activeVideo.id,videoUrl:this.activeVideo.videoSrc},this.updateWidget())}loadFavorites(){this.favorites=[];let t=localStorage.getItem(xr);if(t){let o=JSON.parse(t);for(let r of this.vibes)for(let a of r.videos)a.isFav=o.indexOf(a.id)>-1,a.isFav&&this.favorites.push(a);localStorage.removeItem(xr)}else{let o=this.widget.favourites.map(r=>r.videoUrl);for(let r of this.vibes)for(let a of r.videos)a.isFav=o.indexOf(a.videoSrc)>-1,!this.favorites.find(f=>f.videoSrc===a.videoSrc)&&a.isFav&&this.favorites.push(a)}this.widget.favourites=this.favorites.map(o=>({id:o.id,videoUrl:o.videoSrc}))}findAndSetActiveVideo(){let t=null,o=null;for(let r of this.vibes){for(let a=0;a<r.videos.length;a++)if(r.videos[a].id===this.widget.selectedVibe?.id){t=r,o=a;break}if(t)break}t!==null&&o!==null?this.setActiveVideo(t,o):this.widget.selectedVibe&&(this.setActiveVideo(this.vibes[0],0),this.widget.selectedVibe={id:this.vibes[0].videos[0].id,videoUrl:this.vibes[0].videos[0].videoSrc})}updateFavorites(){this.widget.favourites=this.favorites.map(t=>({id:t.id,videoUrl:t.videoSrc})),this.updateWidget()}recalculateSliderIndices(){let t=this.activeVibe.videos.length;this.imageSlider.activeSlide+1<=t-1?(this.imageSlider.nextFirst=this.imageSlider.activeSlide+1,this.imageSlider.nextFirst+1<=t-1?this.imageSlider.nextSecond=this.imageSlider.nextFirst+1:this.imageSlider.nextSecond=0):(this.imageSlider.nextFirst=0,this.imageSlider.nextSecond=1),this.imageSlider.activeSlide-1>=0?(this.imageSlider.previousFirst=this.imageSlider.activeSlide-1,this.imageSlider.previousFirst-1>=0?this.imageSlider.previousSecond=this.imageSlider.previousFirst-1:this.imageSlider.previousSecond=t-1):(this.imageSlider.previousFirst=t-1,this.imageSlider.previousSecond=t-2)}setVibes(t){for(let o of t)for(let r of o.videos)r.trustedVideoSrc=this.domSanitizer.bypassSecurityTrustResourceUrl(r.videoSrc);this.vibes=t,this.vibeSelectOptions=this.vibes.map(o=>({value:o.id,label:o.name})),this.vibesWidgetSubscription=this.widgetsService.vibesWidgetUpdated.subscribe(o=>{if(this.widget=o,this.loadFavorites(),this.isMobile&&(this.vibesBlockShownOnDesktop=this.widget.visible,this.widget.visible=!1),!this.widget.selectedVibe){this.setActiveVideo(this.vibes[0],1),this.helpAnimation.shouldShow=!0;return}this.findAndSetActiveVideo()}),this.loaderService.stop()}listenForPageResize(){this.resizeSubscription=new Vc(document.body).subscribe(t=>{requestAnimationFrame(()=>{let o=this.isMobile;t&&(this.isMobile=t[0].contentRect.width<=767),!this.currentUser.id&&(o&&!this.isMobile&&(this.widget.visible=this.widget.visible||(this.vibesBlockShownOnDesktop===void 0?!1:this.vibesBlockShownOnDesktop),this.cd.detectChanges()),!o&&this.isMobile&&(this.vibesBlockShownOnDesktop=this.widget.visible,this.widget.visible=!1,this.cd.detectChanges()))})})}updateWidget(){this.accountService.authenticated()?this.widgetsService.updateVibesWidget(this.widget).subscribe({error:t=>this.handleErrors(t)}):this.widgetsService.localWidgetsUpdated.next()}handleErrors(t){this.toastService.error({exceptionDetail:t[0]})}};i.\u0275fac=function(o){return new(o||i)(u(Oe),u(En),u(Mi),u(So),u(T),u(On),u(oe),u(Wc),u(je),u(vi),u(V))},i.\u0275cmp=O({type:i,selectors:[["ss-vibes"]],standalone:!1,decls:13,vars:10,consts:[[1,"thumbnail",3,"src","alt"],["frameborder","0","allowfullscreen","1","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",3,"src"],[1,"toggle-buttons"],["role","button","routerLink","/",1,"toggle-button","button-text"],["iconName","arrow_left","color","default",3,"size"],["role","button",1,"toggle-button","button-text",3,"click"],["iconName","image_multiple","color","default",3,"size"],[1,"vibes-and-rooms-wrappers"],[1,"vibes-wrapper"],[1,"heading"],["iconName","image_multiple","color","default",3,"iconVariant","size"],["role","button","iconName","arrow_minimize","color","default-20","matTooltipPosition","above","matTooltip","Minimize",3,"click","size"],[1,"vibes",3,"activeTabChange","click","tabs","activeTab"],[1,"navigation-wrapper"],["role","button","iconName","chevron_left","color","default-20",1,"back-button",3,"click","size"],[1,"vibe-title"],["role","button","matTooltipPosition","above","matTooltip","View Creator","iconName","link","color","default-20",3,"size"],["role","button","iconName","chevron_right","color","default-20",1,"back-button",3,"click","size"],[1,"slider-wrapper"],[1,"select-wrapper"],["id","type","name","type","placeholder","Presets","panelClass","small-select","labelProperty","label","valueProperty","value",3,"ngModel","options","noMargin","small"],[1,"active-video-info"],[1,"video-name"],[1,"heart-icon-wrapper"],["role","button","iconName","heart","color","accent-blue",1,"favorite-icon",3,"iconVariant","size"],[1,"non-favorite"],["role","button","matTooltipPosition","above","matTooltip","View Creator","iconName","link","color","default-20",3,"click","size"],[1,"slide","previous","second"],[1,"slide","previous","first",3,"click"],[1,"active-slide",3,"click"],[1,"slide","next","first",3,"click"],[1,"slide","next","second"],[1,"notification"],["id","type","name","type","placeholder","Presets","panelClass","small-select","labelProperty","label","valueProperty","value",3,"ngModelChange","ngModel","options","noMargin","small"],["role","button","iconName","heart","color","accent-blue",1,"favorite-icon",3,"click","iconVariant","size"],[1,"non-favorite",3,"click"],["iconName","heart","color","default-20",1,"favorite-icon",3,"iconVariant","size"],["role","button","iconName","heart","color","accent-blue-60",1,"non-favorite-icon",3,"iconVariant","size"],[1,"empty-message"],[1,"favorite-wrapper"],[1,"favorite"],[1,"favorite",3,"click"],["iconName","play","color","default-60",3,"size"],["role","button","iconName","heart","color","accent-blue-20",3,"click","iconVariant","size"]],template:function(o,r){o&1&&(x(0,"img",0),h(1,v_,1,1,"iframe",1),s(2,"div",2)(3,"div",3),x(4,"ss-icon",4),s(5,"span"),p(6,"Leave Space"),c()(),s(7,"div",5),C("click",function(){return r.toggleVibesWrapper()}),x(8,"ss-icon",6),s(9,"span"),p(10,"Vibe picker"),c()()(),s(11,"div",7),h(12,I_,10,8,"div",8),c()),o&2&&(g("src",r.activeVideo.posterSrc,Tt)("alt",r.activeVideo.title),l(),_(r.activeVideo.id&&!r.hideVibeVideo&&!r.isMobile?1:-1),l(),I("unauthenticated",!r.authenticated),l(2),g("size",24),l(3),I("active",r.widget.visible),l(),g("size",24),l(4),_(r.widget.visible?12:-1))},dependencies:[Fn,_o,j,qn,We,He,$e],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100vh}.page-content-wrapper[_ngcontent-%COMP%]{height:calc(100vh - 56px)}@media only screen and (max-width: 1024px){.page-content-wrapper[_ngcontent-%COMP%]{height:100%}}.page-content[_ngcontent-%COMP%]{max-width:1340px;width:100%;padding:50px 70px;margin:0 auto}@media only screen and (max-width: 1024px){.page-content[_ngcontent-%COMP%]{padding:0}}.thumbnail[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;width:100vw;height:100vh;object-fit:contain;transform:translate(-50%,-50%)}@media (aspect-ratio <= 16/9){.thumbnail[_ngcontent-%COMP%]{width:177.7777777778vh;height:115%}}@media (aspect-ratio >= 16/9){.thumbnail[_ngcontent-%COMP%]{height:62vw}}iframe[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;width:100vw;height:100vh;pointer-events:none;transform:translate(-50%,-50%);-webkit-user-select:none;user-select:none}@media (aspect-ratio <= 16/9){iframe[_ngcontent-%COMP%]{width:177.7777777778vh;height:115%}}@media (aspect-ratio >= 16/9){iframe[_ngcontent-%COMP%]{height:62vw}}@media only screen and (max-width: 767px){iframe[_ngcontent-%COMP%]{display:none}}.toggle-buttons[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;margin:16px 0 10px 40px}@media only screen and (max-width: 1024px){.toggle-buttons[_ngcontent-%COMP%]{margin:16px 0 10px 70px}}@media only screen and (max-width: 767px){.toggle-buttons[_ngcontent-%COMP%]{justify-content:space-evenly;margin:60px 0 15px}}@media only screen and (max-width: 479px){.toggle-buttons.unauthenticated[_ngcontent-%COMP%]{margin-top:120px}}.toggle-buttons[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:7px 15px 7px 11px;margin-right:11px;border-radius:12px;box-shadow:var(--widget-emboss);background:var(--widget-subtle);transition:all .3s;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px)}.toggle-buttons[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]:hover, .toggle-buttons[_ngcontent-%COMP%]   .toggle-button.active[_ngcontent-%COMP%]{background:var(--widget-active)}.toggle-buttons[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{margin-right:8px}@media only screen and (max-width: 767px){.toggle-buttons[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{margin:0}}.vibes-and-rooms-wrappers[_ngcontent-%COMP%]{position:relative;z-index:1;display:inline-flex;margin-left:40px}@media only screen and (max-width: 767px){.vibes-and-rooms-wrappers[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-height:calc(100vh - 200px);overflow:auto;margin:0}}.vibes-wrapper[_ngcontent-%COMP%]{width:294px;height:386px;overflow:hidden;margin-right:17px;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:15px;box-shadow:var(--widget-emboss);background:var(--widget-default);transition:all .25s}@media only screen and (max-width: 1024px){.vibes-wrapper[_ngcontent-%COMP%]{height:410px}}@media only screen and (max-width: 767px){.vibes-wrapper[_ngcontent-%COMP%]{flex-shrink:0;width:calc(100% - 50px);margin:0 0 10px}}.vibes-wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 20px 16px}.vibes-wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-left:10px}.vibes-wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   ss-icon[iconName=arrow_minimize][_ngcontent-%COMP%]{margin-left:auto}.vibes-wrapper[_ngcontent-%COMP%]   ss-tabs[_ngcontent-%COMP%]{width:calc(100% - 40px);margin:0 auto}.vibes-wrapper[_ngcontent-%COMP%]   .navigation-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:calc(100% - 40px);margin:20px auto 10px}.vibes-wrapper[_ngcontent-%COMP%]   .navigation-wrapper[_ngcontent-%COMP%]   .vibe-title[_ngcontent-%COMP%]{display:flex;align-items:center}.vibes-wrapper[_ngcontent-%COMP%]   .navigation-wrapper[_ngcontent-%COMP%]   ss-icon[iconName=link][_ngcontent-%COMP%]{margin-left:5px}.slider-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:90px}.slider-wrapper[_ngcontent-%COMP%]   .active-slide[_ngcontent-%COMP%]{flex-shrink:0;width:160px;height:90px;box-sizing:border-box;margin:0 8px;border:2px solid var(--contrast);border-radius:12px;box-shadow:var(--effect-deep);background-size:cover;background-repeat:no-repeat;cursor:pointer;opacity:1;transition:opacity .25s}.slider-wrapper[_ngcontent-%COMP%]   .active-slide.back-animation[_ngcontent-%COMP%]{width:112px;height:63px;border:2px solid var(--contrast);transform:translate(-120px)}.slider-wrapper[_ngcontent-%COMP%]   .active-slide.forward-animation[_ngcontent-%COMP%]{width:112px;height:63px;border:2px solid var(--contrast);transform:translate(120px)}.slider-wrapper[_ngcontent-%COMP%]   .active-slide.active-vibe[_ngcontent-%COMP%]{border-color:var(--default-20)}.slider-wrapper[_ngcontent-%COMP%]   .active-slide[_ngcontent-%COMP%]:hover{opacity:.75}.slider-wrapper[_ngcontent-%COMP%]   .active-slide.shake-animation[_ngcontent-%COMP%]{backface-visibility:hidden;transform:translateZ(0);perspective:1000px;animation:_ngcontent-%COMP%_shake 2.5s cubic-bezier(.36,.07,.19,.97) both}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}.slider-wrapper[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{flex-shrink:0;width:112px;height:63px;border:2px solid var(--contrast);border-radius:12px;background-size:cover}.slider-wrapper[_ngcontent-%COMP%]   .slide.next.first.back-animation[_ngcontent-%COMP%]{width:160px;height:90px;border:1px solid var(--accent-blurple-20);transform:translate(-120px)}.slider-wrapper[_ngcontent-%COMP%]   .slide.next.second.back-animation[_ngcontent-%COMP%]{transform:translate(-112px)}.slider-wrapper[_ngcontent-%COMP%]   .slide.previous.first.forward-animation[_ngcontent-%COMP%]{width:160px;height:90px;border:1px solid var(--accent-blurple-20);transform:translate(120px)}.slider-wrapper[_ngcontent-%COMP%]   .slide.previous.second.forward-animation[_ngcontent-%COMP%]{transform:translate(112px)}.slider-wrapper[_ngcontent-%COMP%]   .slide.next.first[_ngcontent-%COMP%], .slider-wrapper[_ngcontent-%COMP%]   .slide.previous.first[_ngcontent-%COMP%]{cursor:pointer}.slider-wrapper[_ngcontent-%COMP%]   .slide.active-vibe[_ngcontent-%COMP%]{border-color:var(--accent-blurple-20)}.slider-wrapper[_ngcontent-%COMP%]   .back-animation[_ngcontent-%COMP%], .slider-wrapper[_ngcontent-%COMP%]   .forward-animation[_ngcontent-%COMP%]{transition:all .2s}.slider-wrapper[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 5px);left:50%;padding:3px 5px;border-radius:5px;color:var(--contrast);background:var(--blue-black-light);opacity:0;transform:translate(-50%)}.slider-wrapper[_ngcontent-%COMP%]   .notification.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade 3s}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0}30%,70%{opacity:1}to{opacity:0}}.select-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:baseline;margin:20px 20px 10px;color:var(--default-20)}ss-select[_ngcontent-%COMP%]{width:100%;margin:10px 0}.active-video-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;margin:0 20px;border-radius:15px;background:var(--container-2)}.heart-icon-wrapper[_ngcontent-%COMP%]{width:16px;height:20px}.heart-icon-wrapper[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{display:block}.heart-icon-wrapper[_ngcontent-%COMP%]   .non-favorite[_ngcontent-%COMP%]   .favorite-icon[_ngcontent-%COMP%]{display:initial}.heart-icon-wrapper[_ngcontent-%COMP%]   .non-favorite[_ngcontent-%COMP%]   .non-favorite-icon[_ngcontent-%COMP%], .heart-icon-wrapper[_ngcontent-%COMP%]   .non-favorite[_ngcontent-%COMP%]:hover   .favorite-icon[_ngcontent-%COMP%]{display:none}.heart-icon-wrapper[_ngcontent-%COMP%]   .non-favorite[_ngcontent-%COMP%]:hover   .non-favorite-icon[_ngcontent-%COMP%]{display:initial}.heart-icon-wrapper[_ngcontent-%COMP%]   .favorite[_ngcontent-%COMP%]:hover     i{color:var(--alt)}.favorite-wrapper[_ngcontent-%COMP%]{max-height:277px;margin-top:18px;overflow:overlay;scrollbar-color:var(--default-80) transparent;scrollbar-width:thin}@supports (-moz-appearance: none){.favorite-wrapper[_ngcontent-%COMP%]{scrollbar-color:var(--accent-blue-40) var(--accent-blue-40)}}.favorite-wrapper[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--accent-gradient-60)}.favorite-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .favorite-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:transparent}.favorite-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.favorite-wrapper[_ngcontent-%COMP%]   .favorite[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:48px;padding:0 13px 0 20px;cursor:pointer}.favorite-wrapper[_ngcontent-%COMP%]   .favorite[_ngcontent-%COMP%]   .video-name[_ngcontent-%COMP%]{display:flex;align-items:center}.favorite-wrapper[_ngcontent-%COMP%]   .favorite[_ngcontent-%COMP%]   ss-icon[iconName=play][_ngcontent-%COMP%]{display:none;margin-right:10px}.favorite-wrapper[_ngcontent-%COMP%]   .favorite[_ngcontent-%COMP%]:hover{background:var(--inner)}.favorite-wrapper[_ngcontent-%COMP%]   .favorite[_ngcontent-%COMP%]:hover   ss-icon[iconName=play][_ngcontent-%COMP%]{display:initial}.empty-message[_ngcontent-%COMP%]{display:block;margin-top:15px;text-align:center}.dark-theme[_nghost-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{border:2px solid var(--grayscale)}"]});let e=i;return e})(),Xt=function(e){return e.Presets="Presets",e.Favourites="Favourites",e.Custom="Custom",e}(Xt||{});var R_=[{path:"",component:cp,resolve:{userInfo:mp},children:[{path:"spaces",redirectTo:"solo-room",pathMatch:"full"},{path:"vibes",redirectTo:"solo-room",pathMatch:"full"},{path:"solo-room",component:yp},{path:"plans-and-pricing",component:up,canActivate:[Ut]},{path:"confirm-subscription-invitation/:subscriptionUserId",component:el,canActivate:[Ut]},{path:"purchase-focus-room-hours",component:gp,canActivate:[Ut]},{path:"session-summary",component:Tr,canActivate:[Ut]},{path:"session-summary/:roomName",component:Tr,canActivate:[Ut]},{path:"break-mode",component:jc,canActivate:[Ut,lp]},{path:"focus",loadChildren:()=>import("./chunk-EEM44XJS.js").then(e=>e.LivekitModule)},{path:"focus-lite",loadChildren:()=>import("./chunk-QC7C6JPB.js").then(e=>e.LivekitModule)},{path:"focus-simplest-test",loadChildren:()=>import("./chunk-QC7C6JPB.js").then(e=>e.LivekitModule)},{path:"",component:Sp,children:[{path:"",loadChildren:()=>import("./chunk-X3Y5RZFH.js").then(e=>e.AccountModule)}]},{path:"",canActivate:[pp,Ut],loadChildren:()=>import("./chunk-4FQ6C72V.js").then(e=>e.AuthenticatedModule)},{path:"quiz",component:kr},{path:"note",component:kr}]}],wp=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=pi({type:i}),i.\u0275inj=di({imports:[Zi.forChild(R_),Zi]});let e=i;return e})();var RE=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=pi({type:i}),i.\u0275inj=di({imports:[Tn,wp,xo,fo,mo,$n,Qn,Vn,In,ka,Jn,wa,Zs,Ma,Gn,Va,Xn,Yn,Ua,Aa,Oa,Ta,Ea,ba,Gc,Un.forChild({loader:Nn({prefix:"./assets/i18n/",suffix:".json"})}),Lc,Ac]});let e=i;return e})();export{RE as DashboardModule};
