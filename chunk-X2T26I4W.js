import{E as Yi,Gb as er,La as Zi,Z as Ji,a as xi,e as Di,h as Ui,ha as Qi,i as Fi,j as Bi,sa as ct,ya as Xi}from"./chunk-GXZQKE6V.js";import{$a as g,$c as mi,$f as Y,Ag as Ri,Bd as ze,Cb as b,Cd as bt,Da as se,Db as k,Ea as li,Eb as ye,Ff as de,Gd as G,Gg as Oi,Hd as $,Ia as P,Ig as B,Ja as S,Jd as gi,La as ae,Ma as ce,Md as K,Me as Ei,Mg as V,Na as le,Nd as _i,Ne as bi,Ng as he,Oa as w,Od as yi,Oi as te,Pa as d,Qa as u,Qd as Pt,Qi as $i,Ra as H,Rf as Ke,S as ai,Sd as Ge,Uh as pe,Vd as wi,Vh as Wi,W as f,Wd as at,Wf as ue,Wh as Hi,X as m,Xh as ji,Ya as T,Yh as qi,Zc as fi,Zh as zi,_a as I,_d as $e,_g as Ni,_h as Gi,a as R,ag as J,b as oe,bc as pi,bg as Q,bh as Li,c as Et,cg as X,cj as Ki,db as j,dg as Z,eb as q,ee as Ci,eg as ee,f as Oe,fb as z,fe as vi,g as c,gb as Pe,gg as Pi,hg as Si,hh as Vi,ib as qe,ig as Ti,jb as di,kb as _,la as je,lb as Se,mb as L,nb as ui,ni as Ye,qa as p,qb as N,rb as x,sb as D,sg as Ai,ua as v,ub as hi,ue as Ii,uf as sn,vg as ki,xa as F,xb as Ne,ya as ci,yf as Te,zg as Mi,zh as St}from"./chunk-4LPE7HNY.js";var xo=["verificationBlock"];function Do(n,e){n&1&&(d(0,"h2"),_(1,"Email verification"),u())}var ir=(()=>{let e=class e{get isNotModal(){return!this.isModal}constructor(i,r,o){this.focusRoomService=i,this.accountService=r,this.loaderService=o,this.isModal=!1,this.standalone=!1,this.completedVerification=new se,this.currentUser={},this.codeVerified=!1,this.isCodeValid=!1,this.isCodeLoading=!1}ngOnInit(){this.currentUser=this.accountService.currentUser}onEmailUpdated(i){this.currentUser=i}onCompletedVerification(i){i&&(this.loaderService.stop(),this.accountService.currentUser.emailConfirmed=!0,this.accountService.currentUser.conversationsEnabled=!0,this.accountService.currentUserChange.next(),this.focusRoomService.resetRooms.next()),this.isModal&&this.completedVerification.emit(this.standalone||i)}onCheckCode(i){this.isCodeValid=i}onCodeLoading(i){this.isCodeLoading=i}verifyEmail(){this.verificationBlock.onVerifyEmail()}};e.\u0275fac=function(r){return new(r||e)(v(Ye),v(B),v(Ke))},e.\u0275cmp=F({type:e,selectors:[["ss-account-email-verification"]],viewQuery:function(r,o){if(r&1&&j(xo,5),r&2){let s;q(s=z())&&(o.verificationBlock=s.first)}},hostVars:2,hostBindings:function(r,o){r&2&&qe("not-modal",o.isNotModal)},inputs:{isModal:"isModal",standalone:"standalone"},outputs:{completedVerification:"completedVerification"},standalone:!1,decls:5,vars:6,consts:[["verificationBlock",""],[3,"emailUpdated","completedVerification","isCodeValid","modalVerifyLoading","email","isModal","codeExpirationDate"],[3,"buttonClick","disabled","isLoading"]],template:function(r,o){if(r&1){let s=T();P(0,Do,2,0,"h2"),d(1,"ss-email-verification-block",1,0),I("emailUpdated",function(l){return f(s),m(o.onEmailUpdated(l))})("completedVerification",function(l){return f(s),m(o.onCompletedVerification(l))})("isCodeValid",function(l){return f(s),m(o.onCheckCode(l))})("modalVerifyLoading",function(l){return f(s),m(o.onCodeLoading(l))}),u(),d(3,"ss-button",2),I("buttonClick",function(){return f(s),m(o.verifyEmail())}),_(4,` Verify
`),u()}r&2&&(S(o.isModal?-1:0),p(),w("email",o.currentUser.email)("isModal",o.isModal)("codeExpirationDate",o.currentUser.dateEmailVerificationCodeExpires),p(2),w("disabled",!o.isCodeValid)("isLoading",o.isCodeLoading))},dependencies:[Ji,V],styles:["h1[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left}.content-wrapper[_ngcontent-%COMP%], .middle-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.content-wrapper[_ngcontent-%COMP%]{overflow-y:auto;background-color:var(--alt)}.main-account-wrapper[_ngcontent-%COMP%]{display:flex;width:1140px;height:744px;overflow:hidden;border-radius:70px;box-shadow:var(--elevation-s1);background-color:var(--grayscale)}.action-wrapper[_ngcontent-%COMP%]{width:50%;padding:90px 60px 94px}@media only screen and (max-width: 767px){.action-wrapper[_ngcontent-%COMP%]{width:calc(100% - 30px);padding:16px}}.action-wrapper[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:block}.action-wrapper[_ngcontent-%COMP%]   .action.hidden[_ngcontent-%COMP%]{display:none}.account-form-divider[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:16px}.account-form-divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;height:1px;background:var(--default-80)}.account-form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 9px;font-weight:700;color:var(--default-80)}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.not-modal[_nghost-%COMP%]{height:auto;padding:24px;margin-bottom:24px;border-radius:24px;background:var(--alt-60)}.not-modal[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}"]});let n=e;return n})();var Lo=["changePhoneForm"];function Vo(n,e){n&1&&(d(0,"h2"),_(1,"Phone number verification"),u())}function Uo(n,e){if(n&1){let t=T();d(0,"ss-button",10),I("buttonClick",function(){f(t);let r=g(3);return m(r.hideChangePhoneBlock())}),_(1," Cancel change "),u()}if(n&2){let t=g(3);w("isLoading",t.updatePhoneLoading)}}function Fo(n,e){if(n&1){let t=T();d(0,"div",7)(1,"ss-button",8),I("buttonClick",function(){f(t);let r=g(2);return m(r.onResendPhone())}),_(2),u(),P(3,Uo,2,1,"ss-button",9),u()}if(n&2){let t=g(2);p(),w("isLoading",t.updatePhoneLoading),p(),L(" ",t.smsPreviouslySent?"Send SMS again":"Send"," "),p(),S(t.smsPreviouslySent?3:-1)}}function Bo(n,e){if(n&1){let t=T();d(0,"p",2),_(1," Select your country code from the dropdown and enter your phone number. "),u(),d(2,"form",3,0),I("ngSubmit",function(){f(t);let r=g();return m(r.onUpdatePhone())}),d(4,"div",4)(5,"ss-country-inline-select",5),D("ngModelChange",function(r){f(t);let o=g();return x(o.selectedCountry,r)||(o.selectedCountry=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("newPhoneNumber"))}),u(),d(6,"ss-input",6),D("ngModelChange",function(r){f(t);let o=g();return x(o.newPhoneNumber,r)||(o.newPhoneNumber=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("newPhoneNumber"))}),u()(),P(7,Fo,4,3,"div",7),u()}if(n&2){let t=g();p(5),N("ngModel",t.selectedCountry),w("options",t.countries)("disabled",t.countriesLoading),p(),N("ngModel",t.newPhoneNumber),w("errors",t.validationErrors.newPhoneNumber)("readonly",t.updatePhoneLoading)("required",!0)("disabled",t.countriesLoading),p(),S(t.smsPreviouslySent?7:-1)}}function Wo(n,e){if(n&1&&(d(0,"ss-button",16),_(1),u()),n&2){let t=g(2);w("disabled",!0),p(),L(" ","Resend"+t.timerValue," ")}}function Ho(n,e){if(n&1){let t=T();d(0,"ss-button",10),I("buttonClick",function(){f(t);let r=g(2);return m(r.onResendPhone())}),_(1," Resend "),u()}if(n&2){let t=g(2);w("isLoading",t.resendLoading)}}function jo(n,e){if(n&1){let t=T();d(0,"p"),_(1,"We have sent you an SMS containing your verification code."),u(),d(2,"p",2),_(3,"Please note: the sender will appear as "),d(4,"strong"),_(5,"+44 7360 536579"),u(),_(6,"."),u(),d(7,"p",11),_(8,"Enter code"),u(),d(9,"ss-code-input",12),I("codeChange",function(r){f(t);let o=g();return m(o.onCodeChange(r))})("completed",function(){f(t);let r=g();return m(r.onVerifyPhone())}),u(),d(10,"div",13)(11,"div",14),_(12,"Copy the code from the SMS sent to you ("),d(13,"a"),_(14),u(),_(15,")."),u(),d(16,"div"),_(17,"Make sure to check your Spam/Junk folder if your SMS app has one!"),u()(),d(18,"div",15),P(19,Wo,2,2,"ss-button",16)(20,Ho,2,1,"ss-button",9),d(21,"ss-button",17),I("buttonClick",function(){f(t);let r=g();return m(r.showChangePhoneBlock())}),_(22," Change phone "),u()()}if(n&2){let t=g();p(9),w("invalid",t.isCodeInvalid())("numberOfDigits",6),p(5),Se(t.originalPhone),p(5),S(t.timerValue?19:20)}}function qo(n,e){if(n&1&&(H(0,"div",1),b(1,"translate")),n&2){let t=e.$implicit;w("innerHTML",ye(1,1,"errors."+t.errorCode,t.params),je)}}function zo(n,e){if(n&1){let t=T();d(0,"ss-button",19),I("buttonClick",function(){f(t);let r=g(2);return m(r.onVerifyPhone())}),_(1," Verify "),u()}if(n&2){let t=g(2);w("disabled",!t.isCodeValid)("isLoading",t.verifyLoading)}}function Go(n,e){if(n&1){let t=T();d(0,"small"),_(1),d(2,"a",20),_(3,"Terms of Service"),u(),_(4," and "),d(5,"a",21),_(6,"Privacy Policy"),u(),_(7,". "),u(),d(8,"ss-button",19),I("buttonClick",function(){f(t);let r=g(2);return m(r.onUpdatePhone())}),_(9),u()}if(n&2){let t=g(2);p(),ui(" By clicking the button below I agree to receive text messages from ",t.settingsService.siteName," and agree to ",t.settingsService.siteName,"'s "),p(7),w("disabled",!t.isPhoneValid)("isLoading",t.updatePhoneLoading),p(),L(" ",t.sendButtonText," ")}}function $o(n,e){if(n&1&&P(0,zo,2,2,"ss-button",18)(1,Go,10,5),n&2){let t=g();S(t.smsPreviouslySent?0:1)}}var rr=(()=>{let e=class e{get isNotModal(){return!this.dialogRef}get smsPreviouslySent(){return!!this.accountService.currentUser.phoneNumber&&!!this.accountService.currentUser.datePhoneVerificationCodeExpires}get fullPhoneNumber(){if(!this.selectedCountry)return"";let i=this.newPhoneNumber.toLowerCase().replace(/[^0-9]/g,"").trim();return`+${this.selectedCountry.dialCode}${i}`}get isPhoneValid(){return this.fullPhoneNumber.length>7}get sendButtonText(){return`Send an SMS${this.isPhoneValid?` to ${this.fullPhoneNumber}`:""}`}constructor(i,r,o,s,a,l){this.settingsService=i,this.accountService=r,this.utilityService=o,this.countryService=s,this.redirectService=a,this.focusRoomService=l,this.dialogRef=null,this.standalone=!1,this.firstTimeShowingPhoneVerification=!1,this.changePhoneBlockVisibleChange=new se,this.originalPhone=null,this.originalCodeExpirationDate=null,this.changePhoneBlockVisible=!1,this.isCodeValid=!1,this.showChangePhoneOption=!1,this.resendLoading=!1,this.updatePhoneLoading=!1,this.verifyLoading=!1,this.newPhoneNumber="",this.selectedCountry=null,this.validationErrors={newPhoneNumber:[],code:[],other:[]},this.countries=[],this.countriesLoading=!0,this.subscriptions=[],this.originalPhone=this.accountService.currentUser.phoneNumber,this.originalCodeExpirationDate=this.accountService.currentUser.datePhoneVerificationCodeExpires}ngOnInit(){this.countryService.getAll().subscribe({next:i=>this.resolveCountries(i),error:i=>this.handleErrors(i)}),this.subscriptions.push(this.settingsService.phoneVerificationRequirementUpdated.subscribe(()=>this.onPhoneVerificationRequirementUpdated())),this.originalCodeExpirationDate&&this.startTimer(this.originalCodeExpirationDate)}ngOnDestroy(){window.clearInterval(this.timerIntervalRef),this.subscriptions.forEach(i=>i.unsubscribe())}showChangePhoneBlock(){this.changePhoneBlockVisible=!0,this.changePhoneBlockVisibleChange.emit(!0),this.resetErrors()}hideChangePhoneBlock(){this.changePhoneBlockVisible=!1,this.changePhoneBlockVisibleChange.emit(!1);let i=this.countries.find(r=>r.twoLetterCountryCode===this.accountService.currentUser.locationCountryTwoLetterCode);i?(this.selectedCountry=i,this.newPhoneNumber=this.originalPhone?.replace(`+${i.dialCode}`,"")??""):this.newPhoneNumber=this.originalPhone??""}onResendPhone(){this.resetErrors(),this.resendLoading=!0,this.accountService.resendConfirmationSms().subscribe({next:i=>{this.resendLoading=!1,this.originalCodeExpirationDate=i.newCodeExpiryDate,this.startTimer(this.originalCodeExpirationDate)},error:i=>this.handleErrors(i)})}onUpdatePhone(){this.resetErrors(),this.updatePhoneLoading=!0,this.accountService.changePhoneNumber(this.fullPhoneNumber).subscribe({next:i=>{this.accountService.currentUser.phoneNumber=this.fullPhoneNumber,this.originalPhone=this.fullPhoneNumber,this.accountService.currentUser.datePhoneVerificationCodeExpires=i.newCodeExpiryDate,this.accountService.currentUserChange.next(),this.originalCodeExpirationDate=i.newCodeExpiryDate,this.updatePhoneLoading=!1,this.changePhoneBlockVisible=!1,this.startTimer(this.originalCodeExpirationDate)},error:i=>this.handleErrors(i)})}onCodeChange(i){this.verificationCode=i,this.validationErrors.code=[],this.isCodeValid=this.isCodeFormatValid()}isCodeFormatValid(){return!!this.verificationCode&&this.verificationCode.length===6}isCodeInvalid(){return!!this.validationErrors.code.find(i=>i.errorCode==="InvalidPhoneConfirmationCode")}onVerifyPhone(){this.isCodeFormatValid()&&(this.resetErrors(),this.verifyLoading=!0,this.accountService.verifyPhone(this.verificationCode).subscribe({next:()=>{this.verifyLoading=!1,this.accountService.currentUser.phoneNumberConfirmed=!0,this.accountService.currentUserChange.next(),this.onCompletedVerification({shouldPromptNextStep:!0})},error:i=>this.handleErrors(i)}))}removeFieldErrors(i){this.validationErrors[i]=[]}onCompletedVerification(i){this.redirectService.onPhoneVerificationCompleted({standalone:this.standalone,shouldPromptNextStep:i.shouldPromptNextStep,firstTimeShowingPhoneVerification:this.firstTimeShowingPhoneVerification},this.dialogRef)}resolveCountries(i){this.countries=i;let r=this.countries.find(o=>o.twoLetterCountryCode===this.accountService.currentUser.locationCountryTwoLetterCode);r?(this.selectedCountry=r,this.newPhoneNumber=this.originalPhone?.replace(`+${r.dialCode}`,"")??""):this.newPhoneNumber=this.originalPhone??"",this.countriesLoading=!1}onPhoneVerificationRequirementUpdated(){this.accountService.isCurrentUserPhoneVerified()&&(this.focusRoomService.resetRooms.next(),this.onCompletedVerification({shouldPromptNextStep:!0}))}startTimer(i){window.clearInterval(this.timerIntervalRef),this.setTimerValue(i),this.timerIntervalRef=window.setInterval(()=>this.setTimerValue(i),1e3)}setTimerValue(i){let r=new Date,a=(new Date(i).getTime()-r.getTime())/1e3|0;if(a>0){let l=a/60|0,h=a-l*60|0;this.timerValue=` (${l}:${h<10?"0":""}${h})`}else this.timerValue="",window.clearInterval(this.timerIntervalRef)}resetErrors(){this.validationErrors.newPhoneNumber=[],this.validationErrors.code=[],this.validationErrors.other=[]}handleErrors(i){this.resendLoading=!1,this.verifyLoading=!1,this.updatePhoneLoading=!1,this.changePhoneForm&&(this.validationErrors.newPhoneNumber=this.utilityService.errorsForField("newPhoneNumber",["EntityAlreadyExists"],i,this.changePhoneForm)),this.validationErrors.code=i.filter(r=>r.errorCode==="InvalidPhoneConfirmationCode"),this.validationErrors.other=i.filter(r=>this.validationErrors.newPhoneNumber.indexOf(r)===-1&&this.validationErrors.code.indexOf(r)===-1&&r.errorCode!=="RequestInvalid")}};e.\u0275fac=function(r){return new(r||e)(v(Te),v(B),v(de),v(Zi),v(pe),v(Ye))},e.\u0275cmp=F({type:e,selectors:[["ss-account-phone-verification"]],viewQuery:function(r,o){if(r&1&&j(Lo,5),r&2){let s;q(s=z())&&(o.changePhoneForm=s.first)}},hostVars:2,hostBindings:function(r,o){r&2&&qe("not-modal",o.isNotModal)},inputs:{dialogRef:"dialogRef",standalone:"standalone",firstTimeShowingPhoneVerification:"firstTimeShowingPhoneVerification"},outputs:{changePhoneBlockVisibleChange:"changePhoneBlockVisibleChange"},standalone:!1,decls:6,vars:3,consts:[["changePhoneForm","ngForm"],[1,"error-message",3,"innerHTML"],[1,"space-after"],[3,"ngSubmit"],[1,"form-block"],["id","country-ids","name","selectedCountryIds","placeholder","Country Code","labelProperty","nameWithDialCode","flagIconProperty","twoLetterCountryCode",1,"country-dropdown",3,"ngModelChange","ngModel","options","disabled"],["type","tel","id","new-phone-number","name","newPhoneNumber","prefixIconName","phone","placeholder","Phone number","validationPropertyName","Phone number",3,"ngModelChange","ngModel","errors","readonly","required","disabled"],[1,"controls"],[1,"send-again",3,"buttonClick","isLoading"],["color","secondary",3,"isLoading"],["color","secondary",3,"buttonClick","isLoading"],[1,"enter-code"],[3,"codeChange","completed","invalid","numberOfDigits"],[1,"additional-info"],[1,"two-line-clamp"],[1,"button-wrapper"],[1,"fixed-width",3,"disabled"],["color","secondary",1,"change-phone",3,"buttonClick"],[3,"disabled","isLoading"],[3,"buttonClick","disabled","isLoading"],["href","/policies/terms-and-conditions","target","_blank"],["href","/policies/privacy","target","_blank"]],template:function(r,o){r&1&&(P(0,Vo,2,0,"h2"),P(1,Bo,8,9)(2,jo,23,4),ce(3,qo,2,4,"div",1,ae),P(5,$o,2,1)),r&2&&(S(o.dialogRef?-1:0),p(),S(o.changePhoneBlockVisible||!o.smsPreviouslySent?1:2),p(2),le(o.validationErrors.other),p(2),S(o.changePhoneBlockVisible?-1:5))},dependencies:[Z,Y,J,ee,X,Q,Yi,V,te,Oi,K],styles:["h1[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left}.content-wrapper[_ngcontent-%COMP%], .middle-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.content-wrapper[_ngcontent-%COMP%]{overflow-y:auto;background-color:var(--alt)}.main-account-wrapper[_ngcontent-%COMP%]{display:flex;width:1140px;height:744px;overflow:hidden;border-radius:70px;box-shadow:var(--elevation-s1);background-color:var(--grayscale)}.action-wrapper[_ngcontent-%COMP%]{width:50%;padding:90px 60px 94px}@media only screen and (max-width: 767px){.action-wrapper[_ngcontent-%COMP%]{width:calc(100% - 30px);padding:16px}}.action-wrapper[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:block}.action-wrapper[_ngcontent-%COMP%]   .action.hidden[_ngcontent-%COMP%]{display:none}.account-form-divider[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:16px}.account-form-divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;height:1px;background:var(--default-80)}.account-form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 9px;font-weight:700;color:var(--default-80)}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.not-modal[_nghost-%COMP%]{height:auto;padding:24px;margin-bottom:24px;border-radius:24px;background:var(--alt-60)}.not-modal[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px}p[_ngcontent-%COMP%]{margin-bottom:4px}p.enter-code[_ngcontent-%COMP%]{margin-bottom:16px}p.space-after[_ngcontent-%COMP%]{margin-bottom:24px}ss-code-input[_ngcontent-%COMP%]{margin-bottom:30px}.additional-info[_ngcontent-%COMP%]{margin-bottom:45px;font-size:14px;color:var(--default)}.additional-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{line-height:24px}.additional-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--accent-blurple)}.button-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px}@media only screen and (max-width: 1279px){.button-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap}}.button-wrapper[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]{margin-right:20px}.button-wrapper[_ngcontent-%COMP%]   ss-button.change-phone[_ngcontent-%COMP%]{margin-right:25px}.button-wrapper[_ngcontent-%COMP%]   ss-button.fixed-width[_ngcontent-%COMP%]{width:144px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}form[_ngcontent-%COMP%]   .form-block[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}form[_ngcontent-%COMP%]   ss-input[_ngcontent-%COMP%]{flex:1}form[_ngcontent-%COMP%]   ss-country-inline-select[_ngcontent-%COMP%]{width:160px;margin-right:12px}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:16px}@media only screen and (max-width: 1279px){.controls[_ngcontent-%COMP%]{margin-top:6px}}.controls[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]{flex:1;margin-left:12px}.controls[_ngcontent-%COMP%]   ss-button[_ngcontent-%COMP%]:first-of-type{margin-left:0}.controls[_ngcontent-%COMP%]   ss-button.send-again[_ngcontent-%COMP%]{flex:2}.messages-wrapper[_ngcontent-%COMP%]{margin-top:20px}.messages-wrapper[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{text-align:left}small[_ngcontent-%COMP%]{margin:12px 0}"]});let n=e;return n})();var Ko=["basicInfoForm"];function Yo(n,e){n&1&&(d(0,"h2"),_(1,"Complete Basic Info"),u())}function Jo(n,e){if(n&1){let t=T();d(0,"ss-utc-date-picker",12),b(1,"translate"),b(2,"translate"),D("ngModelChange",function(r){f(t);let o=g();return x(o.model.birthday,r)||(o.model.birthday=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("birthday"))}),u()}if(n&2){let t=g();w("label",k(1,8,"forms.basicInfo.birthday.label"))("placeholder",k(2,10,"forms.basicInfo.birthday.placeholder"))("errors",t.validationErrors.birthday)("readonly",!0)("required",!0)("minDate",t.minDate)("maxDate",t.maxDate),N("ngModel",t.model.birthday)}}function Qo(n,e){if(n&1&&(d(0,"mat-radio-button",14),_(1),b(2,"userType"),u()),n&2){let t=e.$implicit;w("value",t),p(),L(" ",k(2,2,t)," ")}}function Xo(n,e){if(n&1){let t=T();d(0,"div",7)(1,"label"),_(2,"Which option best defines you?*"),u(),d(3,"mat-radio-group",13),D("ngModelChange",function(r){f(t);let o=g();return x(o.model.type,r)||(o.model.type=r),m(r)}),ce(4,Qo,3,4,"mat-radio-button",14,ae),u()()}if(n&2){let t=g();p(3),N("ngModel",t.model.type),p(),le(t.userTypes)}}function Zo(n,e){if(n&1&&(d(0,"div",10),_(1),b(2,"translate"),u()),n&2){let t=e.$implicit;p(),L(" ",ye(2,1,"errors."+t.errorCode,t.params)," ")}}var cn=(()=>{let e=class e{get isNotModal(){return!this.isModal}constructor(i,r,o,s,a){this.settingsService=i,this.focusRoomService=r,this.accountService=o,this.utilityService=s,this.loaderService=a,this.isModal=!1,this.standalone=!1,this.closeModal=new se,this.closeModalFunction=new se,this.model={},this.currentUser={},this.userTypes=[$e.Professional,$e.UniStudent,$e.PreUniStudent],this.errorMessages=[],this.basicInfoLoading=!1,this.UserTypeRef=$e,this.validationErrors={firstName:[],lastName:[],displayName:[],type:[],gender:[],birthday:[],other:[]},this.shouldShowBirthdayControl=!1,this.firstAndLastNameValidationPattern=Ci,this.displayNameValidationPattern=vi,this.minDate=this.utilityService.getDateBeforeNYears(70),this.maxDate=this.utilityService.getDateBeforeNYears(5)}ngOnInit(){this.currentUser=this.accountService.currentUser,!this.currentUser.birthday&&!this.settingsService.isB2BApp()&&(this.shouldShowBirthdayControl=!0),this.model.displayName=this.currentUser.displayName,this.model.firstName=this.currentUser.firstName,this.model.lastName=this.currentUser.lastName,this.loaderService.stop()}onSubmit(){(this.settingsService.isB2BApp()||this.settingsService.isCoWork())&&(this.model.type=$e.Professional),this.resetErrors(),this.basicInfoLoading=!0,this.accountService.completeBasicInfo(this.model).subscribe({next:()=>{if(this.standalone||!this.isModal){window.location.reload(),this.isModal&&this.closeModal.emit();return}this.isModal&&this.closeModalFunction.emit(!1),this.focusRoomService.resetRooms.next()},error:i=>{this.basicInfoLoading=!1,i.find(r=>r.errorCode==="MinAgeRequirementNotMet")?(this.utilityService.openMinAgeRequirementNotMetModal(this.model.birthday).afterClosed().subscribe(()=>this.accountService.onLogout()),this.isModal&&this.closeModal.emit(!1)):this.handleErrors(i)}})}removeFieldErrors(i){this.validationErrors[i]=[]}areChangesMade(){return this.model.firstName!==void 0&&this.model.firstName!==null&&this.model.firstName.length>0||this.model.lastName!==void 0&&this.model.lastName!==null&&this.model.lastName.length>0||this.model.type!==void 0||this.model.displayName!==void 0&&this.model.displayName!==null||this.model.gender!==void 0||this.model.birthday!==void 0}onDisplayNameBlur(){!this.model.displayName||this.model.displayName.length<5||this.accountService.checkDisplayNameUniqueness(this.model.displayName).subscribe({next:i=>{if(!i){let r={errorCode:"UserWithTheSameDisplayNameAlreadyExists"};this.validationErrors.displayName=this.utilityService.errorsForField("displayName",["MaximumNumberOfDisplayNameChangesReached","UserWithTheSameDisplayNameAlreadyExists"],[r])}},error:i=>this.handleErrors(i)})}resetErrors(){this.errorMessages=[],this.validationErrors.firstName=[],this.validationErrors.lastName=[],this.validationErrors.other=[]}handleErrors(i){this.basicInfoLoading=!1,this.errorMessages=i,this.validationErrors.firstName=this.utilityService.errorsForField("firstName",[],this.errorMessages,this.basicInfoForm),this.validationErrors.lastName=this.utilityService.errorsForField("lastName",[],this.errorMessages,this.basicInfoForm),this.validationErrors.displayName=this.utilityService.errorsForField("displayName",["UserWithTheSameDisplayNameAlreadyExists"],this.errorMessages,this.basicInfoForm),this.validationErrors.type=this.utilityService.errorsForField("type",[],this.errorMessages,this.basicInfoForm),this.validationErrors.gender=this.utilityService.errorsForField("gender",[],this.errorMessages,this.basicInfoForm),this.validationErrors.birthday=this.utilityService.errorsForField("birthday",[],this.errorMessages,this.basicInfoForm),this.validationErrors.other=this.errorMessages.filter(r=>this.validationErrors.firstName.indexOf(r)===-1&&this.validationErrors.lastName.indexOf(r)===-1&&this.validationErrors.displayName.indexOf(r)===-1&&this.validationErrors.type.indexOf(r)===-1&&this.validationErrors.gender.indexOf(r)===-1&&this.validationErrors.birthday.indexOf(r)===-1&&r.errorCode!=="RequestInvalid")}};e.\u0275fac=function(r){return new(r||e)(v(Te),v(Ye),v(B),v(de),v(Ke))},e.\u0275cmp=F({type:e,selectors:[["ss-basic-info"]],viewQuery:function(r,o){if(r&1&&j(Ko,5),r&2){let s;q(s=z())&&(o.basicInfoForm=s.first)}},hostVars:2,hostBindings:function(r,o){r&2&&qe("not-modal",o.isNotModal)},inputs:{isModal:"isModal",standalone:"standalone"},outputs:{closeModal:"closeModal",closeModalFunction:"closeModalFunction"},standalone:!1,decls:21,vars:44,consts:[["basicInfoForm","ngForm"],[1,"wrapper-form",3,"ngSubmit"],[1,"full-name-wrapper"],["id","first-name","name","firstName","validationPropertyName","First name","patternError","min2LettersError",3,"ngModelChange","label","ngModel","placeholder","errors","readonly","required","maxlength","pattern"],["id","last-name","name","lastName","validationPropertyName","Last name","patternError","min2LettersError",3,"ngModelChange","label","ngModel","placeholder","errors","readonly","required","maxlength","pattern"],["id","display-name","name","displayName","validationPropertyName","Display name","patternError","min3LettersAnd5AlphanumericsError",3,"ngModelChange","blur","label","ngModel","placeholder","errors","readonly","required","maxlength","pattern"],["id","birthday","name","birthday","validationPropertyName","Birthday",3,"label","placeholder","errors","readonly","required","minDate","maxDate","ngModel"],[1,"radio-button-group"],["id","gender","name","gender","validationPropertyName","Gender",3,"ngModelChange","required","errors","ngModel"],[1,"error-messages"],[1,"error-message"],["type","submit",3,"isLoading","disabled"],["id","birthday","name","birthday","validationPropertyName","Birthday",3,"ngModelChange","label","placeholder","errors","readonly","required","minDate","maxDate","ngModel"],["name","type","required","",3,"ngModelChange","ngModel"],[3,"value"]],template:function(r,o){if(r&1){let s=T();P(0,Yo,2,0,"h2"),d(1,"form",1,0),I("ngSubmit",function(){return f(s),m(o.onSubmit())}),d(3,"div",2)(4,"ss-input",3),b(5,"translate"),b(6,"translate"),D("ngModelChange",function(l){return f(s),x(o.model.firstName,l)||(o.model.firstName=l),m(l)}),I("ngModelChange",function(){return f(s),m(o.removeFieldErrors("firstName"))}),u(),d(7,"ss-input",4),b(8,"translate"),b(9,"translate"),D("ngModelChange",function(l){return f(s),x(o.model.lastName,l)||(o.model.lastName=l),m(l)}),I("ngModelChange",function(){return f(s),m(o.removeFieldErrors("lastName"))}),u()(),d(10,"ss-input",5),b(11,"translate"),b(12,"translate"),D("ngModelChange",function(l){return f(s),x(o.model.displayName,l)||(o.model.displayName=l),m(l)}),I("ngModelChange",function(){return f(s),m(o.removeFieldErrors("displayName"))})("blur",function(){return f(s),m(o.onDisplayNameBlur())}),u(),P(13,Jo,3,12,"ss-utc-date-picker",6),P(14,Xo,6,1,"div",7),d(15,"ss-gender-selector",8),D("ngModelChange",function(l){return f(s),x(o.model.gender,l)||(o.model.gender=l),m(l)}),I("ngModelChange",function(){return f(s),m(o.removeFieldErrors("gender"))}),u(),d(16,"div",9),ce(17,Zo,3,4,"div",10,ae),u(),d(19,"ss-button",11),_(20," Submit "),u()()}if(r&2){let s=Pe(2);S(o.isModal?-1:0),p(4),w("label",k(5,32,"forms.basicInfo.firstName.label")),N("ngModel",o.model.firstName),w("placeholder",k(6,34,"forms.basicInfo.firstName.placeholder"))("errors",o.validationErrors.firstName)("readonly",o.basicInfoLoading)("required",!0)("maxlength",100)("pattern",o.firstAndLastNameValidationPattern),p(3),w("label",k(8,36,"forms.basicInfo.lastName.label")),N("ngModel",o.model.lastName),w("placeholder",k(9,38,"forms.basicInfo.lastName.placeholder"))("errors",o.validationErrors.lastName)("readonly",o.basicInfoLoading)("required",!0)("maxlength",100)("pattern",o.firstAndLastNameValidationPattern),p(3),w("label",k(11,40,"forms.basicInfo.displayName.label")),N("ngModel",o.model.displayName),w("placeholder",k(12,42,"forms.basicInfo.displayName.placeholder"))("errors",o.validationErrors.displayName)("readonly",o.basicInfoLoading)("required",!0)("maxlength",30)("pattern",o.displayNameValidationPattern),p(3),S(o.shouldShowBirthdayControl?13:-1),p(),S(!o.settingsService.isB2BApp()&&!o.settingsService.isCoWork()?14:-1),p(),w("required",!0)("errors",o.validationErrors.gender),N("ngModel",o.model.gender),p(2),le(o.validationErrors.other),p(2),w("isLoading",o.basicInfoLoading)("disabled",!s.form.valid)}},styles:["h1[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left}.content-wrapper[_ngcontent-%COMP%], .middle-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.content-wrapper[_ngcontent-%COMP%]{overflow-y:auto;background-color:var(--alt)}.main-account-wrapper[_ngcontent-%COMP%]{display:flex;width:1140px;height:744px;overflow:hidden;border-radius:70px;box-shadow:var(--elevation-s1);background-color:var(--grayscale)}.action-wrapper[_ngcontent-%COMP%]{width:50%;padding:90px 60px 94px}@media only screen and (max-width: 767px){.action-wrapper[_ngcontent-%COMP%]{width:calc(100% - 30px);padding:16px}}.action-wrapper[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:block}.action-wrapper[_ngcontent-%COMP%]   .action.hidden[_ngcontent-%COMP%]{display:none}.account-form-divider[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:16px}.account-form-divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;height:1px;background:var(--default-80)}.account-form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 9px;font-weight:700;color:var(--default-80)}[_nghost-%COMP%]{display:flex;flex-direction:column}.not-modal[_nghost-%COMP%]{height:auto;padding:24px;margin-bottom:24px;border-radius:24px;background:var(--alt-60)}.not-modal[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px}.not-modal[_nghost-%COMP%]     .genders-wrapper{margin-bottom:0}.not-modal[_nghost-%COMP%]     input{background:var(--grayscale)}.not-modal[_nghost-%COMP%]     mat-radio-button{display:inline-block;height:32px}@media only screen and (max-width: 1279px){.not-modal[_nghost-%COMP%]   .full-name-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap}.not-modal[_nghost-%COMP%]   .full-name-wrapper[_ngcontent-%COMP%]   ss-input[_ngcontent-%COMP%]:first-child{margin-right:0}}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.full-name-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}@media only screen and (max-width: 767px){.full-name-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap}}.full-name-wrapper[_ngcontent-%COMP%]   ss-input[_ngcontent-%COMP%]{flex:1;margin-right:20px}@media only screen and (max-width: 767px){.full-name-wrapper[_ngcontent-%COMP%]   ss-input[_ngcontent-%COMP%]{flex:auto;width:100%;margin-right:0}}.full-name-wrapper[_ngcontent-%COMP%]   ss-input[_ngcontent-%COMP%]:last-of-type{margin-right:0}mat-radio-group.mat-mdc-radio-group[_ngcontent-%COMP%]{flex-direction:row;align-items:center;flex-wrap:wrap}mat-radio-group.mat-mdc-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:0 12px 0 0}@media only screen and (max-width: 767px){mat-radio-group.mat-mdc-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:0 12px 12px 0}}.user-type[_ngcontent-%COMP%]{margin-bottom:16px}mat-checkbox[_ngcontent-%COMP%]{margin-bottom:20px}mat-checkbox[_ngcontent-%COMP%]   ss-icon[_ngcontent-%COMP%]{position:absolute;top:1px;margin-left:2px}ss-button[type=submit][_ngcontent-%COMP%]{margin-top:20px}"]});let n=e;return n})();var es=["forgotPasswordForm"];function ts(n,e){if(n&1&&(d(0,"small"),_(1),u()),n&2){let t=g();p(),L(" We have sent an email to ",t.model.email,". Please follow the enclosed link to reset your password. ")}}function ns(n,e){n&1&&(d(0,"small"),_(1," Enter the email address you used when you joined and we'll send you instructions to reset your password. "),u())}function is(n,e){if(n&1){let t=T();d(0,"ss-input",12),b(1,"translate"),b(2,"translate"),D("ngModelChange",function(r){f(t);let o=g();return x(o.model.email,r)||(o.model.email=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("email"))}),u()}if(n&2){let t=g();w("label",k(1,6,"forms.forgotPassword.email.label")),N("ngModel",t.model.email),w("placeholder",k(2,8,"forms.forgotPassword.email.placeholder"))("errors",t.validationErrors.email)("readonly",t.forgotPasswordLoading)("required",!0)}}function rs(n,e){if(n&1&&(d(0,"ss-button",9),_(1),b(2,"translate"),u()),n&2){let t=g(),i=Pe(11);w("isLoading",t.forgotPasswordLoading)("disabled",!i.form.valid),p(),L(" ",k(2,3,"forms.forgotPassword.actions.sendResetLink")," ")}}var os=(()=>{let e=class e{constructor(i,r,o,s,a){this.router=i,this.redirectService=r,this.accountService=o,this.utilityService=s,this.dialogRef=a,this.model={},this.errorMessages=[],this.forgotPasswordLoading=!1,this.emailSent=!1,this.validationErrors={email:[],other:[]}}ngOnInit(){this.authPagesUrls=this.redirectService.getAuthPagesUrls(),this.forgotPasswordForm?.valueChanges?.subscribe(()=>{this.forgotPasswordForm.valid&&(this.errorMessages=[])}),this.dialogRef.backdropClick().subscribe(()=>this.close(!0)),this.dialogRef.keydownEvents().subscribe(i=>{i.key==="Escape"&&this.close(!0)})}onForgotPassword(){this.resetErrors(),this.forgotPasswordLoading=!0,this.accountService.forgotPassword(this.model).subscribe({next:()=>{this.forgotPasswordLoading=!1,this.emailSent=!0},error:i=>this.handleErrors(i)})}removeFieldErrors(i){this.validationErrors[i]=[]}close(i=!1){this.dialogRef.close(i)}goToLogin(){this.dialogRef.close(),this.router.navigate([this.authPagesUrls.login],{queryParamsHandling:"merge"})}resetErrors(){this.errorMessages=[],this.validationErrors.email=[],this.validationErrors.other=[]}handleErrors(i){this.forgotPasswordLoading=!1,this.errorMessages=i,this.validationErrors.email=this.utilityService.errorsForField("email",["EntityDoesNotExist"],this.errorMessages,this.forgotPasswordForm),this.validationErrors.other=this.errorMessages.filter(r=>this.validationErrors.email.indexOf(r)===-1&&r.errorCode!=="RequestInvalid")}};e.\u0275fac=function(r){return new(r||e)(v(Ge),v(pe),v(B),v(de),v(ze))},e.\u0275cmp=F({type:e,selectors:[["ss-forgot-password-modal"]],viewQuery:function(r,o){if(r&1&&j(es,5),r&2){let s;q(s=z())&&(o.forgotPasswordForm=s.first)}},standalone:!1,decls:18,vars:8,consts:[["forgotPasswordForm","ngForm"],[1,"mat-header"],["mat-dialog-title",""],[1,"modal-back-button",3,"click"],["iconName","arrow_left","color","default-20",3,"size","iconVariant"],[1,"close-modal",3,"click"],["iconName","dismiss","color","default-20",3,"size","iconVariant"],[1,"wrapper-form",3,"ngSubmit"],["type","email","id","user-email","name","email","prefixIconName","mail","validationPropertyName","Email",3,"label","ngModel","placeholder","errors","readonly","required"],["type","submit",3,"isLoading","disabled"],[1,"notification"],[3,"click"],["type","email","id","user-email","name","email","prefixIconName","mail","validationPropertyName","Email",3,"ngModelChange","label","ngModel","placeholder","errors","readonly","required"]],template:function(r,o){if(r&1){let s=T();d(0,"div",1)(1,"h2",2),_(2,"Forgot password?"),u(),d(3,"button",3),I("click",function(){return f(s),m(o.goToLogin())}),H(4,"ss-icon",4),u(),d(5,"button",5),I("click",function(){return f(s),m(o.close(!0))}),H(6,"ss-icon",6),u()(),d(7,"mat-dialog-content"),P(8,ts,2,1,"small"),P(9,ns,2,0,"small"),d(10,"form",7,0),I("ngSubmit",function(){return f(s),m(o.onForgotPassword())}),P(12,is,3,10,"ss-input",8),P(13,rs,3,5,"ss-button",9),u(),d(14,"div",10),_(15,"Back to "),d(16,"a",11),I("click",function(){return f(s),m(o.goToLogin())}),_(17,"Log in"),u()()()}r&2&&(p(4),w("size",20)("iconVariant",20),p(2),w("size",20)("iconVariant",20),p(2),S(o.emailSent?8:-1),p(),S(o.emailSent?-1:9),p(3),S(o.emailSent?-1:12),p(),S(o.emailSent?-1:13))},dependencies:[Z,Y,J,ee,X,Q,V,ue,te,G,$,K],styles:["h1[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left}.content-wrapper[_ngcontent-%COMP%], .middle-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.content-wrapper[_ngcontent-%COMP%]{overflow-y:auto;background-color:var(--alt)}.main-account-wrapper[_ngcontent-%COMP%]{display:flex;width:1140px;height:744px;overflow:hidden;border-radius:70px;box-shadow:var(--elevation-s1);background-color:var(--grayscale)}.action-wrapper[_ngcontent-%COMP%]{width:50%;padding:90px 60px 94px}@media only screen and (max-width: 767px){.action-wrapper[_ngcontent-%COMP%]{width:calc(100% - 30px);padding:16px}}.action-wrapper[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:block}.action-wrapper[_ngcontent-%COMP%]   .action.hidden[_ngcontent-%COMP%]{display:none}.account-form-divider[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:16px}.account-form-divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;height:1px;background:var(--default-80)}.account-form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 9px;font-weight:700;color:var(--default-80)}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;margin-bottom:16px}small[_ngcontent-%COMP%]{display:block;margin-bottom:16px}"]});let n=e;return n})();var cs=["registerForm"];function ls(n,e){if(n&1&&(d(0,"div",8),_(1),b(2,"translate"),u()),n&2){let t=e.$implicit;p(),L(" ",ye(2,1,"errors."+t.errorCode,t.params)," ")}}function ds(n,e){if(n&1&&(H(0,"div",11),b(1,"translate")),n&2){let t=e.$implicit;w("innerHTML",ye(1,1,"errors."+t.errorCode,t.params),je)}}function us(n,e){if(n&1){let t=T();d(0,"ss-input",4),b(1,"translate"),b(2,"translate"),D("ngModelChange",function(r){f(t);let o=g();return x(o.model.email,r)||(o.model.email=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("email"))}),u(),d(3,"ss-input",5),b(4,"translate"),b(5,"translate"),D("ngModelChange",function(r){f(t);let o=g();return x(o.model.password,r)||(o.model.password=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("password"))}),u(),d(6,"ss-utc-date-picker",6),b(7,"translate"),b(8,"translate"),D("ngModelChange",function(r){f(t);let o=g();return x(o.model.birthday,r)||(o.model.birthday=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("birthday"))}),u(),d(9,"div",7),ce(10,ls,3,4,"div",8,ae),u(),d(12,"div",9),H(13,"div",10),u(),d(14,"div",7),ce(15,ds,2,4,"div",11,ae),u(),d(17,"ss-button",12),_(18),b(19,"translate"),u()}if(n&2){let t=g(),i=Pe(5);w("label",k(1,23,"forms.register.email.label")),N("ngModel",t.model.email),w("placeholder",k(2,25,"forms.register.email.placeholder"))("errors",t.validationErrors.email)("readonly",t.loading)("required",!0),p(3),w("label",k(4,27,"forms.register.password.label")),N("ngModel",t.model.password),w("placeholder",k(5,29,"forms.register.password.placeholder"))("errors",t.validationErrors.password)("readonly",t.loading)("required",!0),p(3),w("label",k(7,31,"forms.register.birthday.label"))("placeholder",k(8,33,"forms.register.birthday.placeholder"))("errors",t.validationErrors.birthday)("required",!0)("readonly",!0)("minDate",t.minDate)("maxDate",t.maxDate),N("ngModel",t.model.birthday),p(4),le(t.validationErrors.recaptchaResponse),p(5),le(t.validationErrors.other),p(2),w("disabled",!i.form.valid)("isLoading",t.loading),p(),L(" ",k(19,35,"forms.register.actions.register")," ")}}function hs(n,e){if(n&1){let t=T();d(0,"ss-button",13),I("buttonClick",function(){f(t);let r=g();return m(r.proceed())}),_(1),b(2,"translate"),u()}n&2&&(p(),L(" ",k(2,1,"forms.register.actions.success")," "))}var ps=(()=>{let e=class e{constructor(i,r,o,s,a,l,h,E,A){this.redirectService=i,this.data=r,this.router=o,this.accountService=s,this.dialogRef=a,this.route=l,this.utilityService=h,this.toastService=E,this.settingsService=A,this.model={},this.loading=!1,this.registeredSuccessfully=!1,this.headingText="Register for full access!",this.siteKey=at.googleRecaptchaKey,this.validationErrors={email:[],password:[],birthday:[],other:[],recaptchaResponse:[]},this.standalone=!1,this.registrationResponse=null,this.minDate=this.utilityService.getDateBeforeNYears(70),this.maxDate=this.utilityService.getDateBeforeNYears(5),this.standalone=!!r?.standalone}ngOnInit(){this.redirectUrl=this.route.snapshot.queryParams.redirectUrl,this.timeoutRef=window.setTimeout(()=>{this.captchaWidgetId=grecaptcha.render("recaptcha",{sitekey:at.googleRecaptchaKey})},200)}ngOnDestroy(){this.captchaWidgetId&&grecaptcha.reset(this.captchaWidgetId),window.clearTimeout(this.timeoutRef)}onRegister(){this.resetErrors();let i=localStorage.getItem(Ei),r=localStorage.getItem(bi),o=i?Number(r):90;if(i&&sn.utc().diff(sn.fromISO(i),"days").days<o&&!this.settingsService.isB2BApp()){this.toastService.info({exceptionDetail:{errorCode:"RecentlyRegisteredADifferentAccount"}});return}this.loading=!0;let s=document.querySelector('[name="g-recaptcha-response"]').value;this.model.recaptchaResponse=s,this.accountService.register(this.model).subscribe({next:a=>{this.registeredSuccessfully=!0,this.registrationResponse=a,this.proceed()},error:a=>{a.find(l=>l.errorCode==="MinAgeRequirementNotMet")&&this.model.birthday?(localStorage.setItem(Ii,this.model.birthday.toString()),this.utilityService.openMinAgeRequirementNotMetModal(this.model.birthday),this.closeModal(!0)):this.handleErrors(a)}})}removeFieldErrors(i){this.validationErrors[i]=[]}proceed(){let i=window.SSAuth;i&&i.postMessage&&this.registrationResponse&&i.postMessage(JSON.stringify(this.registrationResponse))}handleErrors(i){this.loading=!1,this.validationErrors.email=this.utilityService.errorsForField("email",["EntityAlreadyExists"],i,this.registerForm),this.validationErrors.password=this.utilityService.errorsForField("password",[],i,this.registerForm),this.validationErrors.birthday=this.utilityService.errorsForField("birthday",["MinAgeRequirementNotMet"],i,this.registerForm),this.validationErrors.recaptchaResponse=this.utilityService.errorsForField("recaptchaResponse",[],i,this.registerForm),this.validationErrors.other=i.filter(r=>this.validationErrors.email.indexOf(r)===-1&&this.validationErrors.password.indexOf(r)===-1&&this.validationErrors.birthday.indexOf(r)===-1&&this.validationErrors.recaptchaResponse.indexOf(r)===-1&&r.errorCode!=="RequestInvalid"),i.find(r=>r.errorCode==="InvalidReCaptcha")&&grecaptcha.reset(this.captchaWidgetId)}closeModal(i=!1){i&&this.router.navigate([],{queryParams:{redirectUrl:null},queryParamsHandling:"merge"}),this.dialogRef.close(i)}resetErrors(){this.validationErrors.email=[],this.validationErrors.password=[],this.validationErrors.other=[],this.validationErrors.recaptchaResponse=[],this.validationErrors.birthday=[]}};e.\u0275fac=function(r){return new(r||e)(v(pe),v(bt),v(Ge),v(B),v(ze),v(Pt),v(de),v(St),v(Te))},e.\u0275cmp=F({type:e,selectors:[["ss-register-modal-mobile-webview"]],viewQuery:function(r,o){if(r&1&&j(cs,5),r&2){let s;q(s=z())&&(o.registerForm=s.first)}},standalone:!1,decls:8,vars:3,consts:[["registerForm","ngForm"],[1,"mat-header"],["mat-dialog-title",""],[1,"wrapper-form",3,"ngSubmit"],["type","email","id","user-email","name","email","prefixIconName","mail","validationPropertyName","Email",3,"ngModelChange","label","ngModel","placeholder","errors","readonly","required"],["type","password","id","user-password","name","password","prefixIconName","lock_closed","validationPropertyName","Password",3,"ngModelChange","label","ngModel","placeholder","errors","readonly","required"],["id","birthday","name","birthday","validationPropertyName","Birthday",3,"ngModelChange","label","placeholder","errors","required","readonly","minDate","maxDate","ngModel"],[1,"error-messages"],[1,"error-message"],[1,"recaptcha-wrapper"],["id","recaptcha"],[1,"error-message",3,"innerHTML"],["type","submit",3,"disabled","isLoading"],[3,"buttonClick"]],template:function(r,o){if(r&1){let s=T();d(0,"div",1)(1,"h2",2),_(2),u()(),d(3,"mat-dialog-content")(4,"form",3,0),I("ngSubmit",function(){return f(s),m(o.onRegister())}),P(6,us,20,37),P(7,hs,3,3,"ss-button"),u()()}r&2&&(p(2),Se(o.registeredSuccessfully?"Successfully registered":"Let's get started!"),p(4),S(o.registeredSuccessfully?-1:6),p(),S(o.registeredSuccessfully?7:-1))},dependencies:[Z,Y,J,ee,X,Q,ct,V,te,G,$,K],styles:["h1[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left}.content-wrapper[_ngcontent-%COMP%], .middle-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.content-wrapper[_ngcontent-%COMP%]{overflow-y:auto;background-color:var(--alt)}.main-account-wrapper[_ngcontent-%COMP%]{display:flex;width:1140px;height:744px;overflow:hidden;border-radius:70px;box-shadow:var(--elevation-s1);background-color:var(--grayscale)}.action-wrapper[_ngcontent-%COMP%]{width:50%;padding:90px 60px 94px}@media only screen and (max-width: 767px){.action-wrapper[_ngcontent-%COMP%]{width:calc(100% - 30px);padding:16px}}.action-wrapper[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:block}.action-wrapper[_ngcontent-%COMP%]   .action.hidden[_ngcontent-%COMP%]{display:none}.account-form-divider[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:16px}.account-form-divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;height:1px;background:var(--default-80)}.account-form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 9px;font-weight:700;color:var(--default-80)}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}small[_ngcontent-%COMP%]{display:block;margin-bottom:16px}.toggle-view[_ngcontent-%COMP%]{margin-bottom:16px}.recaptcha-wrapper[_ngcontent-%COMP%]{height:78px;margin:2px 0 32px}"]});let n=e;return n})();var fs=["resetPasswordForm"];function ms(n,e){if(n&1){let t=T();d(0,"ss-input",14),b(1,"translate"),b(2,"translate"),D("ngModelChange",function(r){f(t);let o=g();return x(o.model.password,r)||(o.model.password=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("password"))}),u()}if(n&2){let t=g();w("label",k(1,6,"forms.resetPassword.password.label")),N("ngModel",t.model.password),w("placeholder",k(2,8,"forms.resetPassword.password.placeholder"))("errors",t.validationErrors.password)("readonly",t.resetPasswordLoading)("required",!0)}}function gs(n,e){if(n&1){let t=T();d(0,"ss-input",15),b(1,"translate"),b(2,"translate"),D("ngModelChange",function(r){f(t);let o=g();return x(o.model.confirmPassword,r)||(o.model.confirmPassword=r),m(r)}),I("ngModelChange",function(){f(t);let r=g();return m(r.removeFieldErrors("confirmPassword"))}),u()}if(n&2){let t=g();w("label",k(1,6,"forms.resetPassword.confirmPassword.label")),N("ngModel",t.model.confirmPassword),w("placeholder",k(2,8,"forms.resetPassword.confirmPassword.placeholder"))("errors",t.validationErrors.confirmPassword)("readonly",t.resetPasswordLoading)("required",!0)}}function _s(n,e){if(n&1&&(d(0,"ss-button",10),_(1),b(2,"translate"),u()),n&2){let t=g(),i=Pe(9);w("isLoading",t.resetPasswordLoading)("disabled",!i.form.valid),p(),L(" ",k(2,3,"forms.resetPassword.actions.changePassword")," ")}}function ys(n,e){if(n&1){let t=T();d(0,"div",11),_(1,"Back to "),d(2,"a",16),I("click",function(){f(t);let r=g();return m(r.goToLogin())}),_(3,"Log in"),u()()}}function ws(n,e){if(n&1){let t=T();d(0,"div",11),_(1," Your password has been successfully reset. You can now "),d(2,"a",16),I("click",function(){f(t);let r=g();return m(r.goToLogin())}),_(3,"log in"),u(),_(4,". "),u()}}function Cs(n,e){if(n&1&&(H(0,"div",13),b(1,"translate")),n&2){let t=e.$implicit;w("innerHTML",ye(1,1,"errors."+t.errorCode,t.params),je)}}var vs=(()=>{let e=class e{constructor(i,r,o,s,a,l){this.data=i,this.accountService=r,this.dialogRef=o,this.utilityService=s,this.router=a,this.redirectService=l,this.model={},this.errorMessages=[],this.resetPasswordLoading=!1,this.passwordResetSuccess=!1,this.passwordHidden=!0,this.confirmPasswordHidden=!0,this.validationErrors={password:[],confirmPassword:[],other:[]}}ngOnInit(){this.model.token=this.data.token,this.model.userId=this.data.userId,this.authPagesUrls=this.redirectService.getAuthPagesUrls(),this.dialogRef.backdropClick().subscribe(()=>this.close(!0)),this.dialogRef.keydownEvents().subscribe(i=>{i.key==="Escape"&&this.close(!0)})}onResetPassword(){this.resetErrors(),this.resetPasswordLoading=!0,this.accountService.resetPassword(this.model).subscribe({next:()=>{this.resetPasswordLoading=!1,this.passwordResetSuccess=!0},error:i=>this.handleErrors(i)})}removeFieldErrors(i){this.validationErrors[i]=[]}close(i=!1){this.dialogRef.close(i)}goToLogin(){this.dialogRef.close(),this.router.navigate([this.authPagesUrls.login],{queryParamsHandling:"merge"})}resetErrors(){this.errorMessages=[],this.validationErrors.password=[],this.validationErrors.other=[]}handleErrors(i){this.resetPasswordLoading=!1,this.errorMessages=i,this.validationErrors.password=this.utilityService.errorsForField("password",[],this.errorMessages,this.resetPasswordForm),this.validationErrors.confirmPassword=this.utilityService.errorsForField("confirmPassword",[],this.errorMessages,this.resetPasswordForm),this.validationErrors.other=this.errorMessages.filter(r=>this.validationErrors.password.indexOf(r)===-1&&this.validationErrors.confirmPassword.indexOf(r)===-1&&r.errorCode!=="RequestInvalid")}};e.\u0275fac=function(r){return new(r||e)(v(bt),v(B),v(ze),v(de),v(Ge),v(pe))},e.\u0275cmp=F({type:e,selectors:[["ss-reset-password-modal"]],viewQuery:function(r,o){if(r&1&&j(fs,5),r&2){let s;q(s=z())&&(o.resetPasswordForm=s.first)}},standalone:!1,decls:18,vars:9,consts:[["resetPasswordForm","ngForm"],[1,"mat-header"],["mat-dialog-title",""],[1,"modal-back-button",3,"click"],["iconName","arrow_left","color","default-20",3,"size","iconVariant"],[1,"close-modal",3,"click"],["iconName","dismiss","color","default-20",3,"size","iconVariant"],[1,"wrapper-form",3,"ngSubmit"],["type","password","id","user-password","name","password","prefixIconName","lock_closed","validationPropertyName","Password",3,"label","ngModel","placeholder","errors","readonly","required"],["type","password","id","confirm-password","name","confirmPassword","prefixIconName","lock_closed","validationPropertyName","Password Confirmation",3,"label","ngModel","placeholder","errors","readonly","required"],["type","submit",3,"isLoading","disabled"],[1,"notification"],[1,"error-messages"],[1,"error-message",3,"innerHTML"],["type","password","id","user-password","name","password","prefixIconName","lock_closed","validationPropertyName","Password",3,"ngModelChange","label","ngModel","placeholder","errors","readonly","required"],["type","password","id","confirm-password","name","confirmPassword","prefixIconName","lock_closed","validationPropertyName","Password Confirmation",3,"ngModelChange","label","ngModel","placeholder","errors","readonly","required"],[3,"click"]],template:function(r,o){if(r&1){let s=T();d(0,"div",1)(1,"h2",2),_(2,"Reset Password"),u(),d(3,"button",3),I("click",function(){return f(s),m(o.goToLogin())}),H(4,"ss-icon",4),u(),d(5,"button",5),I("click",function(){return f(s),m(o.close(!0))}),H(6,"ss-icon",6),u()(),d(7,"mat-dialog-content")(8,"form",7,0),I("ngSubmit",function(){return f(s),m(o.onResetPassword())}),P(10,ms,3,10,"ss-input",8),P(11,gs,3,10,"ss-input",9),P(12,_s,3,5,"ss-button",10),u(),P(13,ys,4,0,"div",11),P(14,ws,5,0,"div",11),d(15,"div",12),ce(16,Cs,2,4,"div",13,ae),u()()}r&2&&(p(4),w("size",20)("iconVariant",20),p(2),w("size",20)("iconVariant",20),p(4),S(o.passwordResetSuccess?-1:10),p(),S(o.passwordResetSuccess?-1:11),p(),S(o.passwordResetSuccess?-1:12),p(),S(o.passwordResetSuccess?-1:13),p(),S(o.passwordResetSuccess?14:-1),p(2),le(o.validationErrors.other))},dependencies:[Z,Y,J,ee,X,Q,V,ue,te,G,$,K],styles:["h1[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left}.content-wrapper[_ngcontent-%COMP%], .middle-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.content-wrapper[_ngcontent-%COMP%]{overflow-y:auto;background-color:var(--alt)}.main-account-wrapper[_ngcontent-%COMP%]{display:flex;width:1140px;height:744px;overflow:hidden;border-radius:70px;box-shadow:var(--elevation-s1);background-color:var(--grayscale)}.action-wrapper[_ngcontent-%COMP%]{width:50%;padding:90px 60px 94px}@media only screen and (max-width: 767px){.action-wrapper[_ngcontent-%COMP%]{width:calc(100% - 30px);padding:16px}}.action-wrapper[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:block}.action-wrapper[_ngcontent-%COMP%]   .action.hidden[_ngcontent-%COMP%]{display:none}.account-form-divider[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:16px}.account-form-divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;height:1px;background:var(--default-80)}.account-form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 9px;font-weight:700;color:var(--default-80)}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;margin-bottom:16px}.reset-password-content[_ngcontent-%COMP%]{display:flex;flex-grow:1}"]});let n=e;return n})();var sr=()=>{};var lr=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Is=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],s=n[t++],a=n[t++],l=((r&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},dr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],s=r+1<n.length,a=s?n[r+1]:0,l=r+2<n.length,h=l?n[r+2]:0,E=o>>2,A=(o&3)<<4|a>>4,y=(a&15)<<2|h>>6,O=h&63;l||(O=64,s||(y=64)),i.push(t[E],t[A],t[y],t[O])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lr(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Is(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let A=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||a==null||h==null||A==null)throw new hn;let y=o<<2|a>>4;if(i.push(y),h!==64){let O=a<<4&240|h>>2;if(i.push(O),A!==64){let W=h<<6&192|A;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hn=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Es=function(n){let e=lr(n);return dr.encodeByteArray(e,!0)},fn=function(n){return Es(n).replace(/\./g,"")},Nt=function(n){try{return dr.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bs(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ps=()=>bs().__FIREBASE_DEFAULTS__,Ss=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ts=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Nt(n[1]);return e&&JSON.parse(e)},mn=()=>{try{return sr()||Ps()||Ss()||Ts()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ur=n=>mn()?.emulatorHosts?.[n];var gn=()=>mn()?.config,_n=n=>mn()?.[`_${n}`];var Ot=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function dt(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function hr(n){return c(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}var lt={};function As(){let n={prod:[],emulator:[]};for(let e of Object.keys(lt))lt[e]?n.emulator.push(e):n.prod.push(e);return n}function ks(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var ar=!1;function pr(n,e){if(typeof window>"u"||typeof document>"u"||!dt(window.location.host)||lt[n]===e||lt[n]||ar)return;lt[n]=e;function t(y){return`__firebase__banner__${y}`}let i="__firebase__banner",o=As().prod.length>0;function s(){let y=document.getElementById(i);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function l(y,O){y.setAttribute("width","24"),y.setAttribute("id",O),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{ar=!0,s()},y}function E(y,O){y.setAttribute("id",O),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function A(){let y=ks(i),O=t("text"),W=document.getElementById(O)||document.createElement("span"),st=t("learnmore"),It=document.getElementById(st)||document.createElement("a"),We=t("preprendIcon"),He=document.getElementById(We)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let on=y.element;a(on),E(It,st);let No=h();l(He,We),on.append(He,W,It,No),document.body.appendChild(on)}o?(W.innerText="Preview backend disconnected.",He.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(He.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function U(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(U())}function mr(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gr(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _r(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yr(){let n=U();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function wr(){try{return typeof indexedDB=="object"}catch{return!1}}function Cr(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}var Ms="FirebaseError",ne=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Ms,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,we.prototype.create)}},we=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?Rs(o,i):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new ne(r,a,i)}};function Rs(n,e){return n.replace(Os,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Os=/\{\$([^}]+)}/g;function vr(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ae(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],s=e[r];if(cr(o)&&cr(s)){if(!Ae(o,s))return!1}else if(o!==s)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function cr(n){return n!==null&&typeof n=="object"}function Xe(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ir(n,e){let t=new pn(n,e);return t.subscribe.bind(t)}var pn=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Ns(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=un),r.error===void 0&&(r.error=un),r.complete===void 0&&(r.complete=un);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ns(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function un(){}var rd=4*60*60*1e3;function Ce(n){return n&&n._delegate?n._delegate:n}var fe=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var De="[DEFAULT]";var yn=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Ot;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ds(e))try{this.getOrInitializeService({instanceIdentifier:De})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=De){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return c(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=De){return this.instances.has(e)}getOptions(e=De){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);i===a&&s.resolve(r)}return r}onInit(e,t){let i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);let o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xs(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=De){return this.component?this.component.multipleInstances?e:De:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xs(n){return n===De?void 0:n}function Ds(n){return n.instantiationMode==="EAGER"}var xt=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new yn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Ls=[],M=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(M||{}),Vs={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},Us=M.INFO,Fs={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},Bs=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Fs[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ze=class{constructor(e){this.name=e,this._logLevel=Us,this._logHandler=Bs,this._userLogHandler=null,Ls.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vs[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...e),this._logHandler(this,M.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...e),this._logHandler(this,M.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,M.INFO,...e),this._logHandler(this,M.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,M.WARN,...e),this._logHandler(this,M.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...e),this._logHandler(this,M.ERROR,...e)}};var Ws=(n,e)=>e.some(t=>n instanceof t),Er,br;function Hs(){return Er||(Er=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function js(){return br||(br=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Pr=new WeakMap,Cn=new WeakMap,Sr=new WeakMap,wn=new WeakMap,In=new WeakMap;function qs(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(me(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Pr.set(t,n)}).catch(()=>{}),In.set(e,n),e}function zs(n){if(Cn.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Cn.set(n,e)}var vn={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cn.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Sr.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return me(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Tr(n){vn=n(vn)}function Gs(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Dt(this),e,...t);return Sr.set(i,e.sort?e.sort():[e]),me(i)}:js().includes(n)?function(...e){return n.apply(Dt(this),e),me(Pr.get(this))}:function(...e){return me(n.apply(Dt(this),e))}}function $s(n){return typeof n=="function"?Gs(n):(n instanceof IDBTransaction&&zs(n),Ws(n,Hs())?new Proxy(n,vn):n)}function me(n){if(n instanceof IDBRequest)return qs(n);if(wn.has(n))return wn.get(n);let e=$s(n);return e!==n&&(wn.set(n,e),In.set(e,n)),e}var Dt=n=>In.get(n);function kr(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let s=indexedDB.open(n,e),a=me(s);return i&&s.addEventListener("upgradeneeded",l=>{i(me(s.result),l.oldVersion,l.newVersion,me(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),r&&l.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}var Ks=["get","getKey","getAll","getAllKeys","count"],Ys=["put","add","delete","clear"],En=new Map;function Ar(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(En.get(e))return En.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=Ys.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Ks.includes(t)))return;let o=function(s,...a){return c(this,null,function*(){let l=this.transaction(s,r?"readwrite":"readonly"),h=l.store;return i&&(h=h.index(a.shift())),(yield Promise.all([h[t](...a),r&&l.done]))[0]})};return En.set(e,o),o}Tr(n=>oe(R({},n),{get:(e,t,i)=>Ar(e,t)||n.get(e,t,i),has:(e,t)=>!!Ar(e,t)||n.has(e,t)}));var Pn=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Js(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Js(n){return n.getComponent()?.type==="VERSION"}var Sn="@firebase/app",Mr="0.14.1";var ve=new Ze("@firebase/app"),Qs="@firebase/app-compat",Xs="@firebase/analytics-compat",Zs="@firebase/analytics",ea="@firebase/app-check-compat",ta="@firebase/app-check",na="@firebase/auth",ia="@firebase/auth-compat",ra="@firebase/database",oa="@firebase/data-connect",sa="@firebase/database-compat",aa="@firebase/functions",ca="@firebase/functions-compat",la="@firebase/installations",da="@firebase/installations-compat",ua="@firebase/messaging",ha="@firebase/messaging-compat",pa="@firebase/performance",fa="@firebase/performance-compat",ma="@firebase/remote-config",ga="@firebase/remote-config-compat",_a="@firebase/storage",ya="@firebase/storage-compat",wa="@firebase/firestore",Ca="@firebase/ai",va="@firebase/firestore-compat",Ia="firebase",Ea="12.1.0";var Tn="[DEFAULT]",ba={[Sn]:"fire-core",[Qs]:"fire-core-compat",[Zs]:"fire-analytics",[Xs]:"fire-analytics-compat",[ta]:"fire-app-check",[ea]:"fire-app-check-compat",[na]:"fire-auth",[ia]:"fire-auth-compat",[ra]:"fire-rtdb",[oa]:"fire-data-connect",[sa]:"fire-rtdb-compat",[aa]:"fire-fn",[ca]:"fire-fn-compat",[la]:"fire-iid",[da]:"fire-iid-compat",[ua]:"fire-fcm",[ha]:"fire-fcm-compat",[pa]:"fire-perf",[fa]:"fire-perf-compat",[ma]:"fire-rc",[ga]:"fire-rc-compat",[_a]:"fire-gcs",[ya]:"fire-gcs-compat",[wa]:"fire-fst",[va]:"fire-fst-compat",[Ca]:"fire-vertex","fire-js":"fire-js",[Ia]:"fire-js-all"};var Lt=new Map,Pa=new Map,An=new Map;function Rr(n,e){try{n.container.addComponent(e)}catch(t){ve.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tt(n){let e=n.name;if(An.has(e))return ve.debug(`There were multiple attempts to register component ${e}.`),!1;An.set(e,n);for(let t of Lt.values())Rr(t,n);for(let t of Pa.values())Rr(t,n);return!0}function On(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ie(n){return n==null?!1:n.settings!==void 0}var Sa={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ke=new we("app","Firebase",Sa);var kn=class{constructor(e,t,i){this._isDeleted=!1,this._options=R({},e),this._config=R({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ke.create("app-deleted",{appName:this._name})}};var nt=Ea;function Nn(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=R({name:Tn,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw ke.create("bad-app-name",{appName:String(r)});if(t||(t=gn()),!t)throw ke.create("no-options");let o=Lt.get(r);if(o){if(Ae(t,o.options)&&Ae(i,o.config))return o;throw ke.create("duplicate-app",{appName:r})}let s=new xt(r);for(let l of An.values())s.addComponent(l);let a=new kn(t,i,s);return Lt.set(r,a),a}function Dr(n=Tn){let e=Lt.get(n);if(!e&&n===Tn&&gn())return Nn();if(!e)throw ke.create("no-app",{appName:n});return e}function et(n,e,t){let i=ba[n]??n;t&&(i+=`-${t}`);let r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){let s=[`Unable to register library "${i}" with version "${e}":`];r&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ve.warn(s.join(" "));return}tt(new fe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Ta="firebase-heartbeat-database",Aa=1,ut="firebase-heartbeat-store",bn=null;function Lr(){return bn||(bn=kr(Ta,Aa,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ut)}catch(t){console.warn(t)}}}}).catch(n=>{throw ke.create("idb-open",{originalErrorMessage:n.message})})),bn}function ka(n){return c(this,null,function*(){try{let t=(yield Lr()).transaction(ut),i=yield t.objectStore(ut).get(Vr(n));return yield t.done,i}catch(e){if(e instanceof ne)ve.warn(e.message);else{let t=ke.create("idb-get",{originalErrorMessage:e?.message});ve.warn(t.message)}}})}function Or(n,e){return c(this,null,function*(){try{let i=(yield Lr()).transaction(ut,"readwrite");yield i.objectStore(ut).put(e,Vr(n)),yield i.done}catch(t){if(t instanceof ne)ve.warn(t.message);else{let i=ke.create("idb-set",{originalErrorMessage:t?.message});ve.warn(i.message)}}})}function Vr(n){return`${n.name}!${n.options.appId}`}var Ma=1024,Ra=30,Mn=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Rn(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return c(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Nr();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Ra){let r=Na(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ve.warn(e)}})}getHeartbeatsHeader(){return c(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Nr(),{heartbeatsToSend:t,unsentEntries:i}=Oa(this._heartbeatsCache.heartbeats),r=fn(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ve.warn(e),""}})}};function Nr(){return new Date().toISOString().substring(0,10)}function Oa(n,e=Ma){let t=[],i=n.slice();for(let r of n){let o=t.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),xr(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),xr(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Rn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return c(this,null,function*(){return wr()?Cr().then(()=>!0).catch(()=>!1):!1})}read(){return c(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield ka(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return c(this,null,function*(){if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Or(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return c(this,null,function*(){if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Or(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function xr(n){return fn(JSON.stringify({version:2,heartbeats:n})).length}function Na(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function xa(n){tt(new fe("platform-logger",e=>new Pn(e),"PRIVATE")),tt(new fe("heartbeat",e=>new Mn(e),"PRIVATE")),et(Sn,Mr,n),et(Sn,Mr,"esm2020"),et("fire-js","")}xa("");function Xr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Zr=Xr,eo=new we("auth","Firebase",Xr());var Ht=new Ze("@firebase/auth");function Da(n,...e){Ht.logLevel<=M.WARN&&Ht.warn(`Auth (${nt}): ${n}`,...e)}function Ut(n,...e){Ht.logLevel<=M.ERROR&&Ht.error(`Auth (${nt}): ${n}`,...e)}function _e(n,...e){throw Jn(n,...e)}function re(n,...e){return Jn(n,...e)}function Yn(n,e,t){let i=oe(R({},Zr()),{[e]:t});return new we("auth","Firebase",i).create(e,{appName:n.name})}function Le(n){return Yn(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function La(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&_e(n,"argument-error"),Yn(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jn(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return eo.create(n,...e)}function C(n,e,...t){if(!n)throw Jn(e,...t)}function Ie(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ut(e),new Error(e)}function be(n,e){n||Ie(e)}function jt(){return typeof self<"u"&&self.location?.href||""}function to(){return Ur()==="http:"||Ur()==="https:"}function Ur(){return typeof self<"u"&&self.location?.protocol||null}function Va(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(to()||gr()||"connection"in navigator)?navigator.onLine:!0}function Ua(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ve=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,be(t>e,"Short delay should be less than long delay!"),this.isMobile=fr()||_r()}get(){return Va()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Qn(n,e){be(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qt=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Fa={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Ba=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Wa=new Ve(3e4,6e4);function Zt(n,e){return n.tenantId&&!e.tenantId?oe(R({},e),{tenantId:n.tenantId}):e}function Be(o,s,a,l){return c(this,arguments,function*(n,e,t,i,r={}){return no(n,r,()=>c(null,null,function*(){let h={},E={};i&&(e==="GET"?E=i:h={body:JSON.stringify(i)});let A=Xe(R({key:n.config.apiKey},E)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let O=R({method:e,headers:y},h);return mr()||(O.referrerPolicy="no-referrer"),n.emulatorConfig&&dt(n.emulatorConfig.host)&&(O.credentials="include"),qt.fetch()(yield io(n,n.config.apiHost,t,A),O)}))})}function no(n,e,t){return c(this,null,function*(){n._canInitEmulator=!1;let i=R(R({},Fa),e);try{let r=new Ln(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Vt(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,h]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vt(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Vt(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Vt(n,"user-disabled",s);let E=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Yn(n,E,h);_e(n,E)}}catch(r){if(r instanceof ne)throw r;_e(n,"network-request-failed",{message:String(r)})}})}function Ha(o,s,a,l){return c(this,arguments,function*(n,e,t,i,r={}){let h=yield Be(n,e,t,i,r);return"mfaPendingCredential"in h&&_e(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function io(n,e,t,i){return c(this,null,function*(){let r=`${e}${t}?${i}`,o=n,s=o.config.emulator?Qn(n.config,r):`${n.config.apiScheme}://${r}`;return Ba.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Ln=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(re(this.auth,"network-request-failed")),Wa.get())})}};function Vt(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=re(n,e,i);return r.customData._tokenResponse=t,r}function ja(n,e){return c(this,null,function*(){return Be(n,"POST","/v1/accounts:delete",e)})}function zt(n,e){return c(this,null,function*(){return Be(n,"POST","/v1/accounts:lookup",e)})}function ht(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ro(n,e=!1){return c(this,null,function*(){let t=Ce(n),i=yield t.getIdToken(e),r=Xn(i);C(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,s=o?.sign_in_provider;return{claims:r,token:i,authTime:ht(xn(r.auth_time)),issuedAtTime:ht(xn(r.iat)),expirationTime:ht(xn(r.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function xn(n){return Number(n)*1e3}function Xn(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ut("JWT malformed, contained fewer than 3 sections"),null;try{let r=Nt(t);return r?JSON.parse(r):(Ut("Failed to decode base64 JWT payload"),null)}catch(r){return Ut("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Fr(n){let e=Xn(n);return C(e,"internal-error"),C(typeof e.exp<"u","internal-error"),C(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ft(n,e,t=!1){return c(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof ne&&qa(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function qa({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vn=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>c(this,null,function*(){yield this.iteration()}),t)}iteration(){return c(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var mt=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ht(this.lastLoginAt),this.creationTime=ht(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function gt(n){return c(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),i=yield ft(n,zt(e,{idToken:t}));C(i?.users.length,e,"internal-error");let r=i.users[0];n._notifyReloadListener(r);let o=r.providerUserInfo?.length?so(r.providerUserInfo):[],s=za(n.providerData,o),a=n.isAnonymous,l=!(n.email&&r.passwordHash)&&!s?.length,h=a?l:!1,E={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new mt(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,E)})}function oo(n){return c(this,null,function*(){let e=Ce(n);yield gt(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function za(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function so(n){return n.map(i=>{var r=i,{providerId:e}=r,t=Et(r,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function Ga(n,e){return c(this,null,function*(){let t=yield no(n,{},()=>c(null,null,function*(){let i=Xe({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,s=yield io(n,r,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:a,body:i};return n.emulatorConfig&&dt(n.emulatorConfig.host)&&(l.credentials="include"),qt.fetch()(s,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function $a(n,e){return c(this,null,function*(){return Be(n,"POST","/v2/accounts:revokeToken",Zt(n,e))})}var pt=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){C(e.idToken,"internal-error"),C(typeof e.idToken<"u","internal-error"),C(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){C(e.length!==0,"internal-error");let t=Fr(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return c(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(C(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return c(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield Ga(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,s=new n;return i&&(C(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(C(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(C(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ie("not implemented")}};function Me(n,e){C(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Re=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:i}=s,r=Et(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new mt(r.createdAt||void 0,r.lastLoginAt||void 0)}getIdToken(e){return c(this,null,function*(){let t=yield ft(this,this.stsTokenManager.getToken(this.auth,e));return C(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ro(this,e)}reload(){return oo(this)}_assign(e){this!==e&&(C(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>R({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(oe(R({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return c(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield gt(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return c(this,null,function*(){if(ie(this.auth.app))return Promise.reject(Le(this.auth));let e=yield this.getIdToken();return yield ft(this,ja(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return oe(R({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>R({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,h=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:A,emailVerified:y,isAnonymous:O,providerData:W,stsTokenManager:st}=t;C(A&&st,e,"internal-error");let It=pt.fromJSON(this.name,st);C(typeof A=="string",e,"internal-error"),Me(i,e.name),Me(r,e.name),C(typeof y=="boolean",e,"internal-error"),C(typeof O=="boolean",e,"internal-error"),Me(o,e.name),Me(s,e.name),Me(a,e.name),Me(l,e.name),Me(h,e.name),Me(E,e.name);let We=new n({uid:A,auth:e,email:r,emailVerified:y,displayName:i,isAnonymous:O,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:It,createdAt:h,lastLoginAt:E});return W&&Array.isArray(W)&&(We.providerData=W.map(He=>R({},He))),l&&(We._redirectEventId=l),We}static _fromIdTokenResponse(e,t,i=!1){return c(this,null,function*(){let r=new pt;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield gt(o),o})}static _fromGetAccountInfoResponse(e,t,i){return c(this,null,function*(){let r=t.users[0];C(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?so(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!o?.length,a=new pt;a.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new mt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(l,h),l})}};var Br=new Map;function Ee(n){be(n instanceof Function,"Expected a class definition");let e=Br.get(n);return e?(be(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Br.set(n,e),e)}var Ka=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return c(this,null,function*(){return!0})}_set(t,i){return c(this,null,function*(){this.storage[t]=i})}_get(t){return c(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return c(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Un=Ka;function Ft(n,e,t){return`firebase:${n}:${e}:${t}`}var Gt=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=Ft(this.userKey,r.apiKey,o),this.fullPersistenceKey=Ft("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return c(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield zt(this.auth,{idToken:e}).catch(()=>{});return t?Re._fromGetAccountInfoResponse(this.auth,t,e):null}return Re._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return c(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return c(this,null,function*(){if(!t.length)return new n(Ee(Un),e,i);let r=(yield Promise.all(t.map(h=>c(null,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),o=r[0]||Ee(Un),s=Ft(i,e.config.apiKey,e.name),a=null;for(let h of t)try{let E=yield h._get(s);if(E){let A;if(typeof E=="string"){let y=yield zt(e,{idToken:E}).catch(()=>{});if(!y)break;A=yield Re._fromGetAccountInfoResponse(e,y,E)}else A=Re._fromJSON(e,E);h!==o&&(a=A),o=h;break}}catch{}let l=r.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,i):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(h=>c(null,null,function*(){if(h!==o)try{yield h._remove(s)}catch{}}))),new n(o,e,i))})}};function Wr(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uo(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ao(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(po(e))return"Blackberry";if(fo(e))return"Webos";if(co(e))return"Safari";if((e.includes("chrome/")||lo(e))&&!e.includes("edge/"))return"Chrome";if(ho(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function ao(n=U()){return/firefox\//i.test(n)}function co(n=U()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lo(n=U()){return/crios\//i.test(n)}function uo(n=U()){return/iemobile/i.test(n)}function ho(n=U()){return/android/i.test(n)}function po(n=U()){return/blackberry/i.test(n)}function fo(n=U()){return/webos/i.test(n)}function Zn(n=U()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ya(n=U()){return Zn(n)&&!!window.navigator?.standalone}function Ja(){return yr()&&document.documentMode===10}function mo(n=U()){return Zn(n)||ho(n)||fo(n)||po(n)||/windows phone/i.test(n)||uo(n)}function go(n,e=[]){let t;switch(n){case"Browser":t=Wr(U());break;case"Worker":t=`${Wr(U())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nt}/${i}`}var Fn=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return c(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function Qa(t){return c(this,arguments,function*(n,e={}){return Be(n,"GET","/v2/passwordPolicy",Zt(n,e))})}var Xa=6,Bn=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Xa,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Wn=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $t(this),this.idTokenSubscription=new $t(this),this.beforeStateQueue=new Fn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ee(t)),this._initializationPromise=this.queue(()=>c(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Gt.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return c(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return c(this,null,function*(){try{let t=yield zt(this,{idToken:e}),i=yield Re._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return c(this,null,function*(){if(ie(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=i?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return C(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return c(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return c(this,null,function*(){try{yield gt(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Ua()}_delete(){return c(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return c(this,null,function*(){if(ie(this.app))return Promise.reject(Le(this));let t=e?Ce(e):null;return t&&C(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return c(this,null,function*(){if(!this._deleted)return e&&C(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>c(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return c(this,null,function*(){return ie(this.app)?Promise.reject(Le(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ie(this.app)?Promise.reject(Le(this)):this.queue(()=>c(this,null,function*(){yield this.assertedPersistence.setPersistence(Ee(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return c(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return c(this,null,function*(){let e=yield Qa(this),t=new Bn(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new we("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return c(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield $a(this,i)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return c(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return c(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ee(e)||this._popupRedirectResolver;C(t,this,"argument-error"),this.redirectPersistenceManager=yield Gt.create(this,[Ee(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return c(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>c(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return c(this,null,function*(){if(e===this.currentUser)return this.queue(()=>c(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(C(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return c(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=go(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return c(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=yield this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e})}_getAppCheckToken(){return c(this,null,function*(){if(ie(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Da(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function en(n){return Ce(n)}var $t=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ir(t=>this.observer=t)}get next(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ei={loadJS(){return c(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Za(n){ei=n}function ec(n){return ei.loadJS(n)}function tc(){return ei.gapiScript}function _o(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function yo(n,e){let t=On(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(Ae(o,e??{}))return r;_e(r,"already-initialized")}return t.initialize({options:e})}function nc(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ee);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function wo(n,e,t){let i=en(n);C(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=Co(e),{host:s,port:a}=ic(e),l=a===null?"":`:${a}`,h={url:`${o}//${s}${l}/`},E=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){C(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),C(Ae(h,i.config.emulator)&&Ae(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,dt(s)?(hr(`${o}//${s}${l}`),pr("Auth",!0)):r||rc()}function Co(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ic(n){let e=Co(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:Hr(i.substr(o.length+1))}}else{let[o,s]=i.split(":");return{host:o,port:Hr(s)}}}function Hr(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function rc(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var _t=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ie("not implemented")}_getIdTokenResponse(e){return Ie("not implemented")}_linkToIdToken(e,t){return Ie("not implemented")}_getReauthenticationResolver(e){return Ie("not implemented")}};function it(n,e){return c(this,null,function*(){return Ha(n,"POST","/v1/accounts:signInWithIdp",Zt(n,e))})}var oc="http://localhost",Ue=class n extends _t{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_e("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let a=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=a,o=Et(a,["providerId","signInMethod"]);if(!i||!r)return null;let s=new n(i,r);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return it(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,it(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,it(e,t)}buildRequest(){let e={requestUri:oc,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xe(t)}return e}};var yt=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var rt=class extends yt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},ot=class n extends rt{static credentialFromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;return C("providerId"in t&&"signInMethod"in t,"argument-error"),Ue._fromParams(t)}credential(e){return this._credential(oe(R({},e),{nonce:e.rawNonce}))}_credential(e){return C(e.idToken||e.accessToken,"argument-error"),Ue._fromParams(oe(R({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return n.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:o,nonce:s,providerId:a}=e;if(!i&&!r&&!t&&!o||!a)return null;try{return new n(a)._credential({idToken:t,accessToken:i,nonce:s,pendingToken:o})}catch{return null}}};var vt=(()=>{class n extends rt{constructor(){super("facebook.com")}static credential(t){return Ue._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com";return n})(),tn=(()=>{class n extends rt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Ue._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var wt=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return c(this,null,function*(){let o=yield Re._fromIdTokenResponse(e,i,r),s=jr(i);return new n({user:o,providerId:s,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return c(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=jr(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function jr(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Hn=class n extends ne{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function vo(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Hn._fromErrorAndOperation(n,o,e,i):o})}function sc(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}function Io(n,e,t=!1){return c(this,null,function*(){let i=yield ft(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return wt._forOperation(n,"link",i)})}function ac(n,e,t){return c(this,null,function*(){yield gt(e);let i=sc(e.providerData),r=n===!1?"provider-already-linked":"no-such-provider";C(i.has(t)===n,e.auth,r)})}function cc(n,e,t=!1){return c(this,null,function*(){let{auth:i}=n;if(ie(i.app))return Promise.reject(Le(i));let r="reauthenticate";try{let o=yield ft(n,vo(i,r,e,n),t);C(o.idToken,i,"internal-error");let s=Xn(o.idToken);C(s,i,"internal-error");let{sub:a}=s;return C(n.uid===a,i,"user-mismatch"),wt._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&_e(i,"user-mismatch"),o}})}function lc(n,e,t=!1){return c(this,null,function*(){if(ie(n.app))return Promise.reject(Le(n));let i="signIn",r=yield vo(n,i,e),o=yield wt._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function ti(n,e){return c(this,null,function*(){let t=Ce(n);return yield ac(!1,t,e.providerId),Io(t,e)})}function dc(n,e){return c(this,null,function*(){return Be(n,"POST","/v1/accounts:createAuthUri",Zt(n,e))})}function ni(n,e){return c(this,null,function*(){let t=to()?jt():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:r}=yield dc(Ce(n),i);return r||[]})}function Eo(n,e,t,i){return Ce(n).onIdTokenChanged(e,t,i)}function bo(n,e,t){return Ce(n).beforeAuthStateChanged(e,t)}var Kt="__sak";var Yt=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kt,"1"),this.storage.removeItem(Kt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var uc=1e3,hc=10,pc=(()=>{class n extends Yt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mo(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,l,h)=>{this.notifyListeners(a,h)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);Ja()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,hc):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},uc)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return c(this,null,function*(){yield Oe(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return c(this,null,function*(){let i=yield Oe(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return c(this,null,function*(){yield Oe(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Po=pc;var fc=(()=>{class n extends Yt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),ii=fc;function mc(n){return Promise.all(n.map(e=>c(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var gc=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return c(this,null,function*(){let i=t,{eventId:r,eventType:o,data:s}=i.data,a=this.handlersMap[o];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let l=Array.from(a).map(E=>c(this,null,function*(){return E(i.origin,s)})),h=yield mc(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:h})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function ri(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var jn=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return c(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{let h=ri("",20);r.port1.start();let E=setTimeout(()=>{l(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(A){let y=A;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(E),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(E),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ge(){return window}function _c(n){ge().location.href=n}function So(){return typeof ge().WorkerGlobalScope<"u"&&typeof ge().importScripts=="function"}function yc(){return c(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function wc(){return navigator?.serviceWorker?.controller||null}function Cc(){return So()?self:null}var To="firebaseLocalStorageDb",vc=1,Jt="firebaseLocalStorage",Ao="fbase_key",Fe=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function nn(n,e){return n.transaction([Jt],e?"readwrite":"readonly").objectStore(Jt)}function Ic(){let n=indexedDB.deleteDatabase(To);return new Fe(n).toPromise()}function qn(){let n=indexedDB.open(To,vc);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Jt,{keyPath:Ao})}catch(r){t(r)}}),n.addEventListener("success",()=>c(null,null,function*(){let i=n.result;i.objectStoreNames.contains(Jt)?e(i):(i.close(),yield Ic(),e(yield qn()))}))})}function qr(n,e,t){return c(this,null,function*(){let i=nn(n,!0).put({[Ao]:e,value:t});return new Fe(i).toPromise()})}function Ec(n,e){return c(this,null,function*(){let t=nn(n,!1).get(e),i=yield new Fe(t).toPromise();return i===void 0?null:i.value})}function zr(n,e){let t=nn(n,!0).delete(e);return new Fe(t).toPromise()}var bc=800,Pc=3,Sc=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return c(this,null,function*(){return this.db?this.db:(this.db=yield qn(),this.db)})}_withRetries(t){return c(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>Pc)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return c(this,null,function*(){return So()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return c(this,null,function*(){this.receiver=gc._getInstance(Cc()),this.receiver._subscribe("keyChanged",(t,i)=>c(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>c(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return c(this,null,function*(){if(this.activeServiceWorker=yield yc(),!this.activeServiceWorker)return;this.sender=new jn(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return c(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||wc()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return c(this,null,function*(){try{if(!indexedDB)return!1;let t=yield qn();return yield qr(t,Kt,"1"),yield zr(t,Kt),!0}catch{}return!1})}_withPendingWrite(t){return c(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return c(this,null,function*(){return this._withPendingWrite(()=>c(this,null,function*(){return yield this._withRetries(r=>qr(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return c(this,null,function*(){let i=yield this._withRetries(r=>Ec(r,t));return this.localCache[t]=i,i})}_remove(t){return c(this,null,function*(){return this._withPendingWrite(()=>c(this,null,function*(){return yield this._withRetries(i=>zr(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return c(this,null,function*(){let t=yield this._withRetries(o=>{let s=nn(o,!1).getAll();return new Fe(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>c(this,null,function*(){return this._poll()}),bc)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ko=Sc;var Nd=_o("rcb"),xd=new Ve(3e4,6e4);function Mo(n,e){return e?Ee(e):(C(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ct=class extends _t{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return it(e,this._buildIdpRequest())}_linkToIdToken(e,t){return it(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return it(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Tc(n){return lc(n.auth,new Ct(n),n.bypassAuthState)}function Ac(n){let{auth:e,user:t}=n;return C(t,e,"internal-error"),cc(t,new Ct(n),n.bypassAuthState)}function kc(n){return c(this,null,function*(){let{auth:e,user:t}=n;return C(t,e,"internal-error"),Io(t,new Ct(n),n.bypassAuthState)})}var Qt=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>c(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return c(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tc;case"linkViaPopup":case"linkViaRedirect":return kc;case"reauthViaPopup":case"reauthViaRedirect":return Ac;default:_e(this.auth,"internal-error")}}resolve(e){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Mc=new Ve(2e3,1e4);function rn(n,e,t){return c(this,null,function*(){if(ie(n.app))return Promise.reject(re(n,"operation-not-supported-in-this-environment"));let i=en(n);La(n,e,yt);let r=Mo(i,t);return new Rc(i,"signInViaPopup",e,r).executeNotNull()})}var Rc=(()=>{class n extends Qt{constructor(t,i,r,o,s){super(t,i,o,s),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return c(this,null,function*(){let t=yield this.execute();return C(t,this.auth,"internal-error"),t})}onExecution(){return c(this,null,function*(){be(this.filter.length===1,"Popup operations only handle one event");let t=ri();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(re(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(re(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Mc.get())};t()}}n.currentPopupAction=null;return n})(),Oc="pendingRedirect",Bt=new Map,zn=class n extends Qt{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return c(this,null,function*(){let e=Bt.get(this.auth._key());if(!e){try{let i=(yield Nc(this.resolver,this.auth))?yield Oe(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Bt.set(this.auth._key(),e)}return this.bypassAuthState||Bt.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return c(this,null,function*(){if(e.type==="signInViaRedirect")return Oe(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Oe(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return c(this,null,function*(){})}cleanUp(){}};function Nc(n,e){return c(this,null,function*(){let t=Lc(e),i=Dc(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function xc(n,e){Bt.set(n._key(),e)}function Dc(n){return Ee(n._redirectPersistence)}function Lc(n){return Ft(Oc,n.config.apiKey,n.name)}function Vc(n,e,t=!1){return c(this,null,function*(){if(ie(n.app))return Promise.reject(Le(n));let i=en(n),r=Mo(i,e),s=yield new zn(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield i._persistUserIfCurrent(s.user),yield i._setRedirectUser(null,e)),s})}var Uc=10*60*1e3,Gn=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fc(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ro(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(re(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uc&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gr(e))}saveEventToCache(e){this.cachedEventUids.add(Gr(e)),this.lastProcessedEventTime=Date.now()}};function Gr(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ro({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Fc(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ro(n);default:return!1}}function Bc(t){return c(this,arguments,function*(n,e={}){return Be(n,"GET","/v1/projects",e)})}var Wc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hc=/^https?/;function jc(n){return c(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Bc(n);for(let t of e)try{if(qc(t))return}catch{}_e(n,"unauthorized-domain")})}function qc(n){let e=jt(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===i}if(!Hc.test(t))return!1;if(Wc.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var zc=new Ve(3e4,6e4);function $r(){let n=ge().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Gc(n){return new Promise((e,t)=>{function i(){$r(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$r(),t(re(n,"network-request-failed"))},timeout:zc.get()})}if(ge().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ge().gapi?.load)i();else{let r=_o("iframefcb");return ge()[r]=()=>{gapi.load?i():t(re(n,"network-request-failed"))},ec(`${tc()}?onload=${r}`).catch(o=>t(o))}}).catch(e=>{throw Wt=null,e})}var Wt=null;function $c(n){return Wt=Wt||Gc(n),Wt}var Kc=new Ve(5e3,15e3),Yc="__/auth/iframe",Jc="emulator/auth/iframe",Qc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zc(n){let e=n.config;C(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Qn(e,Jc):`https://${n.config.authDomain}/${Yc}`,i={apiKey:e.apiKey,appName:n.name,v:nt},r=Xc.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Xe(i).slice(1)}`}function el(n){return c(this,null,function*(){let e=yield $c(n),t=ge().gapi;return C(t,n,"internal-error"),e.open({where:document.body,url:Zc(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qc,dontclear:!0},i=>new Promise((r,o)=>c(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let s=re(n,"network-request-failed"),a=ge().setTimeout(()=>{o(s)},Kc.get());function l(){ge().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{o(s)})})))})}var tl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nl=500,il=600,rl="_blank",ol="http://localhost",Xt=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function sl(n,e,t,i=nl,r=il){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",l=oe(R({},tl),{width:i.toString(),height:r.toString(),top:o,left:s}),h=U().toLowerCase();t&&(a=lo(h)?rl:t),ao(h)&&(e=e||ol,l.scrollbars="yes");let E=Object.entries(l).reduce((y,[O,W])=>`${y}${O}=${W},`,"");if(Ya(h)&&a!=="_self")return al(e||"",a),new Xt(null);let A=window.open(e||"",a,E);C(A,n,"popup-blocked");try{A.focus()}catch{}return new Xt(A)}function al(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var cl="__/auth/handler",ll="emulator/auth/handler",dl=encodeURIComponent("fac");function Kr(n,e,t,i,r,o){return c(this,null,function*(){C(n.config.authDomain,n,"auth-domain-config-required"),C(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:nt,eventId:r};if(e instanceof yt){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",vr(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[E,A]of Object.entries(o||{}))s[E]=A}if(e instanceof rt){let E=e.getScopes().filter(A=>A!=="");E.length>0&&(s.scopes=E.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let E of Object.keys(a))a[E]===void 0&&delete a[E];let l=yield n._getAppCheckToken(),h=l?`#${dl}=${encodeURIComponent(l)}`:"";return`${ul(n)}?${Xe(a).slice(1)}${h}`})}function ul({config:n}){return n.emulator?Qn(n,ll):`https://${n.authDomain}/${cl}`}var Dn="webStorageSupport",$n=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ii,this._completeRedirectFn=Vc,this._overrideRedirectResult=xc}_openPopup(e,t,i,r){return c(this,null,function*(){be(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield Kr(e,t,i,jt(),r);return sl(e,o,ri())})}_openRedirect(e,t,i,r){return c(this,null,function*(){yield this._originValidation(e);let o=yield Kr(e,t,i,jt(),r);return _c(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(be(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return c(this,null,function*(){let t=yield el(e),i=new Gn(e);return t.register("authEvent",r=>(C(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dn,{type:Dn},r=>{let o=r?.[0]?.[Dn];o!==void 0&&t(!!o),_e(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jc(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mo()||co()||Zn()}},Oo=$n;var Yr="@firebase/auth",Jr="1.11.0";var Kn=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return c(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hl(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pl(n){tt(new fe("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=i.options;C(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:go(n)},h=new Wn(i,r,o,l);return nc(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),tt(new fe("auth-internal",e=>{let t=en(e.getProvider("auth").getImmediate());return(i=>new Kn(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),et(Yr,Jr,hl(n)),et(Yr,Jr,"esm2020")}var fl=5*60,ml=_n("authIdTokenMaxAge")||fl,Qr=null,gl=n=>e=>c(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ml)return;let r=t?.token;Qr!==r&&(Qr=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function oi(n=Dr()){let e=On(n,"auth");if(e.isInitialized())return e.getImmediate();let t=yo(n,{popupRedirectResolver:Oo,persistence:[ko,Po,ii]}),i=_n("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let s=gl(o.toString());bo(t,s,()=>s(t.currentUser)),Eo(t,a=>s(a))}}let r=ur("auth");return r&&wo(t,`http://${r}`),t}function _l(){return document.getElementsByTagName("head")?.[0]??document}Za({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=re("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",_l().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pl("Browser");function yl(n,e){if(n&1){let t=T();d(0,"ss-button",3),I("click",function(){f(t);let r=g(2);return m(r.onFBLogin())}),d(1,"span",2),_(2),u(),_(3,"Facebook "),u(),d(4,"ss-button",4),I("click",function(){f(t);let r=g(2);return m(r.onAppleLogin())}),d(5,"span",2),_(6),u(),_(7,"Apple "),u()}if(n&2){let t=g(2);w("isLoading",t.loggingInWithFB)("disabled",t.anyLoginProcessActive),p(2),Se(t.textPrefix?t.textPrefix+" ":""),p(2),w("isLoading",t.loggingInWithApple)("disabled",t.anyLoginProcessActive),p(2),Se(t.textPrefix?t.textPrefix+" ":"")}}function wl(n,e){if(n&1){let t=T();d(0,"ss-button",1),I("click",function(){f(t);let r=g();return m(r.onGoogleLogin())}),d(1,"span",2),_(2),u(),_(3,"Google "),u(),P(4,yl,8,6)}if(n&2){let t=g();w("isLoading",t.loggingInWithGoogle)("disabled",t.anyLoginProcessActive),p(2),Se(t.textPrefix?t.textPrefix+" ":""),p(2),S(t.settingsService.isB2BApp()?-1:4)}}function Cl(n,e){if(n&1){let t=T();d(0,"ss-button",5),I("click",function(){f(t);let r=g();return m(r.linkAccount())}),_(1," Click to connect your social accounts "),u()}if(n&2){let t=g();w("matTooltip",hi("You previously signed in with ",t.linkProviderId,", so we now need to connect that account to your facebook.com account."))("isLoading",t.linkingAccounts)}}var si=(()=>{let e=class e{get anyLoginProcessActive(){return this.loggingInWithFB||this.loggingInWithGoogle||this.loggingInWithApple}constructor(i,r,o,s,a,l,h){this.settingsService=i,this.accountService=r,this.ngZone=o,this.loaderService=s,this.toastService=a,this.activatedRoute=l,this.redirectService=h,this.orientation="horizontal",this.textPrefix="",this.standalone=!1,this.authSuccess=new se,this.eligibilityError=new se,this.model={},this.loggingInWithGoogle=!1,this.loggingInWithApple=!1,this.loggingInWithFB=!1,this.linkingAccounts=!1,this.showLinkAccountButton=!1,Nn(at.firebase),this.auth=oi()}ngOnInit(){this.authPagesUrls=this.redirectService.getAuthPagesUrls(),this.activatedRoute.queryParams.subscribe(i=>{this.redirectUrl=i.redirectUrl,this.model.referralCode=i.referralCode,this.model.inviteId=i.invite,this.model.registerCode=i.registerCode})}onFBLogin(){this.onFirebaseLogin(he.Facebook)}onGoogleLogin(){this.onFirebaseLogin(he.Google)}onAppleLogin(){this.onFirebaseLogin(he.Apple)}onFirebaseLogin(i){let r;i===he.Google?(this.loggingInWithGoogle=!0,r=new tn):i===he.Apple?(this.loggingInWithApple=!0,r=new ot("apple.com")):(this.loggingInWithFB=!0,r=new vt),rn(this.auth,r).then(o=>this.onSignInSuccess(o,i)).catch(o=>{if(o.code==="auth/account-exists-with-different-credential"&&r.providerId==="facebook.com"){this.linkEmail=o.customData.email;let a=vt.credentialFromError(o);a?ni(this.auth,this.linkEmail).then(l=>{let h=l.includes("google.com")?"google.com":l[0];this.linkProviderId=h,this.linkProvider=this.getProviderForProviderId(h),this.linkPendingCredential=a,this.linkType=i,this.showLinkAccountButton=!0}):this.toastService.error({message:"Something went wrong. If this persists, please report this issue to team@studystream.live."});return}i===he.Google?this.loggingInWithGoogle=!1:i===he.Apple?this.loggingInWithApple=!1:this.loggingInWithFB=!1;let s=o.message==="Firebase: Error (auth/popup-closed-by-user)."?"Unable to sign-in. Please complete the sign-in process without closing the popup.":o.message;this.toastService.error({message:s})})}linkAccount(){this.linkingAccounts=!0,rn(this.auth,this.linkProvider).then(i=>{if(i.user.email!==this.linkEmail){this.linkingAccounts=!1,this.toastService.error({message:"You have to connect the account with the same address as the one that you are using for your Facebook account."});return}ti(i.user,this.linkPendingCredential).then(r=>{this.onSignInSuccess(r,this.linkType),this.linkingAccounts=!1}).catch(r=>{this.linkingAccounts=!1,this.toastService.error({message:r.message})})}).catch(i=>{this.linkingAccounts=!1;let r=i.message==="Firebase: Error (auth/popup-closed-by-user)."?"Unable to sign-in. Please complete the sign-in process without closing the popup.":i.message;this.toastService.error({message:r})})}handleSocialLogin(i){this.ngZone.run(()=>{if(this.authSuccess.emit(),this.standalone){this.accountService.onSSLogin(i,location.href);return}if(i.completedBasicInfo){this.accountService.onSSLogin(i,this.redirectUrl);return}let r=`${this.authPagesUrls.basicInfo}${this.redirectUrl?`?redirectUrl=${this.redirectUrl}`:""}`;this.accountService.onSSLogin(i,r)})}getProviderForProviderId(i){switch(i){case"google.com":return new tn;case"apple.com":return new ot("apple.com");case"facebook.com":return new vt;default:throw new Error("Not implemented.")}}onSignInSuccess(i,r){i.user?.getIdToken().then(o=>{let s={idToken:o,refreshToken:i.user?.refreshToken,referralCode:this.model.referralCode,inviteId:this.model.inviteId,registerCode:this.model.registerCode};(r===he.Google?this.accountService.googleLogin(s):r===he.Apple?this.accountService.appleLogin(s):this.accountService.facebookLogin(s)).subscribe({next:this.handleSocialLogin.bind(this),error:l=>{this.ngZone.run(()=>{this.handleErrors(l)})}})})}handleErrors(i){this.loaderService.stop(),this.loggingInWithFB=!1,this.loggingInWithGoogle=!1,this.loggingInWithApple=!1,this.linkingAccounts=!1,["InvalidReferralCode","EmailNotEligibleForSignUp","FacebookLoginNoEmail","FacebookLoginCanceled"].find(o=>o===i[0].errorCode)?this.eligibilityError.emit(i[0]):this.toastService.error({exceptionDetail:i[0]})}};e.\u0275fac=function(r){return new(r||e)(v(Te),v(B),v(li),v(Ke),v(St),v(Pt),v(pe))},e.\u0275cmp=F({type:e,selectors:[["ss-social-block"]],hostVars:2,hostBindings:function(r,o){r&2&&di(o.orientation)},inputs:{orientation:"orientation",textPrefix:"textPrefix",standalone:"standalone"},outputs:{authSuccess:"authSuccess",eligibilityError:"eligibilityError"},standalone:!1,decls:2,vars:2,consts:[[3,"isLoading","matTooltip"],["backgroundImageClass","google-button","color","light social","type","button",3,"click","isLoading","disabled"],[1,"prefix"],["backgroundImageClass","facebook-button","color","light social","type","button",3,"click","isLoading","disabled"],["backgroundImageClass","apple-button","color","light social","type","button",3,"click","isLoading","disabled"],[3,"click","isLoading","matTooltip"]],template:function(r,o){r&1&&(P(0,wl,5,4),P(1,Cl,2,3,"ss-button",0)),r&2&&(S(o.showLinkAccountButton?-1:0),p(),S(o.showLinkAccountButton?1:-1))},dependencies:[V,Mi],styles:["h1[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left}.content-wrapper[_ngcontent-%COMP%], .middle-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.content-wrapper[_ngcontent-%COMP%]{overflow-y:auto;background-color:var(--alt)}.main-account-wrapper[_ngcontent-%COMP%]{display:flex;width:1140px;height:744px;overflow:hidden;border-radius:70px;box-shadow:var(--elevation-s1);background-color:var(--grayscale)}.action-wrapper[_ngcontent-%COMP%]{width:50%;padding:90px 60px 94px}@media only screen and (max-width: 767px){.action-wrapper[_ngcontent-%COMP%]{width:calc(100% - 30px);padding:16px}}.action-wrapper[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:block}.action-wrapper[_ngcontent-%COMP%]   .action.hidden[_ngcontent-%COMP%]{display:none}.account-form-divider[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:16px}.account-form-divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;height:1px;background:var(--default-80)}.account-form-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 9px;font-weight:700;color:var(--default-80)}[_nghost-%COMP%]{display:flex;margin-bottom:16px}@media only screen and (max-width: 1024px){[_nghost-%COMP%]{justify-content:flex-start}}.vertical[_nghost-%COMP%]{flex-direction:column;align-items:flex-start}.vertical[_nghost-%COMP%]   ss-button[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.vertical[_nghost-%COMP%]   ss-button[_ngcontent-%COMP%]:last-of-type{margin:0}.horizontal[_nghost-%COMP%]   ss-button[_ngcontent-%COMP%]{flex:1;margin-right:12px}.horizontal[_nghost-%COMP%]   ss-button[_ngcontent-%COMP%]:last-of-type{margin-right:0}@media only screen and (max-width: 479px){[_nghost-%COMP%]   ss-button[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{display:none}}h4[_ngcontent-%COMP%]{margin-bottom:15px}ss-button[_ngcontent-%COMP%]  button.apple-button .button-text, ss-button[_ngcontent-%COMP%]  button.google-button .button-text, ss-button[_ngcontent-%COMP%]  button.facebook-button .button-text{font-weight:400}"]});let n=e;return n})();var $h=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ci({type:e}),e.\u0275inj=ai({providers:[Gi],imports:[pi,Ti,wi,er,Ki,$i,Di,Ai,Li,ki,gi,Bi,fi,Ni,xi,mi,Ri,Vi,_i.forChild({loader:yi({prefix:"./assets/i18n/",suffix:".json"})})]});let n=e;return n})();Ne(qi,function(){return[Z,Y,J,ee,X,Q,V,ue,te,G,$,si]},function(){return[K]});Ne(zi,function(){return[Z,Y,J,ee,X,Q,ct,V,ue,te,G,$,si]},function(){return[K]});Ne(Wi,function(){return[ue,G,$,ir]},[]);Ne(Hi,function(){return[ue,G,$,rr]},[]);Ne(ji,function(){return[ue,G,$,cn]},[]);Ne(cn,function(){return[Z,Y,J,ee,Pi,Si,X,Q,ct,Xi,V,te,Ui,Fi]},function(){return[Qi,K]});export{ir as a,rr as b,cn as c,os as d,ps as e,vs as f,$h as g};
